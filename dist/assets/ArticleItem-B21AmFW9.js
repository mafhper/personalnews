import{r as l,u as y,j as t}from"./performance-BQw1TMdn.js";import{L as N}from"./LazyImage-CBJ_fLAZ.js";import{u as T}from"./useFavorites-Dya1WeJG.js";import{c as D,a as L}from"./index-EqZgzEO3.js";import"./services-BY3oiKYC.js";const A=l.memo(()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H9.828a1 1 0 00-.707.293l-2.828 2.828a1 1 0 01-1.414 0l-2.828-2.828A1 1 0 002.172 17H4a2 2 0 01-2-2V5z"})}));A.displayName="ChatBubbleIcon";const g=l.memo(({filled:e=!1})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:e?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}));g.displayName="HeartIcon";const I=({article:e,index:c=0,timeFormat:a="24h",onClick:o})=>{const{startRenderTiming:m,endRenderTiming:d}=y(),{isFavorite:x,toggleFavorite:h}=T(),{settings:p}=D(),{contentConfig:i}=L(),[b,v]=l.useState(!1);l.useEffect(()=>(m(),()=>{d()}),[m,d]);const u=x(e),j=l.useCallback(s=>{s.preventDefault(),s.stopPropagation(),h(e)},[h,e]),w=l.useCallback(()=>{v(!0)},[]),f=s=>{const n=Math.floor((new Date().getTime()-s.getTime())/1e3);let r=n/31536e3;return r>1?Math.floor(r)+" years ago":(r=n/2592e3,r>1?Math.floor(r)+" months ago":(r=n/86400,r>1?Math.floor(r)+" days ago":(r=n/3600,r>1?Math.floor(r)+" hours ago":(r=n/60,r>1?Math.floor(r)+" minutes ago":Math.floor(n)+" seconds ago"))))},k=`https://picsum.photos/seed/${encodeURIComponent(e.link)}/400/200`;return t.jsx("article",{className:"h-full flex flex-col",children:t.jsxs("div",{className:"flex flex-col h-full group",children:[t.jsxs("div",{className:"relative mb-4 bg-gray-800 rounded-lg overflow-hidden h-40 sm:h-32 lg:h-40",children:[t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",onClick:s=>{o&&(s.preventDefault(),o(e))},className:"block w-full h-full cursor-pointer","aria-hidden":"true",tabIndex:-1,children:b?t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):t.jsx(N,{src:e.imageUrl||k,alt:"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:w,retryAttempts:1})}),t.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold pointer-events-none",children:c}),t.jsx("button",{onClick:j,className:`absolute top-2 right-2 rounded-full bg-black/70 backdrop-blur-sm transition-all duration-200 ${u?"text-red-500 hover:text-red-400":"text-white hover:text-red-500"}`,style:{minWidth:"32px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center",padding:"6px"},"aria-label":u?"Remove from favorites":"Add to favorites",title:u?"Remove from favorites":"Add to favorites",children:t.jsx(g,{filled:u})})]}),t.jsx("div",{className:"flex-1 flex flex-col",children:t.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex flex-col group",onClick:s=>{o&&(s.preventDefault(),o(e))},"aria-label":`Article: ${e.title} from ${e.author||e.sourceTitle}`,children:[i.showTags&&t.jsx("div",{className:"mb-2",children:t.jsx("span",{className:"inline-block bg-[rgb(var(--color-accent))]/20 text-[rgb(var(--color-accent))] px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wide",children:e.sourceTitle})}),t.jsx("h4",{className:"font-bold text-base lg:text-lg leading-tight group-hover:underline text-gray-100 mb-3 line-clamp-3",children:e.title}),t.jsxs("div",{className:"mt-auto space-y-2",children:[t.jsx("div",{className:"flex items-center justify-between text-xs text-gray-400",children:i.showAuthor&&e.author&&t.jsx("span",{className:"truncate max-w-[120px]","aria-label":`Author: ${e.author}`,title:e.author,children:e.author})}),(i.showDate||i.showTime)&&t.jsx("time",{className:"text-gray-500 text-xs block",dateTime:e.pubDate.toISOString(),"aria-label":`Published ${f(e.pubDate)}`,children:p.showPublicationTime||i.showTime?a==="12h"?`${e.pubDate.toLocaleDateString()} às ${e.pubDate.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!0})}`:`${e.pubDate.toLocaleDateString()} às ${e.pubDate.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1})}`:f(e.pubDate)})]})]})})]})})},C=(e,c)=>{if(e.index!==c.index)return!1;const a=e.article,o=c.article;return a.title===o.title&&a.link===o.link&&a.pubDate.getTime()===o.pubDate.getTime()&&a.sourceTitle===o.sourceTitle&&a.imageUrl===o.imageUrl&&a.author===o.author},H=l.memo(I,C);export{H as A};
