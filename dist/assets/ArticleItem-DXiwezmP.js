import{r as l,u as D,j as t}from"./performance-loPN9a-y.js";import{L as I}from"./LazyImage-Cp-3W0-g.js";import{u as A}from"./useFavorites-D1adFmmm.js";import{c as L,a as S}from"./index-DATOltF_.js";import{u as C}from"./services-kTaNVaQ0.js";const M=l.memo(()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H9.828a1 1 0 00-.707.293l-2.828 2.828a1 1 0 01-1.414 0l-2.828-2.828A1 1 0 002.172 17H4a2 2 0 01-2-2V5z"})}));M.displayName="ChatBubbleIcon";const b=l.memo(({filled:e=!1})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:e?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}));b.displayName="HeartIcon";const U=({article:e,index:m=0,timeFormat:r="24h",onClick:a})=>{const{startRenderTiming:d,endRenderTiming:h}=D(),{isFavorite:v,toggleFavorite:g}=A(),{settings:w}=L(),{contentConfig:i}=S(),f=C(),[j,k]=l.useState(!1);l.useEffect(()=>(d(),()=>{h()}),[d,h]);const c=v(e),N=l.useCallback(s=>{s.preventDefault(),s.stopPropagation(),g(e)},[g,e]),T=l.useCallback(()=>{k(!0),f.warn(`Failed to load image for article: ${e.title}`,{url:e.imageUrl})},[e.title,e.imageUrl,f]),x=s=>{const n=Math.floor((new Date().getTime()-s.getTime())/1e3);let o=n/31536e3;return o>1?Math.floor(o)+" years ago":(o=n/2592e3,o>1?Math.floor(o)+" months ago":(o=n/86400,o>1?Math.floor(o)+" days ago":(o=n/3600,o>1?Math.floor(o)+" hours ago":(o=n/60,o>1?Math.floor(o)+" minutes ago":Math.floor(n)+" seconds ago"))))},u=encodeURIComponent(e.link),p=`https://picsum.photos/seed/${u}/400/200`,y=`https://picsum.photos/seed/${u}/200/100`,$=`https://picsum.photos/seed/${u}/600/300`;return t.jsx("article",{className:"h-full flex flex-col",children:t.jsxs("div",{className:"flex flex-col h-full group",children:[!j&&t.jsxs("div",{className:"relative mb-4",children:[t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",onClick:s=>{a&&(s.preventDefault(),a(e))},className:"block cursor-pointer","aria-hidden":"true",tabIndex:-1,children:t.jsx(I,{src:e.imageUrl||p,alt:`Thumbnail image for article: ${e.title}`,className:"w-full h-40 sm:h-32 lg:h-40 object-cover rounded-lg",onError:T,retryAttempts:2,srcSet:`${e.imageUrl||y} 200w,
                            ${e.imageUrl||p} 400w,
                            ${e.imageUrl||$} 600w`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),t.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold pointer-events-none",children:m}),t.jsx("button",{onClick:N,className:`absolute top-2 right-2 rounded-full bg-black/70 backdrop-blur-sm transition-all duration-200 ${c?"text-red-500 hover:text-red-400":"text-white hover:text-red-500"}`,style:{minWidth:"32px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center",padding:"6px"},"aria-label":c?"Remove from favorites":"Add to favorites",title:c?"Remove from favorites":"Add to favorites",children:t.jsx(b,{filled:c})})]}),t.jsx("div",{className:"flex-1 flex flex-col",children:t.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex flex-col group",onClick:s=>{a&&(s.preventDefault(),a(e))},"aria-label":`Article: ${e.title} from ${e.author||e.sourceTitle}`,children:[i.showTags&&t.jsx("div",{className:"mb-2",children:t.jsx("span",{className:"inline-block bg-[rgb(var(--color-accent))]/20 text-[rgb(var(--color-accent))] px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wide",children:e.sourceTitle})}),t.jsx("h4",{className:"font-bold text-base lg:text-lg leading-tight group-hover:underline text-gray-100 mb-3 line-clamp-3",children:e.title}),t.jsxs("div",{className:"mt-auto space-y-2",children:[t.jsx("div",{className:"flex items-center justify-between text-xs text-gray-400",children:i.showAuthor&&e.author&&t.jsx("span",{className:"truncate max-w-[120px]","aria-label":`Author: ${e.author}`,title:e.author,children:e.author})}),(i.showDate||i.showTime)&&t.jsx("time",{className:"text-gray-500 text-xs block",dateTime:e.pubDate.toISOString(),"aria-label":`Published ${x(e.pubDate)}`,children:w.showPublicationTime||i.showTime?r==="12h"?`${e.pubDate.toLocaleDateString()} às ${e.pubDate.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!0})}`:`${e.pubDate.toLocaleDateString()} às ${e.pubDate.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1})}`:x(e.pubDate)})]})]})})]})})},E=(e,m)=>{if(e.index!==m.index)return!1;const r=e.article,a=m.article;return r.title===a.title&&r.link===a.link&&r.pubDate.getTime()===a.pubDate.getTime()&&r.sourceTitle===a.sourceTitle&&r.imageUrl===a.imageUrl&&r.author===a.author},P=l.memo(U,E);export{P as A};
