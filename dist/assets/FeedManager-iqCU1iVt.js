import{j as e,r as g}from"./performance-DGmBAmJn.js";import{d as mt,b as rt,a as at,u as ot,r as it,e as pt,f as xt,D as et,C as gt,g as ft}from"./index-Cghj9Ouz.js";import{u as nt,n as lt,j as vt,o as bt}from"./services-BY3oiKYC.js";import{u as Ke}from"./useNotificationReplacements-Bxw6ue3f.js";import{Modal as yt}from"./Modal-Dnj5Ij16.js";import{C as Ue,B as tt}from"./Card-49g1gVpc.js";import{S as wt,B as st,A as jt}from"./Badge-B0-lktRg.js";import"./react-vendor-Cgg2GOmP.js";const kt=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],Ct=mt("rss",kt),Nt={RSS:({className:p="w-4 h-4",size:t})=>e.jsx(Ct,{className:p,size:t})};class St{constructor(t){this.PROXY_CONFIGS=[{url:"https://api.allorigins.win/get?url=",name:"AllOrigins",responseTransform:s=>{try{return JSON.parse(s).contents||s}catch{return s}},headers:{Accept:"application/json"},timeout:1e4,priority:1,enabled:!0},{url:"https://corsproxy.io/?",name:"CorsProxy.io",headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml","User-Agent":"Personal News Dashboard/1.0"},timeout:8e3,priority:2,enabled:!0},{url:"https://cors-anywhere.herokuapp.com/",name:"CORS Anywhere",headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml","User-Agent":"Personal News Dashboard/1.0","X-Requested-With":"XMLHttpRequest"},timeout:12e3,priority:3,enabled:!0},{url:"https://api.codetabs.com/v1/proxy?quest=",name:"CodeTabs",responseTransform:s=>{try{const r=JSON.parse(s);return r.data?r.data:s}catch{return s}},timeout:15e3,priority:4,enabled:!0}],this.proxyStats=new Map,this.proxyHealthCheck=new Map,this.config={maxRetries:3,healthCheckInterval:300*1e3,failureThreshold:3,recoveryThreshold:2,defaultTimeout:1e4,...t},this.initializeProxyStats(),this.startHealthMonitoring()}getAvailableProxies(){return this.PROXY_CONFIGS.filter(t=>t.enabled&&this.isProxyHealthy(t.name)).sort((t,s)=>{const r=this.proxyStats.get(t.name),a=this.proxyStats.get(s.name),o=r?.healthScore||0,i=a?.healthScore||0;return Math.abs(o-i)>.1?i-o:t.priority-s.priority})}async tryProxy(t,s){const r=Date.now();try{const a=this.buildProxyUrl(t,s),o=t.timeout||this.config.defaultTimeout,i=new AbortController,n=setTimeout(()=>i.abort(),o),u=await fetch(a,{method:"GET",signal:i.signal,headers:t.headers||{}});clearTimeout(n);const m=Date.now()-r;if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);let c=await u.text();return t.responseTransform&&(c=t.responseTransform(c)),this.recordProxyAttempt({proxyName:t.name,proxyUrl:a,targetUrl:s,timestamp:r,success:!0,responseTime:m,statusCode:u.status}),c}catch(a){const o=Date.now()-r;throw this.recordProxyAttempt({proxyName:t.name,proxyUrl:this.buildProxyUrl(t,s),targetUrl:s,timestamp:r,success:!1,responseTime:o,error:a.message}),a}}async tryProxiesWithFailover(t){const s=this.getAvailableProxies(),r=[];if(s.length===0)throw new Error("No healthy proxies available");let a=null;for(const o of s){const i=Date.now();try{const n=await this.tryProxy(o,t),u={proxyName:o.name,proxyUrl:this.buildProxyUrl(o,t),targetUrl:t,timestamp:i,success:!0,responseTime:Date.now()-i};return r.push(u),{content:n,proxyUsed:o.name,attempts:r}}catch(n){a=n;const u={proxyName:o.name,proxyUrl:this.buildProxyUrl(o,t),targetUrl:t,timestamp:i,success:!1,responseTime:Date.now()-i,error:n.message};r.push(u),this.markProxyStatus(o.name,!1);continue}}throw new Error(`All proxies failed. Last error: ${a?.message||"Unknown error"}`)}markProxyStatus(t,s){const r=this.proxyStats.get(t);r&&(s?(r.consecutiveFailures=0,r.lastSuccess=Date.now()):(r.consecutiveFailures++,r.lastFailure=Date.now()),this.proxyHealthCheck.set(t,r.consecutiveFailures<this.config.failureThreshold),this.updateHealthScore(t))}getProxyStats(){return new Map(this.proxyStats)}getProxyStatsByName(t){return this.proxyStats.get(t)}getOverallStats(){const t=Array.from(this.proxyStats.values());return{totalProxies:this.PROXY_CONFIGS.length,healthyProxies:Array.from(this.proxyHealthCheck.values()).filter(Boolean).length,totalRequests:t.reduce((s,r)=>s+r.totalRequests,0),totalSuccesses:t.reduce((s,r)=>s+r.success,0),totalFailures:t.reduce((s,r)=>s+r.failures,0),averageResponseTime:t.length>0?t.reduce((s,r)=>s+r.avgResponseTime,0)/t.length:0}}resetStats(){this.initializeProxyStats()}disableProxy(t){const s=this.PROXY_CONFIGS.find(r=>r.name===t);s&&(s.enabled=!1,this.proxyHealthCheck.set(t,!1))}enableProxy(t){const s=this.PROXY_CONFIGS.find(r=>r.name===t);if(s){s.enabled=!0;const r=this.proxyStats.get(t);r&&(r.consecutiveFailures=0),this.proxyHealthCheck.set(t,!0)}}getConfiguration(){return{...this.config}}destroy(){this.healthCheckTimer&&(clearInterval(this.healthCheckTimer),this.healthCheckTimer=void 0)}initializeProxyStats(){this.PROXY_CONFIGS.forEach(t=>{this.proxyStats.set(t.name,{success:0,failures:0,totalRequests:0,avgResponseTime:0,lastUsed:0,lastSuccess:0,lastFailure:0,consecutiveFailures:0,healthScore:1}),this.proxyHealthCheck.set(t.name,!0)})}buildProxyUrl(t,s){return t.url+encodeURIComponent(s)}isProxyHealthy(t){return this.proxyHealthCheck.get(t)||!1}recordProxyAttempt(t){const s=this.proxyStats.get(t.proxyName);if(!s)return;s.totalRequests++,s.lastUsed=t.timestamp,t.success?(s.success++,s.lastSuccess=t.timestamp,s.consecutiveFailures=0):(s.failures++,s.lastFailure=t.timestamp,s.consecutiveFailures++);const r=s.avgResponseTime*(s.totalRequests-1)+t.responseTime;s.avgResponseTime=r/s.totalRequests,this.updateHealthScore(t.proxyName)}updateHealthScore(t){const s=this.proxyStats.get(t);if(!s)return;let r=1;if(s.totalRequests>0){const a=s.success/s.totalRequests;r*=a}if(s.consecutiveFailures>=this.config.failureThreshold)r*=.1;else{const a=s.consecutiveFailures/this.config.failureThreshold;r*=1-.4*a}if(s.avgResponseTime>5e3){const a=Math.min((s.avgResponseTime-5e3)/1e4,1);r*=1-.1*a}s.healthScore=Math.max(0,Math.min(1,r))}startHealthMonitoring(){this.healthCheckTimer=setInterval(()=>{this.performHealthCheck()},this.config.healthCheckInterval)}performHealthCheck(){this.PROXY_CONFIGS.forEach(t=>{if(!t.enabled)return;const s=this.proxyStats.get(t.name);if(!this.proxyHealthCheck.get(t.name)&&s){const a=Date.now()-s.lastFailure,o=300*1e3;a>o&&(s.consecutiveFailures=0,this.proxyHealthCheck.set(t.name,!0),this.updateHealthScore(t.name))}})}}const Ge=new St;class Tt{constructor(t){this.cache=new Map,this.stats={hitCount:0,missCount:0},this.config={maxSize:50*1024*1024,maxEntries:1e4,defaultSuccessTTL:1800*1e3,defaultFailureTTL:300*1e3,discoveryTTL:3600*1e3,cleanupInterval:300*1e3,enableStats:!0},this.cleanupTimer=null,t&&this.configure(t),this.startAutomaticCleanup()}get(t){const s=this.cache.get(t);if(!s)return this.config.enableStats&&this.stats.missCount++,null;const r=Date.now();return r-s.timestamp>s.ttl?(this.cache.delete(t),this.config.enableStats&&this.stats.missCount++,null):(s.accessCount++,s.lastAccessed=r,this.config.enableStats&&this.stats.hitCount++,s)}set(t,s,r){const a=Date.now(),o=r||this.determineTTL(t,s),i=this.estimateSize(s);this.ensureCapacity(i);const n={data:s,timestamp:a,ttl:o,accessCount:0,lastAccessed:a,key:t,size:i};this.cache.set(t,n)}invalidate(t){return this.cache.delete(t)}invalidatePattern(t){const s=new RegExp(t.replace(/\*/g,".*"));let r=0;for(const[a]of this.cache)s.test(a)&&(this.cache.delete(a),r++);return r}cleanup(){const t=Date.now();let s=0;for(const[r,a]of this.cache)t-a.timestamp>a.ttl&&(this.cache.delete(r),s++);return s}clear(){this.cache.clear(),this.stats.hitCount=0,this.stats.missCount=0}getStats(){const t=Array.from(this.cache.values()),s=t.reduce((c,w)=>c+w.size,0),r=t.reduce((c,w)=>c+w.accessCount,0),a=t.map(c=>c.timestamp),o=a.length>0?Math.min(...a):0,i=a.length>0?Math.max(...a):0,n=this.stats.hitCount+this.stats.missCount,u=n>0?this.stats.hitCount/n:0,m={success:0,failure:0,discovery:0,custom:0};return t.forEach(c=>{c.ttl===this.config.defaultSuccessTTL?m.success++:c.ttl===this.config.defaultFailureTTL?m.failure++:c.ttl===this.config.discoveryTTL?m.discovery++:m.custom++}),{totalEntries:this.cache.size,totalSize:s,hitCount:this.stats.hitCount,missCount:this.stats.missCount,hitRate:Math.round(u*100)/100,oldestEntry:o,newestEntry:i,averageAccessCount:t.length>0?Math.round(r/t.length):0,memoryUsage:{used:s,limit:this.config.maxSize,percentage:this.config.maxSize>0?Math.round(s/this.config.maxSize*100):0},ttlDistribution:m}}configure(t){this.config={...this.config,...t},t.cleanupInterval!==void 0&&(this.stopAutomaticCleanup(),this.startAutomaticCleanup())}getConfiguration(){return{...this.config}}refresh(t){const s=this.cache.get(t);return s?(s.timestamp=0,!0):!1}getKeys(t){const s=Array.from(this.cache.keys());if(!t)return s;const r=new RegExp(t.replace(/\*/g,".*"));return s.filter(a=>r.test(a))}has(t){const s=this.cache.get(t);return s?Date.now()-s.timestamp<=s.ttl:!1}getMetadata(t){const s=this.cache.get(t);if(!s)return null;const{data:r,...a}=s;return a}determineTTL(t,s){if(t.includes("discovery:")||t.includes("feeds:"))return this.config.discoveryTTL;if(typeof s=="object"&&s!==null){if(s.isValid===!0||s.success===!0)return this.config.defaultSuccessTTL;if(s.isValid===!1||s.success===!1)return this.config.defaultFailureTTL}return this.config.defaultSuccessTTL}estimateSize(t){try{const s=JSON.stringify(t);return new Blob([s]).size}catch{return typeof t=="string"?t.length*2:typeof t=="object"&&t!==null?1e3:100}}ensureCapacity(t){this.cache.size>=this.config.maxEntries&&this.evictLRU(0),Array.from(this.cache.values()).reduce((r,a)=>r+a.size,0)+t>this.config.maxSize&&this.evictLRU(t)}evictLRU(t){const s=Array.from(this.cache.entries());s.sort(([,a],[,o])=>a.lastAccessed-o.lastAccessed);let r=0;for(const[a,o]of s)if(this.cache.delete(a),r+=o.size,r>=t&&this.cache.size<this.config.maxEntries||this.cache.size<=Math.floor(this.config.maxEntries*.8))break}startAutomaticCleanup(){this.cleanupTimer&&clearInterval(this.cleanupTimer),this.cleanupTimer=setInterval(()=>{this.cleanup()},this.config.cleanupInterval)}stopAutomaticCleanup(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}destroy(){this.stopAutomaticCleanup(),this.clear()}}const Y=new Tt;class Ft{constructor(){this.COMMON_FEED_PATHS=["/rss.xml","/feed.xml","/atom.xml","/rss","/feed","/feeds/all.atom.xml","/feeds/posts/default","/blog/rss.xml","/blog/feed.xml","/news/rss.xml","/index.xml","/feed/","/rss/","/feeds/","/wp-rss2.php","/wp-atom.php","/wp-rdf.php"],this.FEED_DISCOVERY_SELECTORS=['link[type="application/rss+xml"]','link[type="application/atom+xml"]','link[type="application/rdf+xml"]','link[rel="alternate"][type*="xml"]','link[rel="alternate"][type*="rss"]','link[rel="alternate"][type*="atom"]','meta[property="og:rss"]','meta[name="rss"]','meta[name="feed"]'],this.REQUEST_TIMEOUT=1e4,this.MAX_CONCURRENT_REQUESTS=5}async discoverFromWebsite(t){const s=Date.now(),r=this.normalizeUrl(t),a={originalUrl:t,discoveredFeeds:[],discoveryMethods:[],totalAttempts:0,successfulAttempts:0,discoveryTime:0,suggestions:[]};try{if(r.includes("youtube.com")||r.includes("youtu.be")){const i=await this.tryDiscoverYouTubeFeed(r);i&&(a.discoveredFeeds.push(i),a.successfulAttempts++)}a.discoveryMethods.push("common-paths");const o=await this.tryCommonFeedPaths(r);a.discoveredFeeds.push(...o),a.totalAttempts+=this.COMMON_FEED_PATHS.length,a.successfulAttempts+=o.length,a.discoveryMethods.push("html-parsing");try{const i=await this.fetchWebsiteContent(r),n=await this.scanHtmlForFeeds(i,r),u=new Set(a.discoveredFeeds.map(c=>c.url)),m=n.filter(c=>!u.has(c.url));a.discoveredFeeds.push(...m),a.totalAttempts+=1,a.successfulAttempts+=m.length>0?1:0}catch(i){console.warn("HTML parsing failed:",i),a.suggestions.push("Could not parse website HTML for feed discovery links")}if(a.discoveredFeeds.length===0){a.discoveryMethods.push("content-scan");try{const i=await this.scanContentForFeeds(r);a.discoveredFeeds.push(...i),a.totalAttempts+=1,a.successfulAttempts+=i.length>0?1:0}catch(i){console.warn("Content scanning failed:",i)}}a.discoveredFeeds=this.deduplicateAndSortFeeds(a.discoveredFeeds),a.suggestions=this.generateDiscoverySuggestions(a)}catch(o){console.error("Feed discovery failed:",o),a.suggestions.push(`Discovery failed: ${o.message}`)}return a.discoveryTime=Date.now()-s,a}async scanHtmlForFeeds(t,s){const r=[],a=new Set;try{const i=new DOMParser().parseFromString(t,"text/html");if(i.querySelector("parsererror"))throw new Error("Invalid HTML content");for(const n of this.FEED_DISCOVERY_SELECTORS){const u=i.querySelectorAll(n);for(const m of u){const c=this.extractFeedUrl(m,s);if(c&&!a.has(c)){a.add(c);const w=n.includes("meta")?"meta-tag":"link-tag",F=this.calculateConfidence(w,m),V=m.getAttribute("title")||m.getAttribute("alt")||m.textContent?.trim(),L={url:c,title:V||void 0,type:this.determineFeedType(m,c),discoveryMethod:w,confidence:F};try{const N=await this.extractFeedMetadata(await this.fetchFeedContent(c));L.title=N.title||L.title,L.description=N.description,L.type=N.type,L.lastValidated=Date.now()}catch(N){console.warn(`Failed to extract metadata for ${c}:`,N)}r.push(L)}}}}catch(o){throw console.error("HTML scanning failed:",o),new Error(`Failed to scan HTML for feeds: ${o.message}`)}return r}async tryCommonFeedPaths(t){const s=[],r=this.normalizeUrl(t),a=this.COMMON_FEED_PATHS.map(async i=>{const n=new URL(i,r).toString();try{const u=await this.fetchFeedContent(n),m=await this.extractFeedMetadata(u);return{url:n,title:m.title,description:m.description,type:m.type,discoveryMethod:"common-path",confidence:this.calculatePathConfidence(i),lastValidated:Date.now()}}catch{return null}}),o=await this.executeConcurrently(a,this.MAX_CONCURRENT_REQUESTS);return s.push(...o.filter(Boolean)),s}async extractFeedMetadata(t){try{const s=new DOMParser;let r=s.parseFromString(t,"text/xml");if(r.querySelector("parsererror")){const o=this.cleanupMalformedXML(t);if(r=s.parseFromString(o,"text/xml"),r.querySelector("parsererror"))throw new Error("Invalid XML content")}if(r.querySelector("rss")){const o=r.querySelector("channel > title")?.textContent?.trim(),i=r.querySelector("channel > description")?.textContent?.trim();return{title:o,description:i,type:"rss"}}else if(r.querySelector('feed[xmlns*="atom"]')||r.querySelector('feed[xmlns="http://www.w3.org/2005/Atom"]')){const o=r.querySelector("feed > title")?.textContent?.trim(),i=r.querySelector("feed > subtitle")?.textContent?.trim();return{title:o,description:i,type:"atom"}}else if(r.querySelector("rdf\\:RDF, RDF")||r.querySelector('[xmlns\\:rdf], [xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"]')){const o=r.querySelector("channel > title, item > title")?.textContent?.trim(),i=r.querySelector("channel > description, item > description")?.textContent?.trim();return{title:o,description:i,type:"rdf"}}else throw new Error("Unknown feed format")}catch(s){throw new Error(`Failed to extract feed metadata: ${s.message}`)}}async fetchWebsiteContent(t){try{const s=new AbortController,r=setTimeout(()=>s.abort(),this.REQUEST_TIMEOUT);try{const o=await fetch(t,{method:"GET",signal:s.signal,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Personal News Dashboard Feed Discovery/1.0"}});if(clearTimeout(r),o.ok)return await o.text()}catch{}return(await Ge.tryProxiesWithFailover(t)).content}catch(s){throw new Error(`Failed to fetch website content: ${s.message}`)}}async fetchFeedContent(t){try{const s=new AbortController,r=setTimeout(()=>s.abort(),this.REQUEST_TIMEOUT);try{const o=await fetch(t,{method:"GET",signal:s.signal,headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml","User-Agent":"Personal News Dashboard Feed Discovery/1.0"}});if(clearTimeout(r),o.ok)return await o.text()}catch{}return(await Ge.tryProxiesWithFailover(t)).content}catch(s){throw new Error(`Failed to fetch feed content: ${s.message}`)}}async scanContentForFeeds(t){const s=[];try{const r=await this.fetchWebsiteContent(t),a=[/href=["']([^"']*(?:rss|feed|atom)[^"']*)["']/gi,/url\s*=\s*["']([^"']*(?:rss|feed|atom)[^"']*)["']/gi,/(https?:\/\/[^\s<>"']*(?:rss|feed|atom)[^\s<>"']*)/gi];for(const o of a){let i;for(;(i=o.exec(r))!==null;){const n=i[1];if(n&&this.isValidFeedUrl(n)){const u=new URL(n,t).toString();try{const m=await this.fetchFeedContent(u),c=await this.extractFeedMetadata(m),w={url:u,title:c.title,description:c.description,type:c.type,discoveryMethod:"content-scan",confidence:.6,lastValidated:Date.now()};s.push(w)}catch{continue}}}}}catch(r){console.error("Content scanning failed:",r)}return s}extractFeedUrl(t,s){const r=t.getAttribute("href")||t.getAttribute("content")||t.getAttribute("value");if(!r)return null;try{return new URL(r,s).toString()}catch{return null}}determineFeedType(t,s){const r=t.getAttribute("type")?.toLowerCase()||"";if(r.includes("atom"))return"atom";if(r.includes("rdf"))return"rdf";if(r.includes("rss"))return"rss";const a=s.toLowerCase();return a.includes("atom")?"atom":a.includes("rdf")?"rdf":"rss"}calculateConfidence(t,s){let r=.5;switch(t){case"link-tag":r=.9;break;case"meta-tag":r=.7;break;case"common-path":r=.8;break;case"content-scan":r=.6;break}const a=s.getAttribute("type")?.toLowerCase()||"";(a.includes("rss")||a.includes("atom")||a.includes("rdf"))&&(r+=.1),(s.getAttribute("rel")?.toLowerCase()||"").includes("alternate")&&(r+=.05);const i=s.getAttribute("title")||"";return(i.toLowerCase().includes("rss")||i.toLowerCase().includes("feed"))&&(r+=.05),Math.min(r,1)}calculatePathConfidence(t){return["/rss.xml","/feed.xml","/atom.xml","/rss","/feed"].includes(t)?.9:["/feeds/all.atom.xml","/blog/rss.xml","/news/rss.xml"].includes(t)?.8:.7}isValidFeedUrl(t){const s=t.toLowerCase();return["rss","feed","atom","xml"].some(a=>s.includes(a)&&(s.startsWith("http")||s.startsWith("/")))}normalizeUrl(t){let s=t.trim();return!s.startsWith("http://")&&!s.startsWith("https://")&&(s="https://"+s),s.endsWith("/")&&(s=s.slice(0,-1)),s}deduplicateAndSortFeeds(t){const s=new Map;for(const r of t){const a=s.get(r.url);(!a||r.confidence>a.confidence)&&s.set(r.url,r)}return Array.from(s.values()).sort((r,a)=>a.confidence-r.confidence)}generateDiscoverySuggestions(t){const s=[];return t.discoveredFeeds.length===0?(s.push("No RSS feeds found on this website"),s.push("Try checking if the website provides RSS feeds in their footer or sidebar"),s.push("Look for 'RSS', 'Feed', or 'Subscribe' links on the website")):t.discoveredFeeds.length===1?s.push("Found one RSS feed on this website"):(s.push(`Found ${t.discoveredFeeds.length} RSS feeds on this website`),s.push("Choose the feed that best matches your interests")),t.discoveryMethods.includes("html-parsing")&&t.discoveredFeeds.length>0&&s.push("Feeds discovered from website HTML meta tags and links"),t.discoveryMethods.includes("common-paths")&&t.discoveredFeeds.length>0&&s.push("Feeds found at common RSS feed locations"),s}cleanupMalformedXML(t){let s=t;s.charCodeAt(0)===65279&&(s=s.slice(1));const r=s.match(/<\?xml[^>]*\?>/g);if(r&&r.length>1&&(s=r[0]+s.replace(/<\?xml[^>]*\?>/g,"")),s=s.replace(/<!\[CDATA\[([^]*?)(?:\]\]>|$)/g,"<![CDATA[$1]]>"),s=s.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/\u2014/g,"-").replace(/\u2026/g,"...").replace(/\u00A0/g," "),s=s.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""),s.includes("<rss")&&!s.includes("<channel>")){const o=s.match(/(<rss[^>]*>)(.*?)(<\/rss>)/s);if(o){const[,i,n,u]=o;s=`${i}<channel>${n}</channel>${u}`}}return s=s.replace(/<rss(?!\s+version)([^>]*)>/g,'<rss version="2.0"$1>'),s=s.replace(/(<description[^>]*>)([^<]*?)(\s*<(?!\/description))/g,"$1$2</description>$3"),["title","link","pubDate","author"].forEach(o=>{const i=new RegExp(`(<${o}[^>]*>)([^<]*?)(\\s*<(?!\\/${o})(?!${o}))`,"g");s=s.replace(i,`$1$2</${o}>$3`)}),s=s.replace(/>\s+</g,"><").trim(),s}async executeConcurrently(t,s){const r=[];for(let a=0;a<t.length;a+=s){const o=t.slice(a,a+s),i=await Promise.allSettled(o);for(const n of i)n.status==="fulfilled"&&r.push(n.value)}return r}async tryDiscoverYouTubeFeed(t){try{let s=null,r="content-scan";const a=t.match(/\/channel\/(UC[\w-]+)/);a&&(s=`https://www.youtube.com/feeds/videos.xml?channel_id=${a[1]}`);const o=t.match(/\/user\/([\w-]+)/);o&&(s=`https://www.youtube.com/feeds/videos.xml?user=${o[1]}`);const i=t.match(/[?&]list=(PL[\w-]+)/);if(i&&(s=`https://www.youtube.com/feeds/videos.xml?playlist_id=${i[1]}`),!s&&(t.includes("/watch")||t.includes("youtu.be")))try{const n=await this.fetchWebsiteContent(t),u=n.match(/itemprop=["']channelId["']\s+content=["'](UC[\w-]+)["']/i)||n.match(/content=["'](UC[\w-]+)["']\s+itemprop=["']channelId["']/i);if(u&&u[1]&&(s=`https://www.youtube.com/feeds/videos.xml?channel_id=${u[1]}`),!s){const m=n.match(/"channelId"\s*:\s*"(UC[\w-]+)"/);m&&m[1]&&(s=`https://www.youtube.com/feeds/videos.xml?channel_id=${m[1]}`)}}catch(n){console.warn("Failed to fetch YouTube video page for discovery:",n)}if(!s&&(t.includes("/@")||t.includes("/c/")||t.includes("youtube.com")&&!t.includes("/watch")))try{const n=await this.fetchWebsiteContent(t),u=n.match(/<link[^>]+type=["']application\/rss\+xml["'][^>]+href=["']([^"']+)["']/i)||n.match(/<link[^>]+href=["']([^"']+)["'][^>]+type=["']application\/rss\+xml["']/i);if(u&&u[1]&&(s=u[1],r="link-tag"),!s){const m=n.match(/itemprop=["']channelId["']\s+content=["'](UC[\w-]+)["']/i)||n.match(/content=["'](UC[\w-]+)["']\s+itemprop=["']channelId["']/i);m&&m[1]&&(s=`https://www.youtube.com/feeds/videos.xml?channel_id=${m[1]}`)}if(!s)try{const m=n.match(/var ytInitialData\s*=\s*({.+?});/);if(m&&m[1]){const c=JSON.parse(m[1]),w=c?.metadata?.channelMetadataRenderer?.externalId||c?.header?.c4TabbedHeaderRenderer?.channelId||c?.contents?.twoColumnBrowseResultsRenderer?.tabs?.[0]?.tabRenderer?.endpoint?.browseEndpoint?.browseId;w&&w.startsWith("UC")&&(s=`https://www.youtube.com/feeds/videos.xml?channel_id=${w}`)}}catch(m){console.warn("Failed to parse ytInitialData",m)}}catch(n){console.warn("Failed to fetch YouTube channel page for discovery:",n)}if(s){const n=await this.fetchFeedContent(s),u=await this.extractFeedMetadata(n);return{url:s,title:u.title||"YouTube Feed",description:u.description,type:"atom",discoveryMethod:r,confidence:1,lastValidated:Date.now()}}}catch(s){console.warn("YouTube discovery failed:",s)}return null}}const Lt=new Ft;class Mt{constructor(){this.INITIAL_TIMEOUT_MS=5e3,this.MAX_RETRIES=3,this.BASE_RETRY_DELAY=1e3}async validateFeedWithDiscovery(t,s){const r=Date.now(),a=this.getCachedResult(t);if(a&&!a.requiresUserSelection)return a;const o={url:t,isValid:!1,status:"checking",lastChecked:Date.now(),responseTime:0,validationAttempts:[],suggestions:[],totalRetries:0,totalValidationTime:0};s?.("Starting validation...",10);const i=await this.validateFeed(t);if(o.validationAttempts=i.validationAttempts,o.totalRetries=i.totalRetries,i.isValid){o.isValid=!0,o.status="valid",o.title=i.title,o.description=i.description,o.finalMethod="direct",o.suggestions=i.suggestions,o.responseTime=i.responseTime,o.statusCode=i.statusCode,s?.("Validation successful",100),o.totalValidationTime=Date.now()-r,o.lastChecked=Date.now();const u=`validation:${t}`;return Y.set(u,o),o}s?.("Direct validation failed, attempting discovery...",30),o.status="discovery_in_progress";try{const u=await Lt.discoverFromWebsite(t);if(o.discoveryResult=u,o.discoveredFeeds=u.discoveredFeeds,s?.("Discovery completed",70),u.discoveredFeeds.length===0)o.status="invalid",o.error="Feed discovery failed: No RSS feeds found on this website",o.suggestions=["Direct validation failed and feed discovery also failed","No RSS feeds were found on this website","Try checking if the website provides RSS feeds","Look for 'RSS', 'Feed', or 'Subscribe' links on the website",...u.suggestions],o.finalMethod="discovery",o.finalError=i.finalError||{type:"not_found",message:"Feed discovery failed: No RSS feeds found on this website",suggestions:["Direct validation failed and feed discovery also failed","No RSS feeds were found on this website","Try checking if the website provides RSS feeds","Look for 'RSS', 'Feed', or 'Subscribe' links on the website"],retryable:!1,context:{url:t,method:"discovery"}};else if(u.discoveredFeeds.length===1){const m=u.discoveredFeeds[0];s?.("Validating discovered feed...",90);const c=await this.validateFeed(m.url);c.isValid?(o.isValid=!0,o.status="valid",o.title=c.title||m.title,o.description=c.description||m.description,o.finalMethod="discovery",o.suggestions=[`Feed discovered and validated from ${t}`,`Using discovered feed: ${m.url}`,`Discovery method: ${m.discoveryMethod}`,...u.suggestions],o.url=m.url,o.finalMethod="discovery"):(o.status="invalid",o.error=`Discovered feed is invalid: ${c.error}`,o.suggestions=["A feed was discovered but it's not valid",`Discovered feed URL: ${m.url}`,...c.suggestions,...u.suggestions],o.finalMethod="discovery")}else o.status="discovery_required",o.requiresUserSelection=!0,o.error=`Found ${u.discoveredFeeds.length} RSS feeds - user selection required`,o.suggestions=[`Found ${u.discoveredFeeds.length} RSS feeds on this website`,"Please select which feed you want to add",...u.suggestions],o.finalMethod="discovery",o.finalError=i.finalError;s?.("Discovery process completed",100)}catch(u){o.status="invalid",o.error=`Feed discovery failed: ${u.message}`,o.suggestions=["Direct validation failed and feed discovery also failed","The URL might not be a valid website or RSS feed","Please check the URL and try again",...i.suggestions],o.finalMethod="discovery",o.finalError=i.finalError||{type:"unknown_error",message:`Feed discovery failed: ${u.message}`,originalError:u,suggestions:["Direct validation failed and feed discovery also failed","The URL might not be a valid website or RSS feed","Please check the URL and try again"],retryable:!1,context:{url:t,method:"discovery"}},s?.("Discovery failed",100)}o.totalValidationTime=Date.now()-r,o.lastChecked=Date.now();const n=`validation:${t}`;return Y.set(n,o),o}async validateFeed(t){const s=Date.now(),r=this.getCachedResult(t);if(r)return r.responseTime===0&&(r.responseTime=1),r;const a={url:t,isValid:!1,status:"checking",lastChecked:Date.now(),responseTime:0,validationAttempts:[],suggestions:[],totalRetries:0,totalValidationTime:0};let o;for(let n=1;n<=this.MAX_RETRIES;n++){const u=Date.now();try{const m=await this.attemptValidation(t,n),c={attemptNumber:n,timestamp:u,method:n===1?"direct":"retry",success:m.success,responseTime:Date.now()-u,statusCode:m.statusCode};if(m.success&&m.feedData){a.isValid=!0,a.status="valid",a.title=m.feedData.title,a.description=m.feedData.description,a.statusCode=m.statusCode,a.responseTime=Date.now()-u,a.suggestions=["Feed validated successfully"],c.success=!0,c.responseTime=a.responseTime,a.validationAttempts.push(c);break}else if(o=m.error,c.error=o,a.validationAttempts.push(c),n<this.MAX_RETRIES&&o.retryable){const w=this.calculateRetryDelay(n);c.retryDelay=w,a.totalRetries++,await this.delay(w)}else if(!o.retryable)break}catch(m){const c=this.classifyError(m,t,n);o=c;const w={attemptNumber:n,timestamp:u,method:n===1?"direct":"retry",success:!1,error:c,responseTime:Date.now()-u};if(a.validationAttempts.push(w),n<this.MAX_RETRIES&&c.retryable){const F=this.calculateRetryDelay(n);w.retryDelay=F,a.totalRetries++,await this.delay(F)}else if(!c.retryable)break}}if(!a.isValid&&o&&(o.type==="cors_error"||o.type==="network_error"||o.type==="timeout_error"))try{const n=await this.attemptProxyValidation(t),u={attemptNumber:a.validationAttempts.length+1,timestamp:Date.now(),method:"proxy",success:n.success,responseTime:n.responseTime,proxyUsed:n.proxyUsed};n.success&&n.feedData?(a.isValid=!0,a.status="valid",a.title=n.feedData.title,a.description=n.feedData.description,a.responseTime=n.responseTime,u.success=!0,a.validationAttempts.push(u),a.suggestions=["Feed validated successfully using proxy service",`Used ${n.proxyUsed} proxy to bypass CORS restrictions`]):(u.error=n.error,a.validationAttempts.push(u),n.error&&(o=n.error))}catch(n){const u=this.classifyError(n,t,a.validationAttempts.length+1),m={attemptNumber:a.validationAttempts.length+1,timestamp:Date.now(),method:"proxy",success:!1,error:u,responseTime:0};a.validationAttempts.push(m)}a.isValid||(o?(a.finalError=o,a.status=this.mapErrorTypeToStatus(o.type),a.error=o.message,a.suggestions=o.suggestions):(a.status="invalid",a.error="Validation failed for unknown reason",a.suggestions=["Please try again or check the feed URL"])),a.totalValidationTime=Date.now()-s,a.lastChecked=Date.now(),a.responseTime===0&&(a.responseTime=a.totalValidationTime);const i=`validation:${t}`;return Y.set(i,a),a}async attemptProxyValidation(t){const s=Date.now();try{const r=await Ge.tryProxiesWithFailover(t),a=Date.now()-s,o=this.validateFeedContent(r.content);return o.isValid?{success:!0,feedData:{title:o.title||"",description:o.description||""},responseTime:a,proxyUsed:r.proxyUsed}:{success:!1,responseTime:a,proxyUsed:r.proxyUsed,error:{type:"parse_error",message:o.error||"Invalid feed format received from proxy",suggestions:["The proxy returned content, but it's not a valid RSS/Atom feed","Check if the URL points to a valid RSS or Atom feed","The feed content might be corrupted during proxy transmission"],retryable:!1,context:{url:t,method:"proxy"}}}}catch(r){return{success:!1,responseTime:Date.now()-s,error:{type:"network_error",message:`Proxy validation failed: ${r.message}`,originalError:r,suggestions:["All proxy services failed to access the feed","The feed server might be blocking proxy requests","Try again later or check if the feed URL is correct"],retryable:!0,context:{url:t,method:"proxy"}}}}}async attemptValidation(t,s){const r=this.INITIAL_TIMEOUT_MS+(s-1)*1e3;try{const a=new AbortController,o=setTimeout(()=>a.abort(),r),i=await fetch(t,{method:"GET",signal:a.signal,headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml","User-Agent":"Personal News Dashboard Feed Validator/2.0"}});if(clearTimeout(o),i.status===200){const n=await i.text(),u=this.validateFeedContent(n);return u.isValid?{success:!0,feedData:{title:u.title||"",description:u.description||""},statusCode:i.status}:{success:!1,statusCode:i.status,error:{type:"parse_error",message:u.error||"Invalid feed format",suggestions:["Check if the URL points to a valid RSS or Atom feed","Verify the feed content is properly formatted XML"],retryable:!1,context:{url:t,attempt:s,statusCode:i.status}}}}else{const n=this.getErrorTypeFromStatus(i.status);return{success:!1,statusCode:i.status,error:{type:n,message:`HTTP ${i.status}: ${i.statusText}`,suggestions:this.getSuggestionsForStatusCode(i.status),retryable:this.isRetryableStatusCode(i.status),context:{url:t,attempt:s,statusCode:i.status}}}}}catch(a){return a.name==="AbortError"?{success:!1,error:{type:"timeout_error",message:`Request timed out after ${r}ms`,suggestions:["The server might be slow or overloaded","Try again later when the server might be more responsive","Check if the URL is correct and accessible"],retryable:!0,context:{url:t,attempt:s}}}:{success:!1,error:this.classifyError(a,t,s)}}}calculateRetryDelay(t){const s=this.BASE_RETRY_DELAY*Math.pow(2,t-1),r=Math.random()*500;return Math.min(s+r,1e4)}delay(t){return new Promise(s=>setTimeout(s,t))}classifyError(t,s,r){const a=t.message.toLowerCase();return a.includes("cors")||a.includes("cross-origin")||a.includes("cross origin")?{type:"cors_error",message:"CORS policy prevents direct access to this feed",originalError:t,suggestions:["The feed server doesn't allow direct browser access","This is a common issue with RSS feeds","The system will try alternative methods to access the feed"],retryable:!1,context:{url:s,attempt:r}}:a.includes("network")||a.includes("fetch")?{type:"network_error",message:"Network error occurred while fetching the feed",originalError:t,suggestions:["Check your internet connection","The server might be temporarily unavailable","Try again in a few moments"],retryable:!0,context:{url:s,attempt:r}}:a.includes("timeout")||a.includes("aborted")?{type:"timeout_error",message:"Request timed out",originalError:t,suggestions:["The server is taking too long to respond","Try again later when the server might be more responsive"],retryable:!0,context:{url:s,attempt:r}}:{type:"unknown_error",message:t.message||"An unknown error occurred",originalError:t,suggestions:["An unexpected error occurred","Please try again or check the feed URL"],retryable:!0,context:{url:s,attempt:r}}}mapErrorTypeToStatus(t){switch(t){case"network_error":return"network_error";case"cors_error":return"cors_error";case"timeout_error":return"timeout";case"parse_error":return"parse_error";case"not_found":return"not_found";case"server_error":return"server_error";case"invalid_format":return"parse_error";default:return"invalid"}}getErrorTypeFromStatus(t){return t===404?"not_found":t>=500?"server_error":t===403||t===401?"cors_error":"network_error"}getSuggestionsForStatusCode(t){switch(t){case 404:return["The feed URL was not found on the server","Check if the URL is correct","The feed might have been moved or removed"];case 403:return["Access to this feed is forbidden","The server might require authentication","Try accessing the website directly to check if it's available"];case 401:return["Authentication is required to access this feed","The feed might be private or require login"];case 500:case 502:case 503:case 504:return["The server is experiencing issues","Try again later when the server might be working properly","This is a temporary server problem"];default:return["An HTTP error occurred","Check if the URL is correct and accessible"]}}isRetryableStatusCode(t){return t>=500||t===408||t===429}async validateDiscoveredFeed(t,s){const r=await this.validateFeed(t.url),a={...r,finalMethod:"discovery",discoveredFeeds:[t],suggestions:[`Feed selected from discovery results for ${s}`,`Discovery method: ${t.discoveryMethod}`,`Confidence: ${Math.round(t.confidence*100)}%`,...r.suggestions]},o=`validation:${s}`;return Y.set(o,a),a}async validateFeeds(t){const s=t.map(r=>this.validateFeed(r));return Promise.all(s)}getValidationHistory(t){return this.getCachedResult(t)?.validationAttempts||[]}getValidationStats(t){const s=this.getCachedResult(t);if(!s)return null;const r=s.validationAttempts,a=r.filter(i=>i.success).length,o=r.length>0?r.reduce((i,n)=>i+(n.responseTime||0),0)/r.length:0;return{totalAttempts:r.length,successfulAttempts:a,failedAttempts:r.length-a,averageResponseTime:Math.round(o),totalRetries:s.totalRetries,lastValidation:s.lastChecked}}validateFeedContent(t){try{let s=this.attemptFeedParsing(t);if(s.isValid)return s;const r=this.cleanupFeedContent(t);return r!==t&&(s=this.attemptFeedParsing(r),s.isValid)?{...s,cleanupApplied:!0}:s}catch(s){return{isValid:!1,error:`Error processing content: ${s.message}`}}}attemptFeedParsing(t){try{const r=new DOMParser().parseFromString(t,"text/xml");if(r.querySelector("parsererror"))return{isValid:!1,error:"Invalid XML content"};const o=this.detectFeedType(r);if(!o)return{isValid:!1,error:"Not a valid RSS, Atom, or RDF feed"};const i=this.extractFeedMetadata(r,o);return{isValid:!0,title:i.title,description:i.description,feedType:o}}catch(s){return{isValid:!1,error:`Error parsing feed: ${s.message}`}}}detectFeedType(t){const s=t.documentElement;if(!s)return null;const r=s.tagName.toLowerCase(),a=s.namespaceURI;return r==="rss"?"rss":r==="feed"&&(a==="http://www.w3.org/2005/Atom"||s.getAttribute("xmlns")==="http://www.w3.org/2005/Atom"||s.getAttribute("xmlns")?.includes("atom"))?"atom":r==="rdf:rdf"||r==="rdf"||a==="http://www.w3.org/1999/02/22-rdf-syntax-ns#"||s.getAttribute("xmlns:rdf")==="http://www.w3.org/1999/02/22-rdf-syntax-ns#"?"rdf":t.querySelector("channel")?"rss":t.querySelector("channel[*|about]")||t.querySelector("[*|about]")||s.getAttribute("xmlns")?.includes("rss")?"rdf":null}extractFeedMetadata(t,s){let r="",a="";try{switch(s){case"rss":r=this.getTextContent(t,["channel > title","rss > channel > title","title"]),a=this.getTextContent(t,["channel > description","rss > channel > description","description"]);break;case"atom":r=this.getTextContent(t,["feed > title","*|feed > *|title","title"]),a=this.getTextContent(t,["feed > subtitle","*|feed > *|subtitle","subtitle","feed > summary","*|feed > *|summary","summary"]);break;case"rdf":r=this.getTextContent(t,["channel > title","*|channel > *|title","[*|about] > title","[*|about] > *|title","title"]),a=this.getTextContent(t,["channel > description","*|channel > *|description","[*|about] > description","[*|about] > *|description","description"]);break}}catch{r=t.querySelector("title")?.textContent||"",a=t.querySelector("description, subtitle, summary")?.textContent||""}return{title:this.cleanText(r),description:this.cleanText(a)}}getTextContent(t,s){for(const r of s)try{const a=t.querySelector(r);if(a?.textContent?.trim())return a.textContent.trim()}catch{continue}return""}cleanText(t){return t?t.trim().replace(/\s+/g," ").replace(/[\r\n\t]/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").substring(0,500):""}cleanupFeedContent(t){let s=t;try{s.charCodeAt(0)===65279&&(s=s.slice(1)),s=this.fixXMLDeclaration(s),s=this.fixNamespaceIssues(s),s=this.fixEncodingIssues(s),s=this.fixCDATASections(s),s=this.fixUnClosedTags(s),s=this.removeInvalidXMLCharacters(s),s=this.fixRSSStructureIssues(s)}catch{return t}return s}fixXMLDeclaration(t){const s=/<\?xml[^>]*\?>/gi,r=t.match(s);return r&&r.length>1&&(t=t.replace(s,""),t=r[0]+`
`+t),t.includes("<?xml")&&!t.includes("encoding=")&&(t=t.replace(/<\?xml([^>]*)\?>/i,'<?xml$1 encoding="UTF-8"?>')),t}fixNamespaceIssues(t){return t.includes("<rdf:RDF")&&!t.includes("xmlns:rss=")&&(t=t.replace("<rdf:RDF",'<rdf:RDF xmlns:rss="http://purl.org/rss/1.0/"')),t.includes("<rdf:")&&!t.includes("xmlns:rdf=")&&(t=t.replace(/<(rdf:RDF|RDF)/,'<$1 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"')),t.includes("<feed")&&!t.includes("xmlns=")&&(t.includes("<entry")||t.includes("<title"))&&(t=t.replace("<feed",'<feed xmlns="http://www.w3.org/2005/Atom"')),t}fixEncodingIssues(t){const s=[[/[\u2018\u2019]/g,"'"],[/[\u201C\u201D]/g,'"'],[/[\u2013\u2014]/g,"-"],[/\u2026/g,"..."],[/\u00A0/g," "]];for(const[r,a]of s)t=t.replace(r,a);return t}fixCDATASections(t){return t=t.replace(/<!\[CDATA\[([^]*?)(?:\]\]>|$)/g,(s,r)=>s.endsWith("]]>")?s:`<![CDATA[${r}]]>`),t=t.replace(/<!\[CDATA\[([^]*?)<!\[CDATA\[([^]*?)\]\]>([^]*?)\]\]>/g,"<![CDATA[$1$2$3]]>"),t}fixUnClosedTags(t){const s=["br","hr","img","input","meta","link"];for(const r of s){const a=new RegExp(`<${r}([^>]*[^/])>`,"gi");t=t.replace(a,`<${r}$1/>`)}return t}removeInvalidXMLCharacters(t){return t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")}fixRSSStructureIssues(t){return t.includes("<rss")&&!t.includes("<channel")&&(t=t.replace(/(<rss[^>]*>)([\s\S]*?)(<\/rss>)/,"$1<channel>$2</channel>$3")),t.includes("<rss")&&!t.includes("version=")&&(t=t.replace("<rss",'<rss version="2.0"')),t}getCachedResult(t){const s=`validation:${t}`;return Y.get(s)?.data||null}clearCache(){Y.invalidatePattern("validation:*")}getCacheStats(){return Y.getStats()}refreshCachedResult(t){const s=`validation:${t}`;return Y.refresh(s)}getValidationSummary(t){const s=t.map(r=>this.getCachedResult(r)).filter(Boolean);return{total:t.length,valid:s.filter(r=>r.status==="valid").length,invalid:s.filter(r=>r.status!=="valid"&&r.status!=="checking").length,checking:s.filter(r=>r.status==="checking").length,lastValidation:Math.max(...s.map(r=>r.lastChecked),0)}}getFeedStatus(t){return this.getCachedResult(t)}revalidateFeed(t){const s=`validation:${t}`;Y.invalidate(s)}}const le=new Mt,Dt=p=>{switch(p){case"valid":return"Funcionando";case"invalid":return"Erro HTTP";case"timeout":return"Timeout";case"network_error":return"Erro de Rede";case"cors_error":return"Erro CORS";case"not_found":return"Não Encontrado";case"server_error":return"Erro do Servidor";case"parse_error":return"Feed Inválido";case"checking":return"Verificando...";case"discovery_required":return"Descoberta Necessária";case"discovery_in_progress":return"Descobrindo Feeds...";default:return"Não verificado"}};class Rt{constructor(){this.fingerprintCache=new Map,this.CACHE_TTL=1800*1e3}normalizeUrl(t){try{const s=new URL(t);s.hostname.startsWith("www.")&&(s.hostname=s.hostname.substring(4)),["utm_source","utm_medium","utm_campaign","utm_term","utm_content","fbclid","gclid","ref","source","campaign"].forEach(o=>{s.searchParams.delete(o)}),s.searchParams.sort();let a=s.href.toLowerCase();return a.endsWith("/")&&a!=="https://"&&a!=="http://"&&(a=a.slice(0,-1)),a}catch{return t.toLowerCase().trim().replace(/\/$/,"")}}async generateContentFingerprint(t){try{const s=this.fingerprintCache.get(t);if(s&&Date.now()-s.lastUpdated<this.CACHE_TTL)return s;const r=await le.validateFeed(t);if(!r.isValid||!r.title)return null;const a=this.normalizeUrl(t),o={title:r.title?.toLowerCase().trim(),description:r.description?.toLowerCase().trim()||"",link:a},i=await this.hashContent(JSON.stringify(o)),n={url:t,normalizedUrl:a,title:r.title,description:r.description,link:a,contentHash:i,lastUpdated:Date.now()};return this.fingerprintCache.set(t,n),n}catch(s){return console.error("Failed to generate content fingerprint:",s),null}}async hashContent(t){if(typeof crypto<"u"&&crypto.subtle)try{const a=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(o)).map(n=>n.toString(16).padStart(2,"0")).join("")}catch{}let s=0;for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);s=(s<<5)-s+a,s=s&s}return Math.abs(s).toString(16)}async detectDuplicate(t,s){const r=this.normalizeUrl(t);for(const o of s)if(this.normalizeUrl(o.url)===r)return{isDuplicate:!0,duplicateOf:o,confidence:1,reason:"Identical normalized URLs",normalizedUrl:r};const a=await this.generateContentFingerprint(t);if(!a)return{isDuplicate:!1,confidence:0,reason:"Unable to generate content fingerprint"};for(const o of s){const i=await this.generateContentFingerprint(o.url);if(i){if(a.contentHash===i.contentHash)return{isDuplicate:!0,duplicateOf:o,confidence:.95,reason:"Identical content fingerprint",contentFingerprint:a.contentHash};if(a.title&&i.title){const n=this.calculateStringSimilarity(a.title.toLowerCase(),i.title.toLowerCase());if(n>.9)return{isDuplicate:!0,duplicateOf:o,confidence:n,reason:`Very similar titles (${Math.round(n*100)}% match)`}}}}return{isDuplicate:!1,confidence:0,reason:"No duplicates detected"}}async findDuplicateGroups(t){const s=[],r=new Set;for(const a of t){if(r.has(a.url))continue;const o=[a],i=await this.generateContentFingerprint(a.url);if(!i){r.add(a.url);continue}for(const n of t){if(n.url===a.url||r.has(n.url))continue;const u=await this.detectDuplicate(n.url,[a]);u.isDuplicate&&u.confidence>.8&&(o.push(n),r.add(n.url))}r.add(a.url),o.length>1&&s.push({feeds:o,fingerprint:i,confidence:Math.max(...o.map(()=>.9))})}return s}async removeDuplicates(t,s={action:"keep_first"}){const r=await this.findDuplicateGroups(t),a=[],o=[],i=new Set;for(const n of t){if(i.has(n.url))continue;const u=r.find(m=>m.feeds.some(c=>c.url===n.url));if(u){let m;switch(s.action){case"keep_first":m=u.feeds[0];break;case"keep_last":m=u.feeds[u.feeds.length-1];break;case"user_select":m=s.preferredFeed||u.feeds[0];break;case"merge":m=this.mergeFeeds(u.feeds,s);break;default:m=u.feeds[0]}a.push(m);for(const c of u.feeds)i.add(c.url),c.url!==m.url&&o.push({originalFeed:c,duplicateOf:m,reason:`Duplicate detected with ${Math.round(u.confidence*100)}% confidence`})}else a.push(n),i.add(n.url)}return{uniqueFeeds:a,removedDuplicates:o}}mergeFeeds(t,s){const r=t[0];let a=r.customTitle;if(s.mergeCustomTitles){const i=t.map(n=>n.customTitle).filter(Boolean).filter((n,u,m)=>m.indexOf(n)===u);i.length>1?a=i.join(" / "):i.length===1&&(a=i[0])}let o=r.categoryId;if(s.mergeCategories){const i=t.map(n=>n.categoryId).filter(Boolean).filter((n,u,m)=>m.indexOf(n)===u);i.length>0&&(o=i[0])}return{url:r.url,customTitle:a,categoryId:o}}calculateStringSimilarity(t,s){if(t===s)return 1;if(t.length===0||s.length===0)return 0;const r=[];for(let i=0;i<=s.length;i++)r[i]=[i];for(let i=0;i<=t.length;i++)r[0][i]=i;for(let i=1;i<=s.length;i++)for(let n=1;n<=t.length;n++)s.charAt(i-1)===t.charAt(n-1)?r[i][n]=r[i-1][n-1]:r[i][n]=Math.min(r[i-1][n-1]+1,r[i][n-1]+1,r[i-1][n]+1);const a=Math.max(t.length,s.length),o=r[s.length][t.length];return(a-o)/a}clearCache(){this.fingerprintCache.clear()}getCacheStats(){const t=Array.from(this.fingerprintCache.values());return{size:t.length,oldestEntry:t.length>0?Math.min(...t.map(s=>s.lastUpdated)):0,newestEntry:t.length>0?Math.max(...t.map(s=>s.lastUpdated)):0}}}const $e=new Rt,Je=class Je{static async generateOPML(t,s=[],r={}){const a={...this.DEFAULT_OPTIONS,...r},o=new Date,n=(await $e.removeDuplicates(t,{action:"keep_first"})).uniqueFeeds,u=this.createOPMLDocument(a,o),m=this.createOPMLBody(n,s,a);return this.formatXML(u,m)}static createOPMLDocument(t,s){const r=s.toUTCString();return`<?xml version="1.0" encoding="UTF-8"?>
<opml version="2.0">
  <head>
    <title>${this.escapeXML(t.title)}</title>
    <dateCreated>${r}</dateCreated>
    <dateModified>${r}</dateModified>
    <ownerName>${this.escapeXML(t.ownerName)}</ownerName>
    ${t.ownerEmail?`<ownerEmail>${this.escapeXML(t.ownerEmail)}</ownerEmail>`:""}
    <docs>http://dev.opml.org/spec2.html</docs>
    <expansionState></expansionState>
    <vertScrollState>1</vertScrollState>
    <windowTop>146</windowTop>
    <windowLeft>107</windowLeft>
    <windowBottom>468</windowBottom>
    <windowRight>560</windowRight>
  </head>`}static createOPMLBody(t,s,r){let a=`  <body>
`;if(r.includeCategories&&s.length>0){const o=this.groupFeedsByCategory(t,s);for(const n of s.sort((u,m)=>u.order-m.order)){const u=o.get(n.id)||[];u.length>0&&(a+=this.createCategoryOutline(n,u,r))}const i=t.filter(n=>!n.categoryId);i.length>0&&(a+=this.createUncategorizedOutline(i,r))}else for(const o of t)a+=this.createFeedOutline(o,r);return a+=`  </body>
`,a}static groupFeedsByCategory(t,s){const r=new Map;return s.forEach(a=>{r.set(a.id,[])}),t.forEach(a=>{if(a.categoryId){const o=r.get(a.categoryId)||[];o.push(a),r.set(a.categoryId,o)}}),r}static createCategoryOutline(t,s,r){let a=`    <outline text="${this.escapeXML(t.name)}"`;t.description&&(a+=` description="${this.escapeXML(t.description)}"`),a+=`>
`;for(const o of s)a+=this.createFeedOutline(o,r,6);return a+=`    </outline>
`,a}static createUncategorizedOutline(t,s){let r=`    <outline text="Uncategorized">
`;for(const a of t)r+=this.createFeedOutline(a,s,6);return r+=`    </outline>
`,r}static createFeedOutline(t,s,r=4){const a=" ".repeat(r),o=t.customTitle||this.extractDomainFromUrl(t.url);let i=`${a}<outline`;i+=' type="rss"',i+=` text="${this.escapeXML(o)}"`,i+=` title="${this.escapeXML(o)}"`,i+=` xmlUrl="${this.escapeXML(t.url)}"`;const n=this.deriveHtmlUrl(t.url);return n&&(i+=` htmlUrl="${this.escapeXML(n)}"`),t.categoryId&&s.includeFeedMetadata&&(i+=` category="${this.escapeXML(t.categoryId)}"`),i+=` />
`,i}static extractDomainFromUrl(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch{const r=t.match(/^https?:\/\/(?:www\.)?([^\/]+)/);return r?r[1]:t}}static deriveHtmlUrl(t){try{const s=new URL(t);if(s.search&&new URLSearchParams(s.search).has("feed"))return`${s.protocol}//${s.host}${s.pathname==="/"?"":s.pathname}`;const r=[{pattern:/\/rss\.xml$/,replacement:""},{pattern:/\/feed\.xml$/,replacement:""},{pattern:/\/atom\.xml$/,replacement:""},{pattern:/\/rss\/?$/,replacement:""},{pattern:/\/feed\/?$/,replacement:""},{pattern:/\/feeds\/.*$/,replacement:""},{pattern:/\/blog\/rss\.xml$/,replacement:"/blog"},{pattern:/\/blog\/feed\.xml$/,replacement:"/blog"},{pattern:/\/news\/rss\.xml$/,replacement:"/news"},{pattern:/\/news\/feeds\/.*$/,replacement:"/news"}];let a=s.pathname,o=!1;for(const{pattern:n,replacement:u}of r)if(n.test(a)){a=a.replace(n,u),o=!0;break}o||(a="");const i=a===""||a==="/"?"":a;return`${s.protocol}//${s.host}${i}`}catch{return null}}static formatXML(t,s){return`${t}
${s}</opml>`}static escapeXML(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static validateOPML(t){const s={isValid:!0,errors:[],warnings:[]};try{t.trim().startsWith("<?xml")||s.errors.push("OPML must start with XML declaration"),t.includes("<opml")||s.errors.push("Missing OPML root element"),t.includes("<head>")||s.errors.push("Missing OPML head section"),t.includes("<body>")||s.errors.push("Missing OPML body section"),t.includes("<title>")||s.warnings.push("Missing title in head section"),t.includes("<dateCreated>")||s.warnings.push("Missing dateCreated in head section");const r=t.match(/<outline[^>]*>/g);if((!r||r.length===0)&&s.warnings.push("No outline elements found"),typeof DOMParser<"u"){const i=new DOMParser().parseFromString(t,"text/xml").querySelector("parsererror");i&&s.errors.push(`XML parsing error: ${i.textContent}`)}s.isValid=s.errors.length===0}catch(r){s.errors.push(`Validation error: ${r instanceof Error?r.message:"Unknown error"}`),s.isValid=!1}return s}static downloadOPML(t,s="feeds.opml"){try{s.toLowerCase().endsWith(".opml")||(s+=".opml");const r=new Blob([t],{type:"application/xml;charset=utf-8"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}catch(r){throw console.error("Failed to download OPML file:",r),new Error("Failed to download OPML file")}}static generateFilename(t="feeds"){const r=new Date().toISOString().slice(0,19).replace(/[T:]/g,"-");return`${t}-${r}.opml`}static normalizeUrl(t){try{let s=t.trim();const r=new URL(s);let a=r.hostname.toLowerCase();a.startsWith("www.")&&(a=a.substring(4));let o=r.pathname.toLowerCase();o.endsWith("/")&&o.length>1&&(o=o.slice(0,-1));const i=new URLSearchParams(r.search);["utm_source","utm_medium","utm_campaign","ref","source"].forEach(w=>{i.delete(w)});const m=`${r.protocol.toLowerCase()}//${a}${o}`,c=i.toString();return c?`${m}?${c}`:m}catch{return t.toLowerCase().trim()}}static detectDuplicates(t){const s=new Map,r=[],a=[];for(const o of t){const i=this.normalizeUrl(o.url),n=s.get(i);n?r.push({originalFeed:o,duplicateOf:n,normalizedUrl:i}):(s.set(i,o),a.push(o))}return{duplicates:r,uniqueFeeds:a,duplicateCount:r.length}}};Je.DEFAULT_OPTIONS={title:"Personal News Dashboard Feeds",description:"RSS feeds exported from Personal News Dashboard",ownerName:"Personal News Dashboard User",ownerEmail:"",includeCategories:!0,includeFeedMetadata:!0};let Pe=Je;const Et=({feeds:p,setFeeds:t})=>{const s=nt(),{t:r}=rt(),{refreshAppearance:a}=at(),{categories:o,createCategory:i,updateCategory:n,deleteCategory:u,reorderCategories:m,getCategorizedFeeds:c,moveFeedToCategory:w,exportCategories:F,importCategories:V,resetToDefaults:L}=ot(),{alertSuccess:N,alertError:U,confirmDanger:_}=Ke(),[B,W]=g.useState({draggedItem:null,dragOverCategory:null}),[j,k]=g.useState(null),[C,R]=g.useState({name:"",color:"#3B82F6",description:"",layoutMode:void 0,headerPosition:void 0}),[se,Qe]=g.useState({}),[E,re]=g.useState({name:"",color:"#3B82F6",description:"",layoutMode:void 0,headerPosition:void 0}),[_e,Ce]=g.useState(!1),[pe,xe]=g.useState(!1),[X,O]=g.useState({}),ge=g.useRef(null),Ne=g.useRef(null),[Se,ae]=g.useState(null),$=c(p),G=pe?o:o.slice(0,2),Te=o.length-G.length,fe=[{value:"",label:"Default (Use Global Setting)"},{value:"bento",label:"Bento Grid"},{value:"brutalist",label:"Brutalist"},{value:"compact",label:"Compact (Data)"},{value:"cyberpunk",label:"Cyberpunk"},{value:"focus",label:"Focus (Single)"},{value:"gallery",label:"Gallery (Image)"},{value:"immersive",label:"Immersive / Netflix"},{value:"list",label:"List / Portal"},{value:"grid",label:"Magazine Grid"},{value:"masonry",label:"Masonry Cards"},{value:"minimal",label:"Minimal Text"},{value:"modern",label:"Modern Portal"},{value:"newspaper",label:"Newspaper (Classic)"},{value:"pocketfeeds",label:"PocketFeeds"},{value:"split",label:"Split (ZigZag)"},{value:"terminal",label:"Terminal"},{value:"timeline",label:"Timeline"}],K=g.useCallback((l,f,x,y)=>{W(M=>({...M,draggedItem:{type:f,id:x,data:y}})),l.dataTransfer.effectAllowed="move"},[]),ce=g.useCallback((l,f)=>{l.preventDefault(),l.dataTransfer.dropEffect="move",W(x=>({...x,dragOverCategory:f}))},[]),J=async()=>{const l=await Pe.generateOPML(p,o),f=new Blob([l],{type:"text/xml"}),x=URL.createObjectURL(f),y=document.createElement("a");y.href=x,y.download=`personal_news_with_categories_${new Date().toISOString().split("T")[0]}.opml`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(x)},ve=g.useCallback(()=>{W(l=>({...l,dragOverCategory:null}))},[]),oe=g.useCallback((l,f)=>{if(l.preventDefault(),!B.draggedItem)return;const{type:x,id:y,data:M}=B.draggedItem;if(x==="feed")w(M.url,f,p,t);else if(x==="category"){const P=o.find(D=>D.id===f),q=o.find(D=>D.id===y);if(P&&q){const D=[...o].sort((je,ke)=>je.order-ke.order).map(je=>je.id),z=D.indexOf(y),Be=D.indexOf(f);D.splice(z,1),D.splice(Be,0,y),m(D)}}W({draggedItem:null,dragOverCategory:null})},[B.draggedItem,o,p,t,w,m]),Fe=[{value:"",label:"Padrão (Global)"},{value:"static",label:"Estático"},{value:"sticky",label:"Fixo (Sticky)"},{value:"floating",label:"Flutuante"},{value:"hidden",label:"Oculto"}],Le=g.useCallback(l=>{l.preventDefault(),E.name.trim()&&(i(E.name.trim(),E.color,E.description.trim()||void 0,E.layoutMode,E.headerPosition),re({name:"",color:"#3B82F6",description:"",layoutMode:void 0,headerPosition:void 0}),Ce(!1))},[E,i]),Q=g.useCallback(l=>{k(l.id),R({name:l.name,color:l.color,description:l.description||"",layoutMode:l.layoutMode,headerPosition:l.headerPosition})},[]),de=g.useCallback(l=>{l.preventDefault(),j&&C.name.trim()&&(n(j,{name:C.name.trim(),color:C.color,description:C.description.trim()||void 0,layoutMode:C.layoutMode,headerPosition:C.headerPosition}),k(null),R({name:"",color:"#3B82F6",description:"",layoutMode:void 0,headerPosition:void 0}))},[j,C,n]),Ie=g.useCallback(()=>{k(null),R({name:"",color:"#3B82F6",description:"",layoutMode:void 0,headerPosition:void 0})},[]),ue=g.useCallback(async l=>{const f=o.find(P=>P.id===l),x=$[l]||[],y=x.length;let M=`Tem certeza que deseja excluir a categoria "${f?.name}"?`;if(y>0&&(M+=`

Esta ação irá mover ${y} feed${y>1?"s":""} para "Não categorizados":`,x.slice(0,3).forEach(P=>{M+=`
• ${P.customTitle||P.url}`}),y>3&&(M+=`
• ... e mais ${y-3} feed${y-3>1?"s":""}`)),await _(M)){x.forEach(q=>{w(q.url,"uncategorized",p,t)}),u(l);const P=y>0?`Categoria "${f?.name}" excluída com sucesso. ${y} feed${y>1?"s foram movidos":" foi movido"} para "Não categorizados".`:`Categoria "${f?.name}" excluída com sucesso.`;setTimeout(async()=>{await N(P)},100)}},[o,$,p,t,w,u]);g.useCallback(()=>{const l=F(),f=new Blob([l],{type:"application/json"}),x=URL.createObjectURL(f),y=document.createElement("a");y.href=x,y.download=`feed-categories-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(x)},[F]);const ie=g.useCallback(async l=>{const f=l.target.files?.[0];if(f)try{const x=await f.text();V(x)?await N("Categories imported successfully!"):await U("Failed to import categories. Please check the file format.")}catch(x){await U("Failed to read the file."),s.error("Failed to read categories import file",x,{additionalData:{fileName:f.name,fileSize:f.size,fileType:f.type}})}l.target&&(l.target.value="")},[V]),Oe=g.useCallback(async l=>{const f=l.target.files?.[0];if(f){try{const x=await f.text(),y=lt(x);if(y.length===0){await U("No feeds found in this OPML file.");return}const M=[],P=new Set(p.map(D=>D.url.toLowerCase())),q=Se||void 0;if(y.forEach(D=>{const z=D.url.toLowerCase().trim();P.has(z)||(P.add(z),M.push({url:D.url,customTitle:D.title,categoryId:q}))}),M.length>0){t(z=>[...z,...M]);const D=q?o.find(z=>z.id===q)?.name||"selected category":"Uncategorized";await N(`${M.length} feeds imported successfully to ${D}!`)}else await N("All feeds from this file are already in your collection.");s.info("OPML feeds imported",{additionalData:{totalInFile:y.length,newFeedsAdded:M.length,targetCategory:q}})}catch(x){await U("Failed to parse OPML file. Please check the file format."),s.error("Failed to import OPML feeds",x,{additionalData:{fileName:f.name,fileSize:f.size}})}l.target&&(l.target.value=""),ae(null)}},[p,t,Se,o,N,U,s]),ze=g.useCallback(async()=>{if(await _("Are you sure you want to reset to default categories? This will remove all custom categories and reset feed assignments.")){L(),a();const l=p.map(f=>({...f,categoryId:void 0}));t(l)}},[L,p,t]),be=g.useCallback(async(l,f)=>{await _(`Tem certeza que deseja remover o feed "${f||l}"?`)&&(t(p.filter(x=>x.url!==l)),await N("Feed removido com sucesso."))},[p,t,_,N]),[S,Z]=g.useState(null),[ye,ee]=g.useState(""),Me=l=>{Z(l.url),ee(l.customTitle||"")},De=()=>{S&&(t(p.map(l=>l.url===S?{...l,customTitle:ye}:l)),Z(null),N("Feed atualizado."))},Re=()=>{Z(null),ee("")},[te,he]=g.useState(null),[me,Ve]=g.useState(null),we=g.useRef({});return g.useEffect(()=>{const l=f=>{te&&we.current[te]&&(we.current[te]?.contains(f.target)||he(null))};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[te]),e.jsxs("div",{className:"h-full flex flex-col",role:"dialog","aria-labelledby":"category-manager-title",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[e.jsxs("button",{onClick:()=>Ce(!0),className:"bg-[rgb(var(--color-accent))] hover:bg-[rgb(var(--color-accent))]/90 text-white font-medium px-4 py-2 rounded-lg transition-all shadow-lg shadow-[rgb(var(--color-accent))]/20 hover:shadow-[rgb(var(--color-accent))]/40 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r("action.add")]}),e.jsxs("button",{onClick:J,className:"bg-gray-800 hover:bg-gray-700 text-white font-medium px-4 py-2 rounded-lg transition-all border border-white/10 hover:border-white/20 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r("action.export")," OPML"]}),e.jsxs("button",{onClick:()=>{ae(null),Ne.current?.click()},className:"bg-gray-800 hover:bg-gray-700 text-white font-medium px-4 py-2 rounded-lg transition-all border border-white/10 hover:border-white/20 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r("action.import")," OPML"]}),e.jsxs("button",{onClick:ze,className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 font-medium px-4 py-2 rounded-lg transition-all border border-red-500/20 flex items-center ml-auto",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r("action.reset")]})]}),e.jsx("input",{type:"file",ref:ge,onChange:ie,accept:".json",className:"hidden"}),e.jsx("input",{type:"file",ref:Ne,onChange:Oe,accept:".opml,.xml",className:"hidden"}),_e&&e.jsxs("div",{className:"bg-gray-800/40 backdrop-blur-md border border-white/5 rounded-xl p-6 mb-8 animate-in slide-in-from-top-4",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("span",{className:"p-2 rounded-lg bg-[rgb(var(--color-accent))]/10 mr-3",children:e.jsx("svg",{className:"w-5 h-5 text-[rgb(var(--color-accent))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create New Category"})]}),e.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Category Name"}),e.jsx("input",{id:"category-name",type:"text",value:E.name,onChange:l=>re(f=>({...f,name:l.target.value})),placeholder:"Enter category name",className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-color",className:"block text-sm font-medium text-gray-300 mb-2",children:"Color Tag"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{id:"category-color",type:"color",value:E.color,onChange:l=>re(f=>({...f,color:l.target.value})),className:"w-14 h-14 bg-transparent rounded-lg cursor-pointer border-0 p-0"}),e.jsxs("div",{className:"flex items-center space-x-3 bg-black/20 px-4 py-2 rounded-lg border border-white/5",children:[e.jsx("div",{className:"w-6 h-6 rounded-full shadow-[0_0_10px_rgba(0,0,0,0.3)]",style:{backgroundColor:E.color}}),e.jsx("span",{className:"text-sm text-gray-400 font-mono",children:E.color})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-layout",className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Layout"}),e.jsx("select",{id:"category-layout",value:E.layoutMode||"",onChange:l=>re(f=>({...f,layoutMode:l.target.value?l.target.value:void 0})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",children:fe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.label))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-header-position",className:"block text-sm font-medium text-gray-300 mb-2",children:"Posição do Cabeçalho"}),e.jsx("select",{id:"category-header-position",value:E.headerPosition||"",onChange:l=>re(f=>({...f,headerPosition:l.target.value?l.target.value:void 0})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",children:Fe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description (optional)"}),e.jsx("textarea",{id:"category-description",value:E.description,onChange:l=>re(f=>({...f,description:l.target.value})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all resize-none",rows:3,placeholder:"Enter a description for this category..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",className:"bg-[rgb(var(--color-accent))] hover:bg-[rgb(var(--color-accent))]/90 text-white font-medium px-6 py-2.5 rounded-lg transition-all shadow-lg shadow-[rgb(var(--color-accent))]/20",children:"Create Category"}),e.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"bg-gray-700 hover:bg-gray-600 text-white font-medium px-6 py-2.5 rounded-lg transition-all",children:"Cancel"})]})]})]}),j&&e.jsxs("div",{className:"bg-gray-800/40 backdrop-blur-md border border-[rgb(var(--color-accent))]/30 rounded-xl p-6 mb-8 animate-in slide-in-from-top-4 shadow-[0_0_30px_rgba(var(--color-accent),0.1)]",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("span",{className:"p-2 rounded-lg bg-[rgb(var(--color-accent))]/10 mr-3",children:e.jsx("svg",{className:"w-5 h-5 text-[rgb(var(--color-accent))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Category"})]}),e.jsxs("form",{onSubmit:de,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-category-name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Category Name"}),e.jsx("input",{id:"edit-category-name",type:"text",value:C.name,onChange:l=>R(f=>({...f,name:l.target.value})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-category-color",className:"block text-sm font-medium text-gray-300 mb-2",children:"Color Tag"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{id:"edit-category-color",type:"color",value:C.color,onChange:l=>R(f=>({...f,color:l.target.value})),className:"w-14 h-14 bg-transparent rounded-lg cursor-pointer border-0 p-0"}),e.jsxs("div",{className:"flex items-center space-x-3 bg-black/20 px-4 py-2 rounded-lg border border-white/5",children:[e.jsx("div",{className:"w-6 h-6 rounded-full shadow-[0_0_10px_rgba(0,0,0,0.3)]",style:{backgroundColor:C.color}}),e.jsx("span",{className:"text-sm text-gray-400 font-mono",children:C.color})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-category-layout",className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Layout"}),e.jsx("select",{id:"edit-category-layout",value:C.layoutMode||"",onChange:l=>R(f=>({...f,layoutMode:l.target.value?l.target.value:void 0})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",children:fe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.label))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-category-header-position",className:"block text-sm font-medium text-gray-300 mb-2",children:"Posição do Cabeçalho"}),e.jsx("select",{id:"edit-category-header-position",value:C.headerPosition||"",onChange:l=>R(f=>({...f,headerPosition:l.target.value?l.target.value:void 0})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all",children:Fe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-category-description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description (optional)"}),e.jsx("textarea",{id:"edit-category-description",value:C.description,onChange:l=>R(f=>({...f,description:l.target.value})),className:"w-full bg-black/30 text-white rounded-lg px-4 py-3 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent transition-all resize-none",rows:3,placeholder:"Enter a description for this category..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",className:"bg-[rgb(var(--color-accent))] hover:bg-[rgb(var(--color-accent))]/90 text-white font-medium px-6 py-2.5 rounded-lg transition-all shadow-lg shadow-[rgb(var(--color-accent))]/20",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:Ie,className:"bg-gray-700 hover:bg-gray-600 text-white font-medium px-6 py-2.5 rounded-lg transition-all",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 overflow-y-auto custom-scrollbar pr-2 pb-6 flex-grow",children:[G.map(l=>(($[l.id]?.length||0)===0?X[l.id]:X[l.id],e.jsxs("div",{className:`bg-gray-800/40 backdrop-blur-sm border rounded-xl p-4 transition-all duration-300 flex flex-col h-full ${B.dragOverCategory===l.id?"border-[rgb(var(--color-accent))] bg-[rgb(var(--color-accent))]/10 shadow-[0_0_30px_rgba(var(--color-accent),0.1)] scale-[1.02]":"border-white/5 hover:border-white/10 hover:bg-gray-800/60"}`,onDragOver:x=>ce(x,l.id),onDragLeave:ve,onDrop:x=>oe(x,l.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-move group",draggable:!0,onDragStart:x=>K(x,"category",l.id,l),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full shadow-[0_0_10px_rgba(0,0,0,0.3)] ring-2 ring-white/10",style:{backgroundColor:l.color}}),e.jsx("h3",{className:"font-bold text-white text-lg tracking-tight group-hover:text-[rgb(var(--color-accent))] transition-colors",children:l.name}),l.isDefault&&e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-semibold bg-white/10 text-gray-400 px-2 py-0.5 rounded-full",children:"Default"})]}),e.jsxs("div",{className:"flex space-x-1 transition-opacity",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:x=>{if(x.stopPropagation(),te===l.id)he(null);else{const y=x.currentTarget.getBoundingClientRect();Ve({top:y.bottom+5,left:y.left}),he(l.id)}},className:`p-1.5 rounded-lg transition-colors ${l.layoutMode?"text-[rgb(var(--color-accent))] bg-[rgb(var(--color-accent))]/10 hover:bg-[rgb(var(--color-accent))]/20":"text-gray-400 hover:text-white hover:bg-white/10"}`,title:`Layout: ${fe.find(x=>x.value===(l.layoutMode||""))?.label||"Default"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),te===l.id&&me&&it.createPortal(e.jsx("div",{ref:x=>{we.current[l.id]=x},className:"fixed w-48 bg-[#0a0a0c] border border-white/10 rounded-lg shadow-2xl py-1 z-[9999] animate-in fade-in zoom-in-95 duration-100 max-h-[300px] overflow-y-auto custom-scrollbar",style:{top:me.top,left:me.left},onClick:x=>x.stopPropagation(),children:fe.map(x=>e.jsx("button",{onClick:()=>{n(l.id,{layoutMode:x.value}),he(null)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${(l.layoutMode||"")===x.value?"text-[rgb(var(--color-accent))] bg-white/5 font-medium":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:x.label},x.label))}),document.body)]},l.id+"-layout-switcher"),e.jsx("button",{onClick:()=>n(l.id,{isPinned:!l.isPinned}),className:`p-1.5 rounded-lg transition-colors ${l.isPinned?"text-[rgb(var(--color-accent))] bg-[rgb(var(--color-accent))]/10 hover:bg-[rgb(var(--color-accent))]/20":"text-gray-400 hover:text-white hover:bg-white/10"}`,title:l.isPinned?`Unpin ${l.name}`:`Pin ${l.name}`,children:e.jsx("svg",{className:"w-4 h-4",fill:l.isPinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),e.jsx("button",{onClick:()=>{ae(l.id),Ne.current?.click()},className:"p-1.5 text-gray-400 hover:text-green-400 hover:bg-green-500/10 rounded-lg transition-colors",title:`Import OPML to ${l.name}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:()=>Q(l),className:"p-1.5 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:`Edit ${l.name}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>ue(l.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:`Delete ${l.name}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),l.description&&e.jsx("p",{className:"text-gray-400 text-sm mb-4 leading-relaxed line-clamp-2",children:vt(l.description)}),e.jsxs("div",{className:"space-y-2 min-h-[100px] flex-grow bg-black/20 rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:[$[l.id]?.length||0," feeds"]}),($[l.id]?.length||0)>0&&e.jsxs("span",{className:"text-[10px] text-gray-600 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Arraste para reordenar"]})]}),(se[l.id]?$[l.id]||[]:($[l.id]||[]).slice(0,2)).map(x=>e.jsx("div",{className:`bg-gray-800/50 p-3 rounded-lg cursor-move transition-all duration-200 border border-white/5 group ${S===x.url?"ring-2 ring-[rgb(var(--color-accent))]":"hover:bg-gray-700 hover:border-[rgb(var(--color-accent))]/50"}`,draggable:S!==x.url,onDragStart:y=>!S&&K(y,"feed",x.url,x),children:S===x.url?e.jsxs("div",{className:"flex flex-col gap-2",onClick:y=>y.stopPropagation(),children:[e.jsx("input",{type:"text",value:ye,onChange:y=>ee(y.target.value),className:"w-full bg-black/30 text-white rounded px-2 py-1 text-sm border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))]",placeholder:"Nome do feed",autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:De,className:"text-xs bg-[rgb(var(--color-accent))] text-white px-2 py-1 rounded hover:opacity-90",children:"Salvar"}),e.jsx("button",{onClick:Re,className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-8 rounded-full bg-gray-700 group-hover:bg-[rgb(var(--color-accent))] transition-colors"}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("div",{className:"text-sm text-white font-medium truncate mb-0.5 group-hover:text-[rgb(var(--color-accent))] transition-colors",title:x.customTitle||x.url,children:x.customTitle||x.url}),e.jsx("div",{className:"text-xs text-gray-500 truncate font-mono opacity-60",children:x.url})]}),e.jsxs("div",{className:"flex items-center space-x-1 transition-opacity",children:[e.jsx("button",{onClick:()=>Me(x),className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded",title:"Editar nome",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>be(x.url,x.customTitle),className:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded",title:"Excluir feed",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("div",{className:"cursor-move p-1 text-gray-600 hover:text-gray-400",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})},x.url)),($[l.id]?.length||0)>2&&e.jsx("button",{onClick:()=>Qe(x=>({...x,[l.id]:!x[l.id]})),className:"w-full py-2 text-xs text-center text-gray-500 hover:text-white hover:bg-white/5 rounded-lg transition-colors mt-2 flex items-center justify-center gap-1",children:se[l.id]?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Mostrar Menos"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Mostrar mais ",($[l.id]?.length||0)-2]})}),($[l.id]||[]).length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 text-xs py-8 border-2 border-dashed border-white/5 rounded-lg",children:[e.jsx("span",{className:"mb-1",children:"Categoria Vazia"}),e.jsx("span",{children:"Arraste feeds aqui"})]})]})]},l.id))),Te>0&&!pe&&e.jsxs("button",{onClick:()=>xe(!0),className:"flex items-center justify-center gap-2 p-4 rounded-xl border-2 border-dashed border-white/10 text-gray-400 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Ver mais ",Te," categorias"]}),pe&&o.length>2&&e.jsxs("button",{onClick:()=>xe(!1),className:"flex items-center justify-center gap-2 p-4 rounded-xl border-2 border-dashed border-white/10 text-gray-400 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Mostrar menos"]}),($.uncategorized||[]).length>0&&e.jsxs("div",{className:`bg-gray-800/40 backdrop-blur-sm border-2 border-dashed rounded-xl p-4 transition-all duration-300 flex flex-col h-full ${B.dragOverCategory==="uncategorized"?"border-[rgb(var(--color-accent))] bg-[rgb(var(--color-accent))]/10 shadow-[0_0_30px_rgba(var(--color-accent),0.1)] scale-[1.02]":"border-yellow-500/30 hover:border-yellow-500/50 hover:bg-gray-800/60"}`,onDragOver:l=>ce(l,"uncategorized"),onDragLeave:ve,onDrop:l=>oe(l,"uncategorized"),children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500 shadow-[0_0_10px_rgba(234,179,8,0.3)]"}),e.jsx("h3",{className:"font-bold text-white text-lg tracking-tight",children:"Sem Categoria"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-semibold bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full border border-yellow-500/20",children:"Organizar"})]}),e.jsxs("div",{className:"space-y-2 min-h-[100px] flex-grow bg-black/20 rounded-xl p-3 border border-white/5",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 px-1",children:e.jsxs("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:[$.uncategorized?.length||0," feeds"]})}),($.uncategorized||[]).map(l=>e.jsx("div",{className:`bg-gray-800/50 p-3 rounded-lg cursor-move transition-all duration-200 border border-white/5 group ${S===l.url?"ring-2 ring-[rgb(var(--color-accent))]":"hover:bg-gray-700 hover:border-yellow-500/50"}`,draggable:S!==l.url,onDragStart:f=>!S&&K(f,"feed",l.url,l),children:S===l.url?e.jsxs("div",{className:"flex flex-col gap-2",onClick:f=>f.stopPropagation(),children:[e.jsx("input",{type:"text",value:ye,onChange:f=>ee(f.target.value),className:"w-full bg-black/30 text-white rounded px-2 py-1 text-sm border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))]",placeholder:"Nome do feed",autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:De,className:"text-xs bg-[rgb(var(--color-accent))] text-white px-2 py-1 rounded hover:opacity-90",children:"Salvar"}),e.jsx("button",{onClick:Re,className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-8 rounded-full bg-yellow-500/50 group-hover:bg-yellow-500 transition-colors"}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("div",{className:"text-sm text-white font-medium truncate mb-0.5 group-hover:text-yellow-400 transition-colors",title:l.customTitle||l.url,children:l.customTitle||l.url}),e.jsx("div",{className:"text-xs text-gray-500 truncate font-mono opacity-60",children:l.url})]}),e.jsxs("div",{className:"flex items-center space-x-1 transition-opacity",children:[e.jsx("button",{onClick:()=>Me(l),className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded",title:"Editar nome",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>be(l.url,l.customTitle),className:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded",title:"Excluir feed",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("div",{className:"cursor-move p-1 text-gray-600 hover:text-gray-400",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})},l.url))]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-900/10 border border-blue-500/20 rounded-xl p-4 flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400 mt-1",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-semibold text-blue-100 mb-2",children:"Dicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2 text-sm text-blue-200/70",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{children:"Arraste feeds entre categorias para organizá-los"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{children:"Arraste categorias para reordená-las (apenas customizadas)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{children:"Use cores para distinguir categorias visualmente"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{children:"Exporte seu setup para compartilhar com outros"})]})]})]})]})]})},Ye=({feed:p,validation:t,onRemove:s,onRetry:r,onEdit:a,onShowError:o,categories:i,onMoveCategory:n})=>{const u=()=>t?t.isValid?"text-green-400":"text-red-400":"text-gray-400",m=()=>t?t.isValid?"✓":"✗":"?";return e.jsx("div",{className:"bg-black/20 border border-white/5 rounded-lg p-3 hover:border-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-bold ${u()}`,children:m()}),e.jsx("h4",{className:"text-white font-medium truncate",children:p.customTitle||t?.title||"Feed sem título"})]}),e.jsx("p",{className:"text-gray-400 text-xs truncate mt-1",children:p.url}),t?.error&&e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("p",{className:"text-red-400 text-xs truncate max-w-[200px] sm:max-w-xs",children:t.error}),o&&e.jsx("button",{onClick:()=>o(p.url),className:"text-[10px] uppercase font-bold text-red-300 hover:text-white bg-red-500/10 hover:bg-red-500/30 px-2 py-0.5 rounded transition-colors",children:"Ver Detalhes"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("select",{value:p.categoryId||"",onChange:c=>n(c.target.value),className:"bg-black/30 text-gray-400 text-xs rounded px-2 py-1 border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"",children:"Sem categoria"}),i.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]}),t&&!t.isValid&&o&&e.jsx("button",{onClick:()=>o(p.url),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded transition-colors",title:"Ver Detalhes do Erro",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>r(p.url),className:"p-1.5 text-gray-400 hover:text-blue-400 hover:bg-blue-400/10 rounded transition-colors",title:"Revalidar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:()=>a(p.url),className:"p-1.5 text-gray-400 hover:text-yellow-400 hover:bg-yellow-400/10 rounded transition-colors",title:"Editar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>s(p.url),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded transition-colors",title:"Remover",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},At=({isOpen:p,onClose:t,originalUrl:s,discoveredFeeds:r,onSelectFeed:a,isLoading:o=!1})=>{const i=c=>c>=.8?"green":c>=.6?"yellow":"red",n=c=>c>=.8?"High":c>=.6?"Medium":"Low",u=c=>{switch(c){case"direct":return"Direct RSS";case"link_discovery":return"Link Discovery";case"html_parsing":return"HTML Parsing";case"common_paths":return"Common Paths";default:return c}},m=c=>{o||a(c)};return e.jsx(yt,{isOpen:p,onClose:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Multiple Feeds Discovered"})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(wt.Info,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Multiple RSS feeds found"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["We discovered ",r.length," RSS feeds from the URL you provided. Please select the feed you want to add:"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-2 font-mono break-all",children:s})]})]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map((c,w)=>e.jsxs(Ue,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:border-blue-300",onClick:()=>m(c),padding:"md",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt.RSS,{className:"text-orange-500"}),e.jsxs(st,{variant:i(c.confidence),className:"text-xs",children:[n(c.confidence)," Confidence"]}),e.jsx(st,{variant:"gray",className:"text-xs",children:u(c.discoveryMethod)})]}),e.jsx(tt,{size:"sm",variant:"primary",onClick:F=>{F?.stopPropagation(),m(c)},disabled:o,icon:e.jsx(jt.Add,{}),children:"Select"})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:c.title||"Untitled Feed"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-mono break-all",children:c.url.length>80?`${c.url.substring(0,77)}...`:c.url}),c.description&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-3 leading-relaxed",children:bt(c.description)}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["Confidence: ",Math.round(c.confidence*100),"%"]}),c.type&&e.jsxs("span",{children:["Type: ",c.type]})]})]},`${c.url}-${w}`))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[r.length," feed",r.length!==1?"s":""," found"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(tt,{variant:"secondary",onClick:t,disabled:o,children:"Cancel"})})]})]})})},Ut=({isOpen:p,onClose:t,feeds:s,onRemoveFeeds:r})=>{const[a,o]=g.useState([]),[i,n]=g.useState(new Set),[u,m]=g.useState(1),[c,w]=g.useState("all"),{confirmDanger:F,alertSuccess:V}=Ke();g.useEffect(()=>{p&&L()},[p]);const L=()=>{try{const j=localStorage.getItem("feed-error-history");if(j){const k=JSON.parse(j),C=Array.isArray(k)?k.map(R=>({url:R.url,failures:R.failures||1,lastError:R.lastError,lastErrorType:R.lastErrorType||"unknown"})):[];o(C)}}catch(j){console.error("Failed to load feed error history",j)}},U=a.filter(j=>!(!s.some(C=>C.url===j.url)||j.failures<u||c!=="all"&&j.lastErrorType!==c)),_=j=>{if(j){const k=U.map(C=>C.url);n(new Set(k))}else n(new Set)},B=j=>{const k=new Set(i);k.has(j)?k.delete(j):k.add(j),n(k)},W=async()=>{if(i.size===0)return;if(await F(`Tem certeza que deseja remover ${i.size} feeds selecionados? Esta ação não pode ser desfeita.`)){r(Array.from(i));const k=a.filter(C=>!i.has(C.url));localStorage.setItem("feed-error-history",JSON.stringify(k)),V(`${i.size} feeds removidos com sucesso.`),L(),n(new Set),t()}};return p?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-2xl bg-gray-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-black/20",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-red-400",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),"Limpeza de Feeds"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Remova feeds que estão apresentando erros recorrentes."})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/10 flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Mínimo de Falhas"}),e.jsx("input",{type:"number",min:"1",value:u,onChange:j=>m(parseInt(j.target.value)||1),className:"bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white w-24 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Tipo de Erro"}),e.jsxs("select",{value:c,onChange:j=>w(j.target.value),className:"bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white w-40 focus:outline-none focus:border-red-500",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"timeout",children:"Timeout"}),e.jsx("option",{value:"network",children:"Rede (Network)"}),e.jsx("option",{value:"parse",children:"Parse (Formato)"}),e.jsx("option",{value:"cors",children:"CORS"}),e.jsx("option",{value:"unknown",children:"Desconhecido"})]})]}),e.jsxs("div",{className:"flex-1 text-right text-xs text-gray-500 pb-2",children:["Encontrados: ",e.jsx("span",{className:"text-white font-medium",children:U.length})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 min-h-[200px]",children:U.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 py-10",children:[e.jsx("svg",{className:"w-12 h-12 mb-3 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{children:"Nenhum feed corresponde aos critérios."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-2 px-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U.length>0&&i.size===U.length,onChange:j=>_(j.target.checked),className:"rounded border-gray-600 bg-gray-800 text-red-500 focus:ring-red-500"}),"Selecionar Todos"]})}),U.map(j=>{const k=s.find(C=>C.url===j.url);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-colors ${i.has(j.url)?"bg-red-500/10 border-red-500/30":"bg-black/20 border-white/5 hover:border-white/10"}`,children:[e.jsx("input",{type:"checkbox",checked:i.has(j.url),onChange:()=>B(j.url),className:"rounded border-gray-600 bg-gray-800 text-red-500 focus:ring-red-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:k?.customTitle||new URL(j.url).hostname}),e.jsx("p",{className:"text-xs text-gray-500 truncate",title:j.url,children:j.url})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-500/10 text-red-400 border border-red-500/20",children:[j.failures," falhas"]}),e.jsx("div",{className:"text-[10px] text-gray-500 mt-1 uppercase",children:j.lastErrorType})]})]},j.url)})]})}),e.jsxs("div",{className:"p-4 border-t border-white/10 bg-black/20 flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:W,disabled:i.size===0,className:"px-4 py-2 rounded-lg text-sm font-medium bg-red-600 text-white hover:bg-red-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-red-900/20",children:["Excluir ",i.size>0?`(${i.size})`:""]})]})]})}):null},$t=({feeds:p,articles:t,feedValidations:s})=>{const r=g.useMemo(()=>{const i=new Map;p.forEach(u=>{const m=u.customTitle||u.url;i.set(m,0)}),t.forEach(u=>{const m=u.sourceTitle||"Unknown Source";if(i.has(m))i.set(m,(i.get(m)||0)+1);else{const c=p.find(w=>u.link.includes(new URL(w.url).hostname));if(c){const w=c.customTitle||c.url;i.set(w,(i.get(w)||0)+1)}}});const n=Array.from(i.entries()).sort((u,m)=>m[1]-u[1]);return{mostActive:n.slice(0,5),leastActive:n.filter(u=>u[1]===0).slice(0,5),totalArticles:t.length}},[p,t]),a=g.useMemo(()=>{const i=new Map;return t.forEach(n=>{n.categories&&n.categories.length>0&&n.categories.forEach(u=>{const m=u.trim().toLowerCase();m.length>2&&!["uncategorized","general","news"].includes(m)&&i.set(m,(i.get(m)||0)+1)})}),Array.from(i.entries()).sort((n,u)=>u[1]-n[1]).slice(0,10)},[t]),o=g.useMemo(()=>{let i=0,n=0,u=0;const m=[];return p.forEach(c=>{const w=s.get(c.url);w?w.isValid?i++:(n++,m.push({url:c.url,title:c.customTitle,error:w.error||"Erro desconhecido"})):u++}),{valid:i,invalid:n,unchecked:u,issues:m}},[p,s]);return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 p-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(Ue,{variant:"glass",className:"p-4 flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Artigos em Cache"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:r.totalArticles}),e.jsxs("span",{className:"text-[10px] text-gray-500",children:["Atualizado: ",new Date().toLocaleTimeString()]})]})]}),e.jsxs(Ue,{variant:"glass",className:"p-4 flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-[rgb(var(--color-accent))]/20 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-[rgb(var(--color-accent))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11c3.866 0 7 3.134 7 7m-7-7v7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Feeds Monitorados"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:p.length})]})]}),e.jsxs(Ue,{variant:"glass",className:"p-4 flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-full ${o.invalid>0?"bg-red-500/20":"bg-green-500/20"}`,children:e.jsx("svg",{className:`w-6 h-6 ${o.invalid>0?"text-red-400":"text-green-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Saúde do Sistema"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:o.invalid>0?`${o.invalid} com erro`:"100% Operacional"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/40 rounded-xl border border-white/10 p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),"Assuntos Populares"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.length>0?a.map(([i,n],u)=>e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${u<3?"bg-purple-500/20 text-purple-300 border-purple-500/30":"bg-gray-700/50 text-gray-300 border-white/5"}`,children:["#",i," ",e.jsxs("span",{className:"opacity-50 ml-1",children:["(",n,")"]})]},i)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Não há dados suficientes para análise de tópicos ainda."})})]}),e.jsxs("div",{className:"bg-gray-800/40 rounded-xl border border-white/10 p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Maior Frequência"]}),e.jsx("div",{className:"space-y-3",children:r.mostActive.map(([i,n],u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"w-5 text-xs text-gray-500 mr-2",children:["#",u+1]}),e.jsx("span",{className:"text-sm text-gray-200 truncate max-w-[200px]",children:i})]}),e.jsxs("span",{className:"text-xs font-mono bg-green-900/30 text-green-400 px-2 py-0.5 rounded",children:[n," arts."]})]},i))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/40 rounded-xl border border-white/10 p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Status dos Feeds"]}),e.jsxs("div",{className:"flex h-4 rounded-full overflow-hidden mb-4 bg-gray-700",children:[e.jsx("div",{className:"bg-green-500 transition-all duration-500",style:{width:`${o.valid/p.length*100}%`},title:"Válidos"}),e.jsx("div",{className:"bg-red-500 transition-all duration-500",style:{width:`${o.invalid/p.length*100}%`},title:"Com Erro"}),e.jsx("div",{className:"bg-gray-500 transition-all duration-500",style:{width:`${o.unchecked/p.length*100}%`},title:"Não Verificados"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"text-green-400",children:[e.jsx("span",{className:"block font-bold text-lg",children:o.valid}),"Válidos"]}),e.jsxs("div",{className:"text-red-400",children:[e.jsx("span",{className:"block font-bold text-lg",children:o.invalid}),"Erros"]}),e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"block font-bold text-lg",children:o.unchecked}),"Pendentes"]})]})]}),o.issues.length>0?e.jsxs("div",{className:"bg-red-900/10 rounded-xl border border-red-500/20 p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Atenção Necessária"]}),e.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto pr-2 custom-scrollbar",children:o.issues.map((i,n)=>e.jsxs("div",{className:"bg-red-500/5 p-3 rounded-lg border border-red-500/10",children:[e.jsx("p",{className:"text-sm font-medium text-red-200 truncate",children:i.title||i.url}),e.jsx("p",{className:"text-xs text-red-400 mt-1 break-all",children:i.error})]},n))})]}):e.jsxs("div",{className:"bg-green-900/10 rounded-xl border border-green-500/20 p-5 text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-green-500/50 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-green-300 font-medium",children:"Tudo Certo!"}),e.jsx("p",{className:"text-green-400/70 text-sm mt-1",children:"Nenhum problema detectado nos seus feeds."})]})]})]})]})},Ht=({currentFeeds:p,setFeeds:t,closeModal:s,articles:r=[],onRefreshFeeds:a})=>{const o=nt(),{categories:i,createCategory:n,resetToDefaults:u}=ot(),{refreshAppearance:m}=at(),{t:c}=rt(),[w,F]=g.useState(""),[V,L]=g.useState(""),[N,U]=g.useState(null),[_,B]=g.useState("feeds");g.useRef(null);const[W,j]=g.useState(0),[k,C]=g.useState(new Map),[R,se]=g.useState(!1),[Qe,E]=g.useState(null),[re,_e]=g.useState(""),[Ce,pe]=g.useState(new Set),{confirm:xe,alertSuccess:X,alertError:O,confirmDanger:ge}=Ke(),[Ne,Se]=g.useState(!1),[ae,$]=g.useState(""),[G,Te]=g.useState("all"),[fe,K]=g.useState(new Set),[ce,J]=g.useState(new Map),[ve,oe]=g.useState(!1),[Fe,Le]=g.useState(!1),[Q,de]=g.useState(null),[Ie,ue]=g.useState(!1),[ie,Oe]=g.useState("br"),ze=h=>{switch(h){case"br":return ft;case"intl":return gt;case"default":return et;default:return et}},be=async h=>{const d=ze(ie);if(h==="replace")await ge("Isso substituirá todos os seus feeds atuais pelos da lista selecionada. Deseja continuar?")&&(t(d),u(),await X("Feeds substituídos com sucesso!"),ue(!1));else{const b=xt(p,d),v=b.length-p.length;v===0?await X("Todos os feeds desta lista já estão na sua coleção."):(t(b),await X(`${v} novos feeds adicionados com sucesso!`)),ue(!1)}},[S,Z]=g.useState(null);g.useEffect(()=>{p.length>0&&_==="feeds"&&ye()},[p,_]),g.useEffect(()=>{if(r.length>W&&W>0){const h=r.slice(0,r.length-W);h.length>0&&o.info("New articles detected",{additionalData:{newArticlesCount:h.length,totalArticles:r.length,lastCount:W}})}j(r.length)},[r,W]);const ye=async()=>{if(R)return;se(!0);const h=p.map(d=>d.url);try{const d=await le.validateFeeds(h),b=new Map;d.forEach(v=>{b.set(v.url,v)}),C(b),o.info("Feed validation completed",{additionalData:{totalFeeds:h.length,validFeeds:d.filter(v=>v.status==="valid").length,invalidFeeds:d.filter(v=>v.status!=="valid").length}})}catch(d){o.error("Feed validation failed",d)}finally{se(!1)}},ee=h=>{E(h),_e(h)},Me=async h=>{try{return await $e.detectDuplicate(h,p)}catch(d){o.error("Duplicate detection failed",d,{additionalData:{newUrl:h}});const b=$e.normalizeUrl(h);for(const v of p)if($e.normalizeUrl(v.url)===b)return{isDuplicate:!0,duplicateOf:v,confidence:1,reason:"Identical normalized URLs (fallback detection)"};return{isDuplicate:!1,confidence:0,reason:"No duplicates detected (fallback detection)"}}},De=()=>{S&&(me(S.newUrl),Z(null))},Re=()=>{Z(null)},te=async()=>{const h=await Pe.generateOPML(p,[],{includeCategories:!1}),d=new Blob([h],{type:"text/xml"}),b=URL.createObjectURL(d),v=document.createElement("a");v.href=b,v.download=`personal_news_feeds_uncategorized_${new Date().toISOString().split("T")[0]}.opml`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b)},he=()=>{S?.result.duplicateOf&&(t(h=>h.filter(d=>d.url!==S.result.duplicateOf.url)),me(S.newUrl),Z(null))},me=async h=>{K(d=>new Set(d.add(h))),J(d=>new Map(d.set(h,{status:"Starting validation...",progress:0})));try{const d=await le.validateFeedWithDiscovery(h,(b,v)=>{J(T=>new Map(T.set(h,{status:b,progress:v})))});if(d.isValid){const b={url:d.url,customTitle:d.title};t(v=>[...v,b]),F(""),o.info("Feed added successfully with discovery",{additionalData:{originalUrl:h,finalUrl:d.url,method:d.finalMethod,totalFeeds:p.length+1}}),d.finalMethod==="discovery"&&await O(`Feed discovered and added successfully!
Original URL: ${h}
Feed URL: ${d.url}`)}else d.requiresUserSelection&&d.discoveredFeeds&&d.discoveredFeeds.length>0?(de({originalUrl:h,discoveredFeeds:d.discoveredFeeds}),oe(!0),F("")):(await O(d.error||"Failed to validate or discover feeds from this URL"),o.warn("Feed discovery failed",{additionalData:{url:h,error:d.error,suggestions:d.suggestions}}))}catch(d){await O(`Failed to process feed: ${d.message}`),o.error("Feed discovery process failed",d,{additionalData:{url:h}})}finally{K(d=>{const b=new Set(d);return b.delete(h),b}),J(d=>{const b=new Map(d);return b.delete(h),b})}},Ve=async h=>{if(h.preventDefault(),!w.trim()){await O("Por favor, insira uma URL válida para o feed.");return}const d=w.trim(),b=await Me(d);if(b.isDuplicate){Z({show:!0,result:b,newUrl:d}),o.info("Duplicate feed detected",{additionalData:{attemptedUrl:d,duplicateOf:b.duplicateOf?.url,confidence:b.confidence,reason:b.reason}});return}U(d),K(v=>new Set(v.add(d))),J(v=>new Map(v.set(d,{status:"Starting validation...",progress:0})));try{const v=await le.validateFeedWithDiscovery(d,(T,I)=>{J(A=>new Map(A.set(d,{status:T,progress:I})))});if(v.isValid){const T={url:v.url,customTitle:v.title,categoryId:V||void 0};t(I=>[...I,T]),F(""),L(""),o.info("Feed added successfully with discovery",{additionalData:{originalUrl:d,finalUrl:v.url,method:v.finalMethod,totalFeeds:p.length+1}}),v.finalMethod==="discovery"&&await O(`Feed discovered and added successfully!
Original URL: ${d}
Feed URL: ${v.url}`)}else if(v.requiresUserSelection&&v.discoveredFeeds&&v.discoveredFeeds.length>0)de({originalUrl:d,discoveredFeeds:v.discoveredFeeds}),oe(!0),F("");else if(await xe(`Validation failed: ${v.error||"Unknown error"}

Many feeds work despite validation errors. Would you like to add this feed anyway?

URL: ${d}

The feed will be added and you can see if it works in the main interface.`)){const I={url:d,customTitle:v.title||void 0,categoryId:V||void 0};t(A=>[...A,I]),F(""),L(""),o.info("Feed added despite validation failure",{additionalData:{url:d,error:v.error,userChoice:"add_anyway",totalFeeds:p.length+1}}),await O(`Feed added successfully!

Note: The feed had validation issues but was added anyway. You can check if it works properly in the main interface.`)}else o.info("User chose not to add invalid feed",{additionalData:{url:d,error:v.error,userChoice:"reject"}})}catch(v){if(await xe(`Failed to process feed: ${v.message}

Would you like to add this URL anyway? Many feeds work despite processing errors.

URL: ${d}

The feed will be added and you can see if it works in the main interface.`)){const I={url:d,categoryId:V||void 0};t(A=>[...A,I]),F(""),L(""),o.info("Feed added despite processing failure",{additionalData:{url:d,error:v.message,userChoice:"add_anyway",totalFeeds:p.length+1}}),await O(`Feed added successfully!

Note: The feed had processing issues but was added anyway. You can check if it works properly in the main interface.`)}else o.error("Feed discovery process failed and user rejected",v,{additionalData:{url:d,userChoice:"reject"}})}finally{U(null),K(v=>{const T=new Set(v);return T.delete(d),T}),J(v=>{const T=new Map(v);return T.delete(d),T})}},we=async h=>{if(Q)try{const d=await le.validateDiscoveredFeed(h,Q.originalUrl);if(d.isValid){const b={url:h.url,customTitle:h.title||d.title,categoryId:V||void 0};t(v=>[...v,b]),L(""),oe(!1),de(null),o.info("Discovered feed selected and added",{additionalData:{originalUrl:Q.originalUrl,selectedUrl:h.url,discoveryMethod:h.discoveryMethod,confidence:h.confidence}}),await O(`Feed added successfully!
Title: ${h.title||"Unknown"}
URL: ${h.url}`)}else await O(`Selected feed is not valid: ${d.error}`)}catch(d){await O(`Failed to validate selected feed: ${d.message}`),o.error("Failed to validate selected discovered feed",d)}},l=()=>{oe(!1),de(null)},x=async h=>{if(!R)try{se(!0),le.revalidateFeed(h);const d=await le.validateFeed(h);C(b=>new Map(b.set(h,d))),o.info("Feed retry validation completed",{additionalData:{feedUrl:h,isValid:d.isValid,status:d.status,attempts:d.validationAttempts.length,totalRetries:d.totalRetries}})}catch(d){o.error("Feed retry validation failed",d,{additionalData:{feedUrl:h}})}finally{se(!1)}},y=Ve,M=(h,d,b,v)=>{v(T=>T.map(I=>I.url===h?{...I,categoryId:d}:I)),X("Categoria do feed atualizada!")},P=h=>{t(d=>d.filter(b=>b.url!==h))},q=async()=>{if(p.length===0)return;const h=`Tem certeza que deseja excluir TODOS os ${p.length} feeds? Esta ação não pode ser desfeita.`;await ge(h)&&(t([]),pe(new Set),Se(!1),o.info("All feeds deleted",{additionalData:{deletedCount:p.length}}))},z=p.filter(h=>{const d=k.get(h.url),b=ae.toLowerCase(),v=!ae||h.url.toLowerCase().includes(b)||d?.title&&d.title.toLowerCase().includes(b)||d?.description&&d.description.toLowerCase().includes(b)||h.customTitle&&h.customTitle.toLowerCase().includes(b)||h.categoryId&&h.categoryId.toLowerCase().includes(b),T=G==="all"||G==="valid"&&d?.status==="valid"||G==="invalid"&&d?.status&&d.status!=="valid"||G==="unchecked"&&!d;return v&&T}),Be=async()=>{if(await ge("Tem certeza que deseja resetar para os feeds padrão? Isso substituirá todos os seus feeds atuais pela coleção curada de 16 feeds organizados por categoria."))try{const d=pt();t(d),m(),await X(`✅ Feeds resetados com sucesso! Agora você tem ${d.length} feeds organizados por categoria.`),o.info("Feeds reset to defaults",{additionalData:{previousFeedCount:p.length,newFeedCount:d.length}})}catch(d){o.error("Failed to reset feeds to defaults",d),await O("Falha ao resetar feeds. Tente novamente.")}},je=async h=>{const d=h.target.files?.[0];if(d){const b=await d.text();try{const v=lt(b),T=[],I=new Set;v.forEach(A=>{if(!p.some(Ae=>Ae.url===A.url)){const Ae={url:A.url,customTitle:A.title};if(A.category){const Ze=A.category.toLowerCase().replace(/[^a-z0-9]/g,"-");Ae.categoryId=Ze,i.some(ht=>ht.id===Ze)||I.add(A.category)}T.push(Ae)}}),I.forEach(A=>{n(A,"#6B7280")}),T.length>0&&t(A=>[...A,...T]),await X(`${T.length} new feeds imported successfully!`)}catch(v){console.error("Error parsing OPML:",v),await O("Failed to parse OPML file")}}},ke=z.filter(h=>{const d=k.get(h.url);return!d||d.isValid}),We=z.filter(h=>{const d=k.get(h.url);return d&&!d.isValid}),He=z.filter(h=>!k.has(h.url)),[ne,ct]=g.useState(null),qe=h=>{ct(ne===h?null:h)},[dt,Ee]=g.useState(!1),[H,ut]=g.useState(null),Xe=(h,d)=>{d&&(ut({url:h,validation:d}),Ee(!0))};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-white/10 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex flex-col xl:flex-row xl:items-center justify-between bg-black/20 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"p-2 bg-[rgb(var(--color-accent))]/20 rounded-lg text-[rgb(var(--color-accent))]",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11c3.866 0 7 3.134 7 7m-7-7v7"})})}),c("feeds.title")]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1 ml-11",children:[p.length," ",c("feeds.stats.monitored")]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-blue-400 hover:bg-blue-400/10 rounded-lg transition-colors border border-transparent hover:border-blue-400/20",title:"Exportar Feeds (OPML)",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]}),e.jsxs("button",{onClick:()=>ue(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-green-400 hover:bg-green-400/10 rounded-lg transition-colors border border-transparent hover:border-green-400/20",title:c("feeds.import.lists"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"hidden sm:inline",children:"Listas"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-purple-400 hover:bg-purple-400/10 rounded-lg transition-colors cursor-pointer border border-transparent hover:border-purple-400/20",title:c("feeds.import.opml"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Importar OPML"}),e.jsx("input",{type:"file",accept:".opml,.xml",onChange:je,className:"hidden"})]}),e.jsx("div",{className:"h-6 w-px bg-white/10 mx-2 hidden sm:block"}),e.jsxs("button",{onClick:Be,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-yellow-400 hover:bg-yellow-400/10 rounded-lg transition-colors border border-transparent hover:border-yellow-400/20",title:"Restaurar Padrões",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"hidden sm:inline",children:"Resetar"})]}),e.jsxs("button",{onClick:()=>Le(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-orange-500 hover:bg-orange-500/10 rounded-lg transition-colors border border-transparent hover:border-orange-500/20",title:"Limpeza Inteligente de Feeds com Erro",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Erros"})]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors border border-transparent hover:border-red-500/20",title:"Excluir Todos os Feeds",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"hidden sm:inline",children:"Excluir Tudo"})]})]})]}),e.jsx(Ut,{isOpen:Fe,onClose:()=>Le(!1),feeds:p,onRemoveFeeds:h=>{t(d=>d.filter(b=>!h.includes(b.url))),localStorage.removeItem(`rss-cache-${h}`)}}),e.jsxs("div",{className:"flex border-b border-white/10 bg-black/10",children:[e.jsx("button",{onClick:()=>B("feeds"),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors ${_==="feeds"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11c3.866 0 7 3.134 7 7m-7-7v7"})}),c("feeds.tab.feeds")]})}),e.jsx("button",{onClick:()=>B("categories"),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors ${_==="categories"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),c("feeds.tab.categories")]})}),e.jsx("button",{onClick:()=>B("analytics"),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors ${_==="analytics"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c("feeds.tab.analytics")]})})]}),_==="feeds"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-white/5",children:[e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-4 sm:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:w,onChange:h=>F(h.target.value),placeholder:c("feeds.add.placeholder"),disabled:!!N,className:"w-full bg-black/20 text-white px-4 py-2 rounded-lg border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))] disabled:opacity-50 disabled:cursor-not-allowed"})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:V,onChange:h=>L(h.target.value),disabled:!!N,className:"w-full bg-black/20 text-white px-4 py-2 rounded-lg border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:c("feeds.category.none")}),i.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})}),e.jsx("button",{type:"submit",disabled:!!N,className:"px-6 py-2 bg-[rgb(var(--color-accent))] text-white rounded-lg hover:bg-[rgb(var(--color-accent))]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap min-w-[120px]",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:c("loading")})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:c("action.add")})]})})]}),N&&e.jsxs("div",{className:"mt-4 bg-black/30 rounded-lg p-3 border border-white/10 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-blue-300 font-medium flex items-center gap-2",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),ce.get(N)?.status||c("loading")]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(ce.get(N)?.progress||0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${ce.get(N)?.progress||5}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Isso pode levar alguns segundos dependendo da resposta do servidor."})]})]}),e.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/5 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:c("search.placeholder"),value:ae,onChange:h=>$(h.target.value),className:"w-full bg-black/20 text-white pl-10 pr-4 py-2 rounded-lg border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))]"})]}),e.jsxs("select",{value:G,onChange:h=>Te(h.target.value),className:"bg-black/20 text-white px-4 py-2 rounded-lg border border-white/10 focus:outline-none focus:border-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"valid",children:c("analytics.valid")}),e.jsx("option",{value:"invalid",children:c("analytics.issues")}),e.jsx("option",{value:"unchecked",children:c("analytics.pending")})]}),a&&e.jsx("button",{onClick:()=>{window.confirm("Deseja forçar a revalidação de todos os feeds? Isso pode levar alguns instantes.")&&a()},className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 p-2 rounded-lg border border-blue-500/20 transition-colors",title:"Forçar Revalidação de Todos os Feeds",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 mb-6 custom-scrollbar flex-grow p-4",role:"list","aria-label":`Current RSS feeds (${z.length} of ${p.length} feeds)`,children:[We.length>0&&e.jsxs("div",{className:"border border-red-500/20 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>qe("issues"),className:"w-full flex items-center justify-between p-4 bg-red-500/10 hover:bg-red-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-400",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("span",{className:"font-medium",children:[c("analytics.attention")," (",We.length,")"]})]}),e.jsx("svg",{className:`w-5 h-5 text-red-400 transform transition-transform ${ne==="issues"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ne==="issues"&&e.jsx("div",{className:"p-4 bg-black/20 space-y-2",children:We.map(h=>e.jsx(Ye,{feed:h,validation:k.get(h.url),onRemove:P,onRetry:x,onEdit:ee,onShowError:d=>Xe(d,k.get(d)),categories:i,onMoveCategory:d=>M(h.url,d,p,t)},h.url))})]}),ke.length>0&&e.jsxs("div",{className:"border border-green-500/20 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>qe("valid"),className:"w-full flex items-center justify-between p-4 bg-green-500/10 hover:bg-green-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"font-medium",children:[c("analytics.valid")," (",ke.length,")"]})]}),e.jsx("svg",{className:`w-5 h-5 text-green-400 transform transition-transform ${ne==="valid"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ne==="valid"&&e.jsx("div",{className:"p-4 bg-black/20 space-y-2",children:ke.map(h=>e.jsx(Ye,{feed:h,validation:k.get(h.url),onRemove:P,onRetry:x,onEdit:ee,onShowError:d=>Xe(d,k.get(d)),categories:i,onMoveCategory:d=>M(h.url,d,p,t)},h.url))})]}),He.length>0&&e.jsxs("div",{className:"border border-gray-500/20 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>qe("unchecked"),className:"w-full flex items-center justify-between p-4 bg-gray-500/10 hover:bg-gray-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"font-medium",children:[c("analytics.pending")," (",He.length,")"]})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${ne==="unchecked"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ne==="unchecked"&&e.jsx("div",{className:"p-4 bg-black/20 space-y-2",children:He.map(h=>e.jsx(Ye,{feed:h,validation:k.get(h.url),onRemove:P,onRetry:x,onEdit:ee,onShowError:d=>Xe(d,k.get(d)),categories:i,onMoveCategory:d=>M(h.url,d,p,t)},h.url))})]})]})]}):_==="categories"?e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(Et,{feeds:p,setFeeds:t,onClose:()=>B("feeds")})}):e.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:e.jsx($t,{feeds:p,articles:r,feedValidations:k})}),ve&&Q&&e.jsx(At,{isOpen:ve,onClose:l,originalUrl:Q.originalUrl,discoveredFeeds:Q.discoveredFeeds,onSelectFeed:we}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-4 pt-20 overflow-y-auto animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl max-w-md w-full p-6 animate-in zoom-in-95 duration-200 my-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:c("feeds.import_curated.title")}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:c("feeds.import_curated.select")}),e.jsxs("select",{value:ie,onChange:h=>Oe(h.target.value),className:"w-full bg-black/30 text-white rounded-lg px-4 py-2 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"br",children:"🇧🇷 Brasil Tech & Ciência"}),e.jsx("option",{value:"intl",children:"🌎 International Tech & Ciência"}),e.jsx("option",{value:"default",children:"📱 Pacote Inicial Padrão"})]})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-sm text-blue-200",children:[ie==="br"&&"Uma coleção curada das melhores fontes brasileiras de tecnologia, ciência e notícias.",ie==="intl"&&"Publicações internacionais de tecnologia e ciência de alto nível.",ie==="default"&&"A coleção inicial padrão de feeds essenciais de tecnologia."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>be("merge"),className:"flex-1 bg-[rgb(var(--color-accent))] hover:bg-[rgb(var(--color-accent))]/90 text-white py-2 rounded-lg transition-colors font-medium",children:c("feeds.import_curated.merge")}),e.jsx("button",{onClick:()=>be("replace"),className:"flex-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 py-2 rounded-lg transition-colors font-medium",children:c("feeds.import_curated.replace")})]}),e.jsx("button",{onClick:()=>ue(!1),className:"w-full mt-3 text-gray-400 hover:text-white text-sm py-2",children:c("action.cancel")})]})}),dt&&H&&it.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-red-400",children:"⚠️"}),"Detalhes do Erro"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 font-mono break-all",children:H.url})]}),e.jsx("button",{onClick:()=>Ee(!1),className:"text-gray-400 hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-red-400 font-bold uppercase text-xs tracking-wider",children:"Status Atual"}),e.jsx("p",{className:"text-white font-medium text-lg",children:Dt(H.validation.status)}),e.jsx("p",{className:"text-red-300 mt-1",children:H.validation.error||"Erro desconhecido durante validação."})]}),H.validation.suggestions&&H.validation.suggestions.length>0&&e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-blue-400 font-bold uppercase text-xs tracking-wider",children:"Sugestões de Correção"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:H.validation.suggestions.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Logs de Tentativas"}),e.jsxs("div",{className:"bg-black/30 rounded-lg border border-white/5 overflow-hidden",children:[H.validation.validationAttempts?.map((h,d)=>e.jsxs("div",{className:"border-b border-white/5 last:border-0 p-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:`font-mono font-bold ${h.success?"text-green-400":"text-red-400"}`,children:["Tentativa #",h.attemptNumber," (",h.method,")"]}),e.jsxs("span",{className:"text-gray-500 text-xs",children:[h.responseTime,"ms"]})]}),h.statusCode&&e.jsxs("div",{className:"text-gray-400 text-xs mb-1",children:["Status HTTP: ",e.jsx("span",{className:"text-white",children:h.statusCode})]}),h.error&&e.jsx("div",{className:"text-red-400/80 text-xs font-mono bg-red-900/10 p-2 rounded mt-1",children:h.error.message})]},d)),(!H.validation.validationAttempts||H.validation.validationAttempts.length===0)&&e.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Nenhum log detalhado disponível."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/10 bg-black/20 flex justify-end gap-3",children:[e.jsxs("button",{onClick:()=>{x(H.url),Ee(!1)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Tentar Novamente"]}),e.jsx("button",{onClick:()=>Ee(!1),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors font-medium",children:"Fechar"})]})]})}),document.body),S?.show&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"flex-shrink-0 bg-yellow-500/10 p-3 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:c("feeds.duplicate.title")}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:c("feeds.duplicate.message")})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-white/5",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold mb-2",children:c("feeds.duplicate.existing")}),e.jsx("div",{className:"text-white font-medium text-lg mb-1",children:S.result.duplicateOf?.customTitle||S.result.duplicateOf?.url}),e.jsx("div",{className:"text-[rgb(var(--color-accent))] text-sm font-mono truncate",children:S.result.duplicateOf?.url})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-white/5",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold mb-2",children:c("feeds.duplicate.new")}),e.jsx("div",{className:"text-white font-medium text-lg mb-1",children:S.newUrl})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 px-2",children:[e.jsxs("span",{children:[c("feeds.duplicate.confidence"),":"]}),e.jsxs("span",{className:`font-bold ${S.result.confidence>.9?"text-red-400":S.result.confidence>.7?"text-yellow-400":"text-green-400"}`,children:[Math.round(S.result.confidence*100),"%"]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:Re,className:"w-full bg-gray-700 hover:bg-gray-600 text-white px-4 py-3 rounded-xl transition-all font-medium",children:c("feeds.action.cancel_dont_add")}),e.jsx("button",{onClick:he,className:"w-full bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-3 rounded-xl transition-all font-medium shadow-lg shadow-yellow-600/20",children:c("feeds.action.replace")}),e.jsx("button",{onClick:De,className:"w-full bg-transparent border border-white/10 hover:bg-white/5 text-gray-300 hover:text-white px-4 py-3 rounded-xl transition-all font-medium",children:c("feeds.action.add_anyway")})]})]})})]})};export{Ht as FeedManager};
