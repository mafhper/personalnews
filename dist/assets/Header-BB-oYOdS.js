import{r as n,a as V,j as e}from"./performance-BuPgOiMU.js";import{h as le,s as ne,j as Y,k as ie,l as ce}from"./services-CCwIs3xp.js";import{u as de,a as X,b as Z,r as ue,P as he}from"./index-DgGObAZ7.js";import{u as ge}from"./useNotificationReplacements-C-4jLxqd.js";import"./react-vendor-DlBnNAMw.js";function xe(t,c={}){const{debounceMs:h=300,minQueryLength:m=2,...g}=c,[r,b]=n.useState(""),[x,i]=n.useState(""),[u,f]=n.useState([]),[d,C]=n.useState(!1),y=n.useMemo(()=>t.length===0?null:le(t),[t]);n.useEffect(()=>{C(!0);const j=setTimeout(()=>{i(r),C(!1)},h);return()=>{clearTimeout(j)}},[r,h]),n.useEffect(()=>{if(!y||!x.trim()||x.length<m){f([]);return}const j=ne(y,x,g);f(j)},[y,x,m,g.includeTitle,g.includeContent,g.includeCategories,g.includeSource,g.fuzzyThreshold]);const N=u.length>0;return{query:r,setQuery:b,results:u,isSearching:d,hasResults:N,searchIndex:y}}function me(t=10){const[c,h]=n.useState(()=>{try{const r=localStorage.getItem("searchHistory");return r?JSON.parse(r):[]}catch{return[]}}),m=n.useCallback(r=>{r.trim()&&h(b=>{const x=b.filter(u=>u!==r),i=[r,...x].slice(0,t);try{localStorage.setItem("searchHistory",JSON.stringify(i))}catch{}return i})},[t]),g=n.useCallback(()=>{h([]);try{localStorage.removeItem("searchHistory")}catch{}},[]);return{searchHistory:c,addToHistory:m,clearHistory:g}}function fe(t,c,h=5){const[m,g]=n.useState([]);return n.useEffect(()=>{if(!t||!c.trim()||c.length<2){g([]);return}const r=c.toLowerCase(),b=new Set;t.titleIndex.forEach((i,u)=>{u.startsWith(r)&&u!==r&&b.add(u)}),t.categoryIndex.forEach((i,u)=>{u.startsWith(r)&&u!==r&&b.add(u)});const x=Array.from(b).sort((i,u)=>i.length-u.length).slice(0,h);g(x)},[t,c,h]),m}const be=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ve=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),pe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),we=({articles:t,onSearch:c,onResultsChange:h,placeholder:m="Search articles... (Ctrl+K)",debounceMs:g=300,showFilters:r=!0,className:b=""})=>{const[x,i]=n.useState(!1),[u,f]=n.useState(!1),[d,C]=n.useState({category:void 0,dateRange:"all",source:void 0}),[y,N]=n.useState(-1),j=n.useRef(null),M=n.useRef(null),{query:v,setQuery:S,results:$,isSearching:T,hasResults:z,searchIndex:E}=xe(t,{debounceMs:g,includeTitle:!0,includeContent:!0,includeCategories:!0,includeSource:!0}),{searchHistory:L,addToHistory:a}=me(),k=fe(E,v,5),K=V.useMemo(()=>{const s=new Set;return t.forEach(l=>{l.categories?.forEach(w=>s.add(w))}),Array.from(s).sort()},[t]),U=V.useMemo(()=>{const s=new Set;return t.forEach(l=>{s.add(l.sourceTitle)}),Array.from(s).sort()},[t]),P=V.useMemo(()=>{let s=$.map(l=>l.article);if(d.category&&d.category!=="all"&&(s=s.filter(l=>l.categories?.includes(d.category))),d.source&&d.source!=="all"&&(s=s.filter(l=>l.sourceTitle===d.source)),d.dateRange&&d.dateRange!=="all"){const l=new Date,w=new Date;switch(d.dateRange){case"today":w.setHours(0,0,0,0);break;case"week":w.setDate(l.getDate()-7);break;case"month":w.setMonth(l.getMonth()-1);break}s=s.filter(B=>new Date(B.pubDate)>=w)}return s},[$,d]);n.useEffect(()=>{const s=l=>{(l.ctrlKey||l.metaKey)&&l.key==="k"&&(l.preventDefault(),i(!0),setTimeout(()=>j.current?.focus(),100)),l.key==="Escape"&&x&&(i(!1),S(""),N(-1))};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[x,S]);const H=s=>{const l=k.length+L.length;switch(s.key){case"ArrowDown":s.preventDefault(),N(w=>w<l-1?w+1:-1);break;case"ArrowUp":s.preventDefault(),N(w=>w>-1?w-1:l-1);break;case"Enter":if(s.preventDefault(),y>=0){const B=[...k,...L][y];S(B),N(-1)}else v.trim()&&A();break;case"Tab":if(y>=0){s.preventDefault();const B=[...k,...L][y];S(B),N(-1)}break}},A=n.useCallback(()=>{v.trim()&&(a(v),c(v,d),i(!1))},[v,d,c,a]);n.useEffect(()=>{h?.(P)},[P,h]),n.useEffect(()=>{const s=l=>{M.current&&!M.current.contains(l.target)&&i(!1)};if(x)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[x]);const W=(s,l)=>{C(w=>({...w,[s]:l==="all"?void 0:l}))},O=()=>{S(""),C({category:void 0,dateRange:"all",source:void 0}),N(-1),h?.([])},I=s=>{if(!v.trim())return Y(s);const l=Y(s);return e.jsx("span",{dangerouslySetInnerHTML:{__html:ie(l,v)}})};return e.jsxs("div",{ref:M,className:`relative ${b}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(be,{})}),e.jsx("input",{ref:j,type:"text",value:v,onChange:s=>S(s.target.value),onKeyDown:H,onFocus:()=>i(!0),placeholder:m,className:"w-full pl-10 pr-20 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent","aria-label":"Search articles","aria-expanded":x,"aria-haspopup":"listbox",role:"combobox"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[v&&e.jsx("button",{onClick:O,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Clear search",children:e.jsx(pe,{})}),r&&e.jsx("button",{onClick:()=>f(!u),className:`p-1 transition-colors ${u?"text-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle filters",children:e.jsx(ve,{})})]})]}),x&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[u&&e.jsx("div",{className:"p-4 border-b border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:d.category||"all",onChange:s=>W("category",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Categories"}),K.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date Range"}),e.jsxs("select",{value:d.dateRange||"all",onChange:s=>W("dateRange",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Source"}),e.jsxs("select",{value:d.source||"all",onChange:s=>W("source",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Sources"}),U.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),v.trim()&&e.jsxs("div",{children:[T&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Searching..."}),!T&&z&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:[P.length," result",P.length!==1?"s":""]}),P.slice(0,10).map((s,l)=>e.jsxs("div",{className:"p-4 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",onClick:()=>window.open(s.link,"_blank"),children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:I(s.title)}),s.description&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:I(s.description)}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:s.sourceTitle}),e.jsx("span",{children:new Date(s.pubDate).toLocaleDateString()})]})]},`${s.link}-${l}`))]}),!T&&!z&&e.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',v,'"']})]}),!v.trim()&&(k.length>0||L.length>0)&&e.jsxs("div",{children:[k.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Suggestions"}),k.map((s,l)=>e.jsx("button",{onClick:()=>S(s),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${y===l?"bg-gray-700":""}`,children:s},s))]}),L.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Recent Searches"}),L.slice(0,5).map((s,l)=>e.jsx("button",{onClick:()=>S(s),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${y===k.length+l?"bg-gray-700":""}`,children:s},s))]})]}),!v.trim()&&k.length===0&&L.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Start typing to search articles..."})]})]})},ye=({size:t="md",className:c="",onClick:h,isClickable:m=!1,customSrc:g,useThemeColor:r=!1})=>{const b={sm:"w-6 h-6",md:"w-7 h-7",lg:"w-16 h-16"},x=m?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"",i="",u=()=>{if(g?.trim().startsWith("<svg")){const d=ce.sanitize(g,{USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["use"],ADD_ATTR:["href","xlink:href"]});return e.jsx("div",{className:`w-full h-full [&>svg]:w-full [&>svg]:h-full ${r?"text-[rgb(var(--color-accent))] [&>svg]:fill-current [&>svg_path]:fill-current":""}`,dangerouslySetInnerHTML:{__html:d}})}const f=g||"/personalnews/assets/logo.svg";return r?e.jsx("div",{className:"w-full h-full bg-[rgb(var(--color-accent))]",style:{maskImage:`url(${f})`,maskSize:"contain",maskRepeat:"no-repeat",maskPosition:"center",WebkitMaskImage:`url(${f})`,WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}):e.jsx("img",{src:f,alt:"Personal News Logo",className:"w-full h-full object-contain"})};return e.jsx("div",{className:`${b[t]} ${i} flex items-center justify-center ${c} ${x}`,onClick:h,title:m?"Ir para a página inicial":void 0,children:e.jsx(u,{})})},F=({className:t="",size:c="md",showBackground:h=!0,isActive:m=!1,onClick:g,title:r,children:b})=>{const x={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},i={xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},u=g?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"",f=g?m?"bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-400 hover:to-blue-600":"bg-gradient-to-br from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700":m?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-gray-600 to-gray-800";return h?e.jsx("div",{className:`${x[c]} ${f} rounded-lg flex items-center justify-center ${t} ${u}`,onClick:g,title:r,children:e.jsx("div",{className:`${i[c]} text-white`,children:b})}):e.jsx("div",{className:`${i[c]} text-white ${t} ${u}`,onClick:g,title:r,children:b})},R={Refresh:t=>e.jsx(F,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Favorites:t=>e.jsx(F,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Menu:t=>e.jsx(F,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),Feeds:t=>e.jsx(F,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Settings:t=>e.jsx(F,{...t,children:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ChevronDown:t=>e.jsx(F,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})},je=[{value:"",labelKey:"layout.default"},{value:"bento",labelKey:"layout.bento"},{value:"brutalist",labelKey:"layout.brutalist"},{value:"compact",labelKey:"layout.compact"},{value:"cyberpunk",labelKey:"layout.cyberpunk"},{value:"focus",labelKey:"layout.focus"},{value:"gallery",labelKey:"layout.gallery"},{value:"immersive",labelKey:"layout.immersive"},{value:"list",labelKey:"layout.list"},{value:"grid",labelKey:"layout.grid"},{value:"masonry",labelKey:"layout.masonry"},{value:"minimal",labelKey:"layout.minimal"},{value:"modern",labelKey:"layout.modern"},{value:"newspaper",labelKey:"layout.newspaper"},{value:"pocketfeeds",labelKey:"layout.pocketfeeds"},{value:"split",labelKey:"layout.split"},{value:"terminal",labelKey:"layout.terminal"},{value:"timeline",labelKey:"layout.timeline"}],ke=[{value:"",label:"Padrão (Global)"},{value:"static",label:"Estático"},{value:"sticky",label:"Fixo (Sticky)"},{value:"floating",label:"Flutuante"},{value:"hidden",label:"Oculto"}],Ce=t=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(t).hostname}&sz=32`}catch{return""}},Q=t=>{try{return new URL(t).hostname.replace(/^www\./,"")}catch{return t}},J=({category:t,feeds:c,onSelectFeed:h,onSelectCategory:m,selectedCategory:g,onEditCategory:r})=>{const{updateCategory:b,deleteCategory:x}=de();X();const{confirmDanger:i,alertSuccess:u}=ge(),{t:f}=Z(),[d,C]=n.useState(!1),[y,N]=n.useState(null),j=n.useRef(null),M=n.useRef(null),v=()=>{if(M.current&&clearTimeout(M.current),j.current){const a=j.current.getBoundingClientRect();N({top:a.bottom+16,left:a.left})}C(!0)},S=()=>{M.current=setTimeout(()=>{C(!1)},200)};n.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const $=async a=>{a.stopPropagation(),b(t.id,{isPinned:!t.isPinned})},T=async a=>{a.stopPropagation(),await i(f("confirm.category_delete")+` "${t.name}"?`)&&(x(t.id),u(f("alert.category_deleted_success")))},z=a=>{b(t.id,{layoutMode:a.target.value})},E=a=>{const k=a.target.value;b(t.id,{headerPosition:k||void 0})},L=g===t.id;return e.jsxs("div",{className:"relative group",ref:j,onMouseEnter:v,onMouseLeave:S,children:[e.jsxs("button",{onClick:m,"aria-label":`Select category ${t.name}`,"aria-expanded":d,className:`
          flex items-center space-x-2 px-5 py-2.5 rounded-full transition-all duration-300 ease-out min-h-[44px]
          ${L?"bg-white/10 text-white shadow-[0_0_20px_rgba(var(--color-primary),0.4)] border border-white/20 backdrop-blur-md":"text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"}
        `,children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-500 ${L?"shadow-[0_0_10px_currentColor] scale-125":"opacity-70"}`,style:{backgroundColor:t.color,color:t.color}}),e.jsx("span",{className:`font-medium text-sm tracking-wide transition-all duration-300 ${L?"text-white":"text-gray-300 group-hover:text-white"}`,children:t.name}),e.jsx(R.ChevronDown,{size:"xs",className:`transition-transform duration-500 ease-out ${d?"rotate-180 text-white":"text-gray-500 group-hover:text-gray-300"}`})]}),d&&y&&ue.createPortal(e.jsx("div",{onMouseEnter:v,onMouseLeave:S,style:{top:y.top,left:y.left},className:`
            fixed w-96 z-[9999]
            bg-[#0a0a0c]/95 backdrop-blur-2xl border border-white/10
            rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] overflow-hidden
            transition-all duration-200 origin-top-left
            animate-in fade-in slide-in-from-top-2
          `,children:e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-white/5 mb-1 flex items-center justify-between bg-white/5",children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[f("feeds.tab.feeds")," de ",t.name]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative group/layout",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-white/10 min-w-[32px] min-h-[32px] ${t.layoutMode?"text-[rgb(var(--color-accent))]":"text-gray-400"}`,title:"Alterar Layout da Categoria","aria-label":"Alterar Layout da Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:t.layoutMode||"",onChange:z,onClick:a=>a.stopPropagation(),title:"Alterar Layout da Categoria",children:je.map(a=>e.jsxs("option",{value:a.value,children:[f(a.labelKey)," ",(t.layoutMode||"")===a.value?" ✓":""]},a.labelKey))})]}),e.jsxs("div",{className:"relative group/header",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-white/10 min-w-[32px] min-h-[32px] ${t.headerPosition?"text-[rgb(var(--color-accent))]":"text-gray-400"}`,title:"Posição do Cabeçalho","aria-label":"Posição do Cabeçalho",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:t.headerPosition||"",onChange:E,onClick:a=>a.stopPropagation(),title:"Posição do Cabeçalho",children:ke.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsx("button",{onClick:$,className:`p-2 rounded hover:bg-white/10 min-w-[32px] min-h-[32px] ${t.isPinned?"text-[rgb(var(--color-accent))]":"text-gray-400"}`,title:t.isPinned?"Desafixar Categoria":"Fixar Categoria","aria-label":t.isPinned?"Desafixar Categoria":"Fixar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:t.isPinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),r&&e.jsx("button",{onClick:a=>{a.stopPropagation(),r(t.id),C(!1)},className:"p-2 rounded hover:bg-white/10 text-gray-400 min-w-[32px] min-h-[32px]",title:"Editar Categoria","aria-label":"Editar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),!t.isDefault&&e.jsx("button",{onClick:T,className:"p-2 rounded hover:bg-red-500/20 text-gray-400 hover:text-red-400 min-w-[32px] min-h-[32px]",title:"Excluir Categoria","aria-label":"Excluir Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto custom-scrollbar py-1",children:[c.map(a=>e.jsxs("button",{onClick:()=>{h(a.url),C(!1)},className:"w-full text-left px-4 py-3 text-sm text-gray-300 hover:bg-white/10 hover:text-white transition-colors flex items-center space-x-3 group min-h-[44px]","aria-label":`Select feed ${a.customTitle||Q(a.url)}`,children:[e.jsx("img",{src:Ce(a.url),alt:"",className:"w-4 h-4 rounded-sm opacity-70 group-hover:opacity-100 transition-opacity",onError:k=>{k.target.style.display="none"}}),e.jsx("span",{className:"truncate flex-1",children:a.customTitle||Q(a.url)})]},a.url)),c.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"text-gray-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"text-sm text-gray-500",children:f("feeds.category.empty")})]})]})]})}),document.body)]})},Te=t=>{const[c,h]=n.useState(!1),[m,g]=n.useState(!1),{headerConfig:r}=X(),[b,x]=n.useState(!1),{t:i}=Z(),[u,f]=n.useState(!0),d=n.useRef(null),C=n.useRef(0),[y,N]=n.useState(!0),j=n.useRef(null);n.useEffect(()=>{const o=()=>{N(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{window.scrollY>100&&N(!1)},3e3)},p=setTimeout(()=>{window.scrollY>100&&N(!1)},3e3);return window.addEventListener("scroll",o),window.addEventListener("touchmove",o),window.addEventListener("touchstart",o),()=>{window.removeEventListener("scroll",o),window.removeEventListener("touchmove",o),window.removeEventListener("touchstart",o),j.current&&clearTimeout(j.current),clearTimeout(p)}},[]),n.useEffect(()=>{const o=()=>{const p=window.scrollY;g(p>10),r.position==="hidden"&&(p<C.current||p<50?(f(!0),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{window.scrollY>50&&f(!1)},3e3)):p>C.current&&p>100&&f(!1),C.current=p)};return window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o),d.current&&clearTimeout(d.current)}},[r.position]),n.useEffect(()=>{r.customTitle&&(document.title=r.customTitle);const o=document.querySelector("link[rel~='icon']");if(o&&r.logoUrl)if(r.logoUrl.trim().startsWith("<svg")){const p=r.logoUrl,D=encodeURIComponent(p);o.href=`data:image/svg+xml;charset=utf-8,${D}`}else o.href=r.logoUrl},[r.customTitle,r.logoUrl]);const M={static:"relative w-full",sticky:"sticky top-0 z-50 w-full",floating:"fixed top-2 left-1/2 -translate-x-1/2 w-[95%] max-w-7xl rounded-xl border-[rgba(255,255,255,0.08)] md:top-4 md:rounded-2xl z-50",hidden:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-in-out ${u?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`},v={default:"justify-between gap-4",centered:"justify-between lg:justify-center lg:relative gap-4",minimal:"justify-between gap-4"},S={"ultra-compact":"h-8 lg:h-10",tiny:"h-10 lg:h-12",compact:"h-12 lg:h-14",normal:"h-14 lg:h-16",spacious:"h-16 lg:h-20"},$=r.position==="floating",T=r.style==="centered",z=r.style==="minimal",E=t.categories.filter(o=>o.isPinned||(t.categorizedFeeds[o.id]||[]).length>0),L=r.bgOpacity??.9,a=r.borderOpacity??8,k=r.bgColor||r.backgroundColor||"#0a0a0c",K=r.borderColor??"#ffffff",P=`backdrop-blur-[${r.blur??10}px]`,H=(o,p)=>{const D=parseInt(o.slice(1,3),16),oe=parseInt(o.slice(3,5),16),ae=parseInt(o.slice(5,7),16);return`rgba(${D},${oe},${ae},${p})`},A=H(k,L),W=H(K,a/100),O=r.categoryBackgroundColor??"#ffffff",I=r.categoryBackgroundOpacity??3,s=H(O,I/100),l=n.useRef(null),[w,B]=n.useState(!1),[q,ee]=n.useState(!1),_=()=>{if(l.current){const{scrollLeft:o,scrollWidth:p,clientWidth:D}=l.current;B(o>5),ee(o<p-D-5)}};n.useEffect(()=>(_(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)),[E]);const G=o=>{if(l.current){const D=o==="left"?l.current.scrollLeft-200:l.current.scrollLeft+200;l.current.scrollTo({left:D,behavior:"smooth"})}},te=o=>{switch(o){case"sm":return"w-6 h-6";case"lg":return"w-12 h-12";case"md":default:return"w-8 h-8"}},re={"ultra-compact":"h-12 lg:h-14",tiny:"h-14 lg:h-16",compact:"h-16 lg:h-18",normal:"h-18 lg:h-20",spacious:"h-20 lg:h-24"},se=r.position==="hidden"||r.position==="floating";return e.jsxs(e.Fragment,{children:[se&&e.jsx("div",{className:`${re[r.height]}`}),e.jsx("header",{className:`${M[r.position]} z-30 transition-all duration-300 ${P} ${m||$?"shadow-lg":""}
        ${m&&!$?"border-b":""} 
        `,style:{backgroundColor:A,borderBottomColor:m&&!$?W:"transparent"},children:e.jsxs("div",{className:`mx-auto px-3 sm:px-4 ${$?"":"container"} ${$?"rounded-xl md:rounded-2xl":""} overflow-hidden`,children:[e.jsx("div",{className:"md:hidden w-full py-2",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar w-full",style:{scrollbarWidth:"none"},children:e.jsx("div",{className:"flex items-center justify-center min-w-full space-x-2",children:E.map(o=>e.jsx("button",{onClick:()=>t.onNavigation(o.id),className:`flex-shrink-0 px-4 py-2 rounded-full text-xs font-medium border transition-all whitespace-nowrap min-h-[32px] ${t.selectedCategory===o.id?"bg-[rgb(var(--color-primary))] text-white border-[rgb(var(--color-primary))] shadow-lg":"bg-[rgba(255,255,255,0.05)] text-gray-300 border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.1)]"}`,children:o.name},o.id))})})}),e.jsxs("div",{className:`
            flex items-center transition-all duration-300 
            ${r.showLogo!==!1||r.showTitle?S[r.height]:"h-auto py-2"}
            ${v[r.style]}
            ${y?"flex":"hidden md:flex"}
          `,children:[e.jsxs("div",{className:`flex items-center space-x-4 group flex-shrink-0 ${T?"lg:absolute lg:left-4":""}`,children:[r.showLogo!==!1&&e.jsxs("div",{className:"relative cursor-pointer",onClick:t.onGoHome,children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-secondary))] rounded-full opacity-0 group-hover:opacity-20 blur-md transition-opacity duration-500"}),e.jsx("div",{className:"relative z-10",children:r.customLogoSvg?e.jsx("div",{className:`
                            ${te(r.logoSize)}
                            ${r.logoColorMode==="theme"?"text-[rgb(var(--color-accent))]":""}
                            [&>svg]:w-full [&>svg]:h-full
                            ${r.logoColorMode!=="original"?"[&_*:not([fill='none'])]:!fill-current [&_*:not([stroke='none'])]:!stroke-current":""}
                        `,style:{color:r.logoColorMode==="custom"?r.logoColor:void 0},dangerouslySetInnerHTML:{__html:r.customLogoSvg}},r.logoColorMode):e.jsx(ye,{size:r.logoSize,isClickable:!0,onClick:t.onGoHome,customSrc:r.logoUrl,useThemeColor:r.useThemeColor})})]}),r.showTitle?e.jsx("h1",{className:"font-bold tracking-tight cursor-pointer pb-1 text-xl truncate max-w-[150px] md:max-w-none",onClick:t.onGoHome,style:{color:r.titleGradient?.enabled?void 0:r.titleColor||"rgb(var(--color-text))"},children:r.titleGradient?.enabled?e.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(${r.titleGradient.direction||"to right"}, ${r.titleGradient.from}, ${r.titleGradient.to})`},children:r.customTitle||i("app.title")}):e.jsx("span",{children:r.customTitle||i("app.title")})}):e.jsx("h1",{className:"sr-only",children:i("app.title")})]}),!T&&e.jsxs("div",{className:"hidden md:flex flex-1 items-center justify-center relative group/scroll px-2 overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 z-10 transition-all duration-300 ${w?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("left"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll left",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})})}),e.jsx("div",{ref:l,onScroll:_,className:`flex items-center space-x-1 p-1 rounded-full text-xs font-medium transition-all overflow-x-auto no-scrollbar max-w-full scroll-smooth ${z?"":"border backdrop-blur-sm"}`,style:{...z?{}:{backgroundColor:s,borderColor:H("#ffffff",.05)},scrollbarWidth:"none"},children:E.map(o=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{category:o,feeds:t.categorizedFeeds[o.id]||[],onSelectFeed:p=>t.onNavigation(o.id,p),onSelectCategory:()=>t.onNavigation(o.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick})},o.id))}),e.jsx("div",{className:`absolute right-0 z-10 transition-all duration-300 ${q?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("right"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll right",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})})]}),T&&e.jsx("div",{className:`hidden lg:flex items-center space-x-1 p-1 rounded-full transition-all flex-grow justify-center ${z?"":"border backdrop-blur-sm"}`,style:z?{}:{backgroundColor:s,borderColor:H("#ffffff",.05)},children:E.map(o=>e.jsx(J,{category:o,feeds:t.categorizedFeeds[o.id]||[],onSelectFeed:p=>t.onNavigation(o.id,p),onSelectCategory:()=>t.onNavigation(o.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick},o.id))}),e.jsxs("div",{className:`flex items-center justify-end space-x-2 flex-shrink-0 ${T?"lg:absolute lg:right-4":""}`,children:[t.onPageChange&&t.totalPages&&t.totalPages>1&&e.jsx("div",{className:"hidden md:block",children:e.jsx(he,{currentPage:t.currentPage||0,totalPages:t.totalPages,onPageChange:t.onPageChange,compact:!0})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx("button",{onClick:t.onRefreshClick,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.refresh"),"aria-label":i("header.refresh"),children:e.jsx(R.Refresh,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenFavorites,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-accent))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.favorites"),"aria-label":i("header.favorites"),children:e.jsx(R.Favorites,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenSettings,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:"Configurações","aria-label":"Configurações",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:t.onManageFeedsClick,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-primary))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.manage_feeds"),"aria-label":i("header.manage_feeds"),children:e.jsx(R.Feeds,{showBackground:!1,size:"md"})})]}),e.jsx("div",{className:"lg:hidden ml-2",children:e.jsx("button",{onClick:()=>h(!c),className:`p-2 rounded-lg transition-colors ${c?"bg-[rgba(255,255,255,0.1)] text-white":"text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.05)]"}`,"aria-label":"Menu",children:e.jsx(R.Menu,{showBackground:!1,size:"md",isActive:c})})})]})]})]})}),e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden transition-opacity duration-300 ${c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>h(!1)}),e.jsx("div",{className:`absolute top-0 right-0 bottom-0 w-[80%] max-w-sm bg-[rgb(var(--color-surface))] border-l border-[rgba(255,255,255,0.08)] shadow-2xl transform transition-transform duration-300 ${c?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:i("header.menu")}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400 hover:text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto flex-1",children:[e.jsx("div",{className:"relative",children:e.jsx(we,{articles:t.articles,onSearch:t.onSearch,onResultsChange:t.onSearchResultsChange,placeholder:i("search.placeholder"),className:"w-full"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{t.onManageFeedsClick(),h(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(139,92,246,0.1)] text-[rgb(var(--color-primary))] rounded-xl font-medium border border-[rgba(139,92,246,0.2)]",children:[e.jsx(R.Feeds,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("feeds.tab.feeds")})]}),e.jsxs("button",{onClick:()=>{t.onOpenFavorites(),h(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Favorites,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("header.favorites")})]}),e.jsxs("button",{onClick:()=>{t.onOpenSettings(),h(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Settings,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("settings.title")})]}),e.jsxs("button",{onClick:()=>{t.onRefreshClick(),h(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Refresh,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("action.refresh")})]})]})]})]})})]})]})};export{Te as default};
