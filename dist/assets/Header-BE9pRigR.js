import{r as n,R as V,j as e}from"./performance-DuI-sttC.js";import{h as le,s as ne,j as Y,k as ie,l as ce}from"./services-BY3oiKYC.js";import{u as de,a as X,b as Z,r as ue}from"./index-DL0dXV3Z.js";import{u as he}from"./useNotificationReplacements-D8oxKamb.js";import"./react-vendor-Cgg2GOmP.js";function ge(t,c={}){const{debounceMs:d=300,minQueryLength:x=2,...g}=c,[r,f]=n.useState(""),[m,i]=n.useState(""),[h,w]=n.useState([]),[u,C]=n.useState(!1),y=n.useMemo(()=>t.length===0?null:le(t),[t]);n.useEffect(()=>{C(!0);const j=setTimeout(()=>{i(r),C(!1)},d);return()=>{clearTimeout(j)}},[r,d]),n.useEffect(()=>{if(!y||!m.trim()||m.length<x){w([]);return}const j=ne(y,m,g);w(j)},[y,m,x,g.includeTitle,g.includeContent,g.includeCategories,g.includeSource,g.fuzzyThreshold]);const N=h.length>0;return{query:r,setQuery:f,results:h,isSearching:u,hasResults:N,searchIndex:y}}function xe(t=10){const[c,d]=n.useState(()=>{try{const r=localStorage.getItem("searchHistory");return r?JSON.parse(r):[]}catch{return[]}}),x=n.useCallback(r=>{r.trim()&&d(f=>{const m=f.filter(h=>h!==r),i=[r,...m].slice(0,t);try{localStorage.setItem("searchHistory",JSON.stringify(i))}catch{}return i})},[t]),g=n.useCallback(()=>{d([]);try{localStorage.removeItem("searchHistory")}catch{}},[]);return{searchHistory:c,addToHistory:x,clearHistory:g}}function me(t,c,d=5){const[x,g]=n.useState([]);return n.useEffect(()=>{if(!t||!c.trim()||c.length<2){g([]);return}const r=c.toLowerCase(),f=new Set;t.titleIndex.forEach((i,h)=>{h.startsWith(r)&&h!==r&&f.add(h)}),t.categoryIndex.forEach((i,h)=>{h.startsWith(r)&&h!==r&&f.add(h)});const m=Array.from(f).sort((i,h)=>i.length-h.length).slice(0,d);g(m)},[t,c,d]),x}const fe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),be=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),ve=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),pe=({articles:t,onSearch:c,onResultsChange:d,placeholder:x="Search articles... (Ctrl+K)",debounceMs:g=300,showFilters:r=!0,className:f=""})=>{const[m,i]=n.useState(!1),[h,w]=n.useState(!1),[u,C]=n.useState({category:void 0,dateRange:"all",source:void 0}),[y,N]=n.useState(-1),j=n.useRef(null),M=n.useRef(null),{query:b,setQuery:S,results:$,isSearching:T,hasResults:z,searchIndex:E}=ge(t,{debounceMs:g,includeTitle:!0,includeContent:!0,includeCategories:!0,includeSource:!0}),{searchHistory:L,addToHistory:a}=xe(),k=me(E,b,5),K=V.useMemo(()=>{const o=new Set;return t.forEach(l=>{l.categories?.forEach(p=>o.add(p))}),Array.from(o).sort()},[t]),U=V.useMemo(()=>{const o=new Set;return t.forEach(l=>{o.add(l.sourceTitle)}),Array.from(o).sort()},[t]),H=V.useMemo(()=>{let o=$.map(l=>l.article);if(u.category&&u.category!=="all"&&(o=o.filter(l=>l.categories?.includes(u.category))),u.source&&u.source!=="all"&&(o=o.filter(l=>l.sourceTitle===u.source)),u.dateRange&&u.dateRange!=="all"){const l=new Date,p=new Date;switch(u.dateRange){case"today":p.setHours(0,0,0,0);break;case"week":p.setDate(l.getDate()-7);break;case"month":p.setMonth(l.getMonth()-1);break}o=o.filter(D=>new Date(D.pubDate)>=p)}return o},[$,u]);n.useEffect(()=>{const o=l=>{(l.ctrlKey||l.metaKey)&&l.key==="k"&&(l.preventDefault(),i(!0),setTimeout(()=>j.current?.focus(),100)),l.key==="Escape"&&m&&(i(!1),S(""),N(-1))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[m,S]);const B=o=>{const l=k.length+L.length;switch(o.key){case"ArrowDown":o.preventDefault(),N(p=>p<l-1?p+1:-1);break;case"ArrowUp":o.preventDefault(),N(p=>p>-1?p-1:l-1);break;case"Enter":if(o.preventDefault(),y>=0){const D=[...k,...L][y];S(D),N(-1)}else b.trim()&&A();break;case"Tab":if(y>=0){o.preventDefault();const D=[...k,...L][y];S(D),N(-1)}break}},A=n.useCallback(()=>{b.trim()&&(a(b),c(b,u),i(!1))},[b,u,c,a]);n.useEffect(()=>{d?.(H)},[H,d]),n.useEffect(()=>{const o=l=>{M.current&&!M.current.contains(l.target)&&i(!1)};if(m)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[m]);const P=(o,l)=>{C(p=>({...p,[o]:l==="all"?void 0:l}))},O=()=>{S(""),C({category:void 0,dateRange:"all",source:void 0}),N(-1),d?.([])},I=o=>{if(!b.trim())return Y(o);const l=Y(o);return e.jsx("span",{dangerouslySetInnerHTML:{__html:ie(l,b)}})};return e.jsxs("div",{ref:M,className:`relative ${f}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fe,{})}),e.jsx("input",{ref:j,type:"text",value:b,onChange:o=>S(o.target.value),onKeyDown:B,onFocus:()=>i(!0),placeholder:x,className:"w-full pl-10 pr-20 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent","aria-label":"Search articles","aria-expanded":m,"aria-haspopup":"listbox",role:"combobox"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[b&&e.jsx("button",{onClick:O,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Clear search",children:e.jsx(ve,{})}),r&&e.jsx("button",{onClick:()=>w(!h),className:`p-1 transition-colors ${h?"text-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle filters",children:e.jsx(be,{})})]})]}),m&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[h&&e.jsx("div",{className:"p-4 border-b border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:u.category||"all",onChange:o=>P("category",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Categories"}),K.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date Range"}),e.jsxs("select",{value:u.dateRange||"all",onChange:o=>P("dateRange",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Source"}),e.jsxs("select",{value:u.source||"all",onChange:o=>P("source",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Sources"}),U.map(o=>e.jsx("option",{value:o,children:o},o))]})]})]})}),b.trim()&&e.jsxs("div",{children:[T&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Searching..."}),!T&&z&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:[H.length," result",H.length!==1?"s":""]}),H.slice(0,10).map((o,l)=>e.jsxs("div",{className:"p-4 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",onClick:()=>window.open(o.link,"_blank"),children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:I(o.title)}),o.description&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:I(o.description)}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:o.sourceTitle}),e.jsx("span",{children:new Date(o.pubDate).toLocaleDateString()})]})]},`${o.link}-${l}`))]}),!T&&!z&&e.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',b,'"']})]}),!b.trim()&&(k.length>0||L.length>0)&&e.jsxs("div",{children:[k.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Suggestions"}),k.map((o,l)=>e.jsx("button",{onClick:()=>S(o),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${y===l?"bg-gray-700":""}`,children:o},o))]}),L.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Recent Searches"}),L.slice(0,5).map((o,l)=>e.jsx("button",{onClick:()=>S(o),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${y===k.length+l?"bg-gray-700":""}`,children:o},o))]})]}),!b.trim()&&k.length===0&&L.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Start typing to search articles..."})]})]})},ye=({size:t="md",className:c="",onClick:d,isClickable:x=!1,customSrc:g,useThemeColor:r=!1})=>{const f={sm:"w-6 h-6",md:"w-7 h-7",lg:"w-16 h-16"},m=x?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"";return e.jsx("div",{className:`${f[t]}  flex items-center justify-center ${c} ${m}`,onClick:d,title:x?"Ir para a página inicial":void 0,children:e.jsx(we,{customSrc:g,useThemeColor:r})})},we=({customSrc:t,useThemeColor:c})=>{if(t?.trim().startsWith("<svg")){const x=ce.sanitize(t,{USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["use"],ADD_ATTR:["href","xlink:href"]});return e.jsx("div",{className:`w-full h-full [&>svg]:w-full [&>svg]:h-full ${c?"text-[rgb(var(--color-accent))] [&>svg]:fill-current [&>svg_path]:fill-current":""}`,dangerouslySetInnerHTML:{__html:x}})}const d=t||"/personalnews/assets/logo.svg";return c?e.jsx("div",{className:"w-full h-full bg-[rgb(var(--color-accent))]",style:{maskImage:`url(${d})`,maskSize:"contain",maskRepeat:"no-repeat",maskPosition:"center",WebkitMaskImage:`url(${d})`,WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}):e.jsx("img",{src:d,alt:"Personal News Logo",className:"w-full h-full object-contain"})},W=({className:t="",size:c="md",showBackground:d=!0,isActive:x=!1,onClick:g,title:r,children:f})=>{const m={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},i={xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},h=g?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"",w=g?x?"bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-400 hover:to-blue-600":"bg-gradient-to-br from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700":x?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-gray-600 to-gray-800";return d?e.jsx("div",{className:`${m[c]} ${w} rounded-lg flex items-center justify-center ${t} ${h}`,onClick:g,title:r,children:e.jsx("div",{className:`${i[c]} text-white`,children:f})}):e.jsx("div",{className:`${i[c]} text-white ${t} ${h}`,onClick:g,title:r,children:f})},R={Refresh:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Favorites:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Menu:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),Feeds:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Settings:t=>e.jsx(W,{...t,children:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ChevronDown:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})},je=[{value:"",labelKey:"layout.default"},{value:"bento",labelKey:"layout.bento"},{value:"brutalist",labelKey:"layout.brutalist"},{value:"compact",labelKey:"layout.compact"},{value:"cyberpunk",labelKey:"layout.cyberpunk"},{value:"focus",labelKey:"layout.focus"},{value:"gallery",labelKey:"layout.gallery"},{value:"immersive",labelKey:"layout.immersive"},{value:"list",labelKey:"layout.list"},{value:"grid",labelKey:"layout.grid"},{value:"masonry",labelKey:"layout.masonry"},{value:"minimal",labelKey:"layout.minimal"},{value:"modern",labelKey:"layout.modern"},{value:"newspaper",labelKey:"layout.newspaper"},{value:"pocketfeeds",labelKey:"layout.pocketfeeds"},{value:"split",labelKey:"layout.split"},{value:"terminal",labelKey:"layout.terminal"},{value:"timeline",labelKey:"layout.timeline"}],ke=[{value:"",label:"Padrão (Global)"},{value:"static",label:"Estático"},{value:"sticky",label:"Fixo (Sticky)"},{value:"floating",label:"Flutuante"},{value:"hidden",label:"Oculto"}],Ce=t=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(t).hostname}&sz=32`}catch{return""}},Q=t=>{try{return new URL(t).hostname.replace(/^www\./,"")}catch{return t}},J=({category:t,feeds:c,onSelectFeed:d,onSelectCategory:x,selectedCategory:g,onEditCategory:r})=>{const{updateCategory:f,deleteCategory:m}=de();X();const{confirmDanger:i,alertSuccess:h}=he(),{t:w}=Z(),[u,C]=n.useState(!1),[y,N]=n.useState(null),j=n.useRef(null),M=n.useRef(null),b=()=>{if(M.current&&clearTimeout(M.current),j.current){const a=j.current.getBoundingClientRect();N({top:a.bottom+16,left:a.left})}C(!0)},S=()=>{M.current=setTimeout(()=>{C(!1)},200)};n.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const $=async a=>{a.stopPropagation(),f(t.id,{isPinned:!t.isPinned})},T=async a=>{a.stopPropagation(),await i(w("confirm.category_delete")+` "${t.name}"?`)&&(m(t.id),h(w("alert.category_deleted_success")))},z=a=>{f(t.id,{layoutMode:a.target.value})},E=a=>{const k=a.target.value;f(t.id,{headerPosition:k||void 0})},L=g===t.id;return e.jsxs("div",{className:"relative group",ref:j,onMouseEnter:b,onMouseLeave:S,children:[e.jsxs("button",{onClick:x,"aria-label":`Select category ${t.name}`,"aria-expanded":u,className:`
          flex items-center space-x-2 px-5 py-2.5 rounded-full transition-all duration-300 ease-out min-h-[44px]
          ${L?"bg-white/10 text-white shadow-[0_0_20px_rgba(var(--color-primary),0.4)] border border-white/20 backdrop-blur-md":"text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"}
        `,children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-500 ${L?"shadow-[0_0_10px_currentColor] scale-125":"opacity-70"}`,style:{backgroundColor:t.color,color:t.color}}),e.jsx("span",{className:`font-medium text-sm tracking-wide transition-all duration-300 ${L?"text-white":"text-gray-300 group-hover:text-white"}`,children:t.name}),e.jsx(R.ChevronDown,{size:"xs",className:`transition-transform duration-500 ease-out ${u?"rotate-180 text-white":"text-gray-500 group-hover:text-gray-300"}`})]}),u&&y&&ue.createPortal(e.jsx("div",{onMouseEnter:b,onMouseLeave:S,style:{top:y.top,left:y.left},className:`
            fixed w-96 z-[9999]
            bg-[rgb(var(--color-surface))]/95 backdrop-blur-2xl border border-[rgb(var(--color-border))]/20
            rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] overflow-hidden
            transition-all duration-200 origin-top-left
            animate-in fade-in slide-in-from-top-2
          `,children:e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[rgb(var(--color-border))]/10 mb-1 flex items-center justify-between bg-[rgb(var(--color-background))]/30",children:[e.jsxs("span",{className:"text-[10px] font-bold text-[rgb(var(--color-textSecondary))] uppercase tracking-widest",children:[w("feeds.tab.feeds")," de ",t.name]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative group/layout",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.layoutMode?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Alterar Layout da Categoria","aria-label":"Alterar Layout da Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.layoutMode||"",onChange:z,onClick:a=>a.stopPropagation(),title:"Alterar Layout da Categoria",children:je.map(a=>e.jsxs("option",{value:a.value,children:[w(a.labelKey)," ",(t.layoutMode||"")===a.value?" ✓":""]},a.labelKey))})]}),e.jsxs("div",{className:"relative group/header",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.headerPosition?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Posição do Cabeçalho","aria-label":"Posição do Cabeçalho",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.headerPosition||"",onChange:E,onClick:a=>a.stopPropagation(),title:"Posição do Cabeçalho",children:ke.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsx("button",{onClick:$,className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.isPinned?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:t.isPinned?"Desafixar Categoria":"Fixar Categoria","aria-label":t.isPinned?"Desafixar Categoria":"Fixar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:t.isPinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),r&&e.jsx("button",{onClick:a=>{a.stopPropagation(),r(t.id),C(!1)},className:"p-2 rounded hover:bg-[rgb(var(--color-text))]/10 text-[rgb(var(--color-textSecondary))] min-w-[32px] min-h-[32px]",title:"Editar Categoria","aria-label":"Editar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),!t.isDefault&&e.jsx("button",{onClick:T,className:"p-2 rounded hover:bg-red-500/20 text-[rgb(var(--color-textSecondary))] hover:text-red-400 min-w-[32px] min-h-[32px]",title:"Excluir Categoria","aria-label":"Excluir Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto custom-scrollbar py-1",children:[c.map(a=>e.jsxs("button",{onClick:()=>{d(a.url),C(!1)},className:"w-full text-left px-4 py-3 text-sm text-[rgb(var(--color-textSecondary))] hover:bg-[rgb(var(--color-text))]/10 hover:text-[rgb(var(--color-text))] transition-colors flex items-center space-x-3 group min-h-[44px]","aria-label":`Select feed ${a.customTitle||Q(a.url)}`,children:[e.jsx("img",{src:Ce(a.url),alt:"",className:"w-4 h-4 rounded-sm opacity-70 group-hover:opacity-100 transition-opacity",onError:k=>{k.currentTarget.style.display="none"}}),e.jsx("span",{className:"truncate flex-1",children:a.customTitle||Q(a.url)})]},a.url)),c.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"text-[rgb(var(--color-textSecondary))]/70 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"text-sm text-[rgb(var(--color-textSecondary))]",children:w("feeds.category.empty")})]})]})]})}),document.body)]})},Te=t=>{const[c,d]=n.useState(!1),[x,g]=n.useState(!1),{headerConfig:r}=X(),[f,m]=n.useState(!1),{t:i}=Z(),[h,w]=n.useState(!0),u=n.useRef(null),C=n.useRef(0),[y,N]=n.useState(!0),j=n.useRef(null);n.useEffect(()=>{const s=()=>{N(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{window.scrollY>100&&N(!1)},3e3)},v=setTimeout(()=>{window.scrollY>100&&N(!1)},3e3);return window.addEventListener("scroll",s),window.addEventListener("touchmove",s),window.addEventListener("touchstart",s),()=>{window.removeEventListener("scroll",s),window.removeEventListener("touchmove",s),window.removeEventListener("touchstart",s),j.current&&clearTimeout(j.current),clearTimeout(v)}},[]),n.useEffect(()=>{const s=()=>{const v=window.scrollY;g(v>10),r.position==="hidden"&&(v<C.current||v<50?(w(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{window.scrollY>50&&w(!1)},3e3)):v>C.current&&v>100&&w(!1),C.current=v)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s),u.current&&clearTimeout(u.current)}},[r.position]),n.useEffect(()=>{r.customTitle&&(document.title=r.customTitle);const s=document.querySelector("link[rel~='icon']");if(s&&r.logoUrl)if(r.logoUrl.trim().startsWith("<svg")){const v=r.logoUrl,F=encodeURIComponent(v);s.href=`data:image/svg+xml;charset=utf-8,${F}`}else s.href=r.logoUrl},[r.customTitle,r.logoUrl]);const M={static:"relative w-full",sticky:"sticky top-0 z-50 w-full",floating:"fixed top-2 left-1/2 -translate-x-1/2 w-[95%] max-w-7xl rounded-xl border-[rgba(255,255,255,0.08)] md:top-4 md:rounded-2xl z-50",hidden:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-in-out ${h?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`},b={default:"justify-between gap-4",centered:"justify-between lg:justify-center lg:relative gap-4",minimal:"justify-between gap-4"},S={"ultra-compact":"h-8 lg:h-10",tiny:"h-10 lg:h-12",compact:"h-12 lg:h-14",normal:"h-14 lg:h-16",spacious:"h-16 lg:h-20"},$=r.position==="floating",T=r.style==="centered",z=r.style==="minimal",E=t.categories.filter(s=>s.isPinned||(t.categorizedFeeds[s.id]||[]).length>0),L=r.bgOpacity??.9,a=r.borderOpacity??8,k=r.bgColor||r.backgroundColor||"#0a0a0c",K=r.borderColor??"#ffffff",H=`backdrop-blur-[${r.blur??10}px]`,B=(s,v)=>{const F=parseInt(s.slice(1,3),16),se=parseInt(s.slice(3,5),16),ae=parseInt(s.slice(5,7),16);return`rgba(${F},${se},${ae},${v})`},A=B(k,L),P=B(K,a/100),O=r.categoryBackgroundColor??"#ffffff",I=r.categoryBackgroundOpacity??3,o=B(O,I/100),l=n.useRef(null),[p,D]=n.useState(!1),[q,ee]=n.useState(!1),_=()=>{if(l.current){const{scrollLeft:s,scrollWidth:v,clientWidth:F}=l.current;D(s>5),ee(s<v-F-5)}};n.useEffect(()=>(_(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)),[E]);const G=s=>{if(l.current){const F=s==="left"?l.current.scrollLeft-200:l.current.scrollLeft+200;l.current.scrollTo({left:F,behavior:"smooth"})}},te=s=>{switch(s){case"sm":return"w-6 h-6";case"lg":return"w-12 h-12";default:return"w-8 h-8"}},re={"ultra-compact":"h-12 lg:h-14",tiny:"h-14 lg:h-16",compact:"h-16 lg:h-18",normal:"h-18 lg:h-20",spacious:"h-20 lg:h-24"},oe=r.position==="hidden"||r.position==="floating";return e.jsxs(e.Fragment,{children:[oe&&e.jsx("div",{className:`${re[r.height]}`}),e.jsx("header",{className:`${M[r.position]} z-30 transition-all duration-300 ${H} ${x||$?"shadow-lg":""}
        ${x&&!$?"border-b":""} 
        `,style:{backgroundColor:A,borderBottomColor:x&&!$?P:"transparent"},children:e.jsxs("div",{className:`mx-auto px-3 sm:px-4 ${$?"":"container"} ${$?"rounded-xl md:rounded-2xl":""} overflow-hidden`,children:[e.jsx("div",{className:"md:hidden w-full py-2",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar w-full",style:{scrollbarWidth:"none"},children:e.jsx("div",{className:"flex items-center justify-center min-w-full space-x-2",children:E.map(s=>e.jsx("button",{onClick:()=>t.onNavigation(s.id),className:`flex-shrink-0 px-4 py-2 rounded-full text-xs font-medium border transition-all whitespace-nowrap min-h-[32px] ${t.selectedCategory===s.id?"bg-[rgb(var(--color-primary))] text-white border-[rgb(var(--color-primary))] shadow-lg":"bg-[rgba(255,255,255,0.05)] text-gray-300 border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.1)]"}`,children:s.name},s.id))})})}),e.jsxs("div",{className:`
            flex items-center transition-all duration-300 
            ${r.showLogo!==!1||r.showTitle?S[r.height]:"h-auto py-2"}
            ${b[r.style]}
            ${y?"flex":"hidden md:flex"}
          `,children:[e.jsxs("div",{className:`flex items-center space-x-4 group flex-shrink-0 ${T?"lg:absolute lg:left-4":""}`,children:[r.showLogo!==!1&&e.jsxs("div",{className:"relative cursor-pointer",onClick:t.onGoHome,children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-secondary))] rounded-full opacity-0 group-hover:opacity-20 blur-md transition-opacity duration-500"}),e.jsx("div",{className:"relative z-10",children:r.customLogoSvg?e.jsx("div",{className:`
                            ${te(r.logoSize)}
                            ${r.logoColorMode==="theme"?"text-[rgb(var(--color-accent))]":""}
                            [&>svg]:w-full [&>svg]:h-full
                            ${r.logoColorMode!=="original"?"[&_*:not([fill='none'])]:!fill-current [&_*:not([stroke='none'])]:!stroke-current":""}
                        `,style:{color:r.logoColorMode==="custom"?r.logoColor:void 0},dangerouslySetInnerHTML:{__html:r.customLogoSvg}},r.logoColorMode):e.jsx(ye,{size:r.logoSize,isClickable:!0,onClick:t.onGoHome,customSrc:r.logoUrl,useThemeColor:r.useThemeColor})})]}),r.showTitle?e.jsx("h1",{className:"font-bold tracking-tight cursor-pointer pb-1 text-xl truncate max-w-[150px] md:max-w-none",onClick:t.onGoHome,style:{color:r.titleGradient?.enabled?void 0:r.titleColor||"rgb(var(--color-text))"},children:r.titleGradient?.enabled?e.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(${r.titleGradient.direction||"to right"}, ${r.titleGradient.from}, ${r.titleGradient.to})`},children:r.customTitle||i("app.title")}):e.jsx("span",{children:r.customTitle||i("app.title")})}):e.jsx("h1",{className:"sr-only",children:i("app.title")})]}),!T&&e.jsxs("div",{className:"hidden md:flex flex-1 items-center justify-center relative group/scroll px-2 overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 z-10 transition-all duration-300 ${p?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("left"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll left",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})})}),e.jsx("div",{ref:l,onScroll:_,className:`flex items-center space-x-1 p-1 rounded-full text-xs font-medium transition-all overflow-x-auto no-scrollbar max-w-full scroll-smooth ${z?"":"border backdrop-blur-sm"}`,style:{...z?{}:{backgroundColor:o,borderColor:B("#ffffff",.05)},scrollbarWidth:"none"},children:E.map(s=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{category:s,feeds:t.categorizedFeeds[s.id]||[],onSelectFeed:v=>t.onNavigation(s.id,v),onSelectCategory:()=>t.onNavigation(s.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick})},s.id))}),e.jsx("div",{className:`absolute right-0 z-10 transition-all duration-300 ${q?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("right"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll right",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})})]}),T&&e.jsx("div",{className:`hidden lg:flex items-center space-x-1 p-1 rounded-full transition-all flex-grow justify-center ${z?"":"border backdrop-blur-sm"}`,style:z?{}:{backgroundColor:o,borderColor:B("#ffffff",.05)},children:E.map(s=>e.jsx(J,{category:s,feeds:t.categorizedFeeds[s.id]||[],onSelectFeed:v=>t.onNavigation(s.id,v),onSelectCategory:()=>t.onNavigation(s.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick},s.id))}),e.jsxs("div",{className:`flex items-center justify-end space-x-2 flex-shrink-0 ${T?"lg:absolute lg:right-4":""}`,children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx("button",{onClick:t.onRefreshClick,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.refresh"),"aria-label":i("header.refresh"),children:e.jsx(R.Refresh,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenFavorites,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-accent))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.favorites"),"aria-label":i("header.favorites"),children:e.jsx(R.Favorites,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenSettings,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:"Configurações","aria-label":"Configurações",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:t.onManageFeedsClick,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-primary))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:i("header.manage_feeds"),"aria-label":i("header.manage_feeds"),children:e.jsx(R.Feeds,{showBackground:!1,size:"md"})})]}),e.jsx("div",{className:"lg:hidden ml-2",children:e.jsx("button",{onClick:()=>d(!c),className:`p-2 rounded-lg transition-colors ${c?"bg-[rgba(255,255,255,0.1)] text-white":"text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.05)]"}`,"aria-label":"Menu",children:e.jsx(R.Menu,{showBackground:!1,size:"md",isActive:c})})})]})]})]})}),e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden transition-opacity duration-300 ${c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>d(!1)}),e.jsx("div",{className:`absolute top-0 right-0 bottom-0 w-[80%] max-w-sm bg-[rgb(var(--color-surface))] border-l border-[rgba(255,255,255,0.08)] shadow-2xl transform transition-transform duration-300 ${c?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:i("header.menu")}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 text-gray-400 hover:text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto flex-1",children:[e.jsx("div",{className:"relative",children:e.jsx(pe,{articles:t.articles,onSearch:t.onSearch,onResultsChange:t.onSearchResultsChange,placeholder:i("search.placeholder"),className:"w-full"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{t.onManageFeedsClick(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(139,92,246,0.1)] text-[rgb(var(--color-primary))] rounded-xl font-medium border border-[rgba(139,92,246,0.2)]",children:[e.jsx(R.Feeds,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("feeds.tab.feeds")})]}),e.jsxs("button",{onClick:()=>{t.onOpenFavorites(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Favorites,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("header.favorites")})]}),e.jsxs("button",{onClick:()=>{t.onOpenSettings(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Settings,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("settings.title")})]}),e.jsxs("button",{onClick:()=>{t.onRefreshClick(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Refresh,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:i("action.refresh")})]})]})]})]})})]})]})};export{Te as default};
