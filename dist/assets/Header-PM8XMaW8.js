import{r as i,R as V,j as e}from"./performance-C3ZVEFVv.js";import{j as le,s as ne,k as Y,l as ie,n as ce}from"./services-DShKEQpD.js";import{u as de,a as q,b as X,r as ue}from"./index-KCFBQP9A.js";import{u as he}from"./useNotificationReplacements-djikS_FF.js";import"./react-vendor-Cgg2GOmP.js";function ge(t,c={}){const{debounceMs:d=300,minQueryLength:x=2,...u}=c,[r,v]=i.useState(""),[g,a]=i.useState(""),[j,p]=i.useState([]),h=r!==g,y=i.useMemo(()=>t.length===0?null:le(t),[t]);i.useEffect(()=>{const w=setTimeout(()=>{a(r)},d);return()=>{clearTimeout(w)}},[r,d]),i.useEffect(()=>{if(!y||!g.trim()||g.length<x){const m=requestAnimationFrame(()=>p([]));return()=>cancelAnimationFrame(m)}const w={includeTitle:u.includeTitle,includeContent:u.includeContent,includeCategories:u.includeCategories,includeSource:u.includeSource,fuzzyThreshold:u.fuzzyThreshold},N=ne(y,g,w),S=requestAnimationFrame(()=>p(N));return()=>cancelAnimationFrame(S)},[y,g,x,u.includeTitle,u.includeContent,u.includeCategories,u.includeSource,u.fuzzyThreshold]);const C=j.length>0;return{query:r,setQuery:v,results:j,isSearching:h,hasResults:C,searchIndex:y}}function xe(t=10){const[c,d]=i.useState(()=>{try{const r=localStorage.getItem("searchHistory");return r?JSON.parse(r):[]}catch{return[]}}),x=i.useCallback(r=>{r.trim()&&d(v=>{const g=v.filter(j=>j!==r),a=[r,...g].slice(0,t);try{localStorage.setItem("searchHistory",JSON.stringify(a))}catch{}return a})},[t]),u=i.useCallback(()=>{d([]);try{localStorage.removeItem("searchHistory")}catch{}},[]);return{searchHistory:c,addToHistory:x,clearHistory:u}}function me(t,c,d=5){return i.useMemo(()=>{if(!t||!c.trim()||c.length<2)return[];const u=c.toLowerCase(),r=new Set;return t.titleIndex.forEach((g,a)=>{a.startsWith(u)&&a!==u&&r.add(a)}),t.categoryIndex.forEach((g,a)=>{a.startsWith(u)&&a!==u&&r.add(a)}),Array.from(r).sort((g,a)=>g.length-a.length).slice(0,d)},[t,c,d])}const fe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),be=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),ve=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),pe=({articles:t,onSearch:c,onResultsChange:d,placeholder:x="Search articles... (Ctrl+K)",debounceMs:u=300,showFilters:r=!0,className:v=""})=>{const[g,a]=i.useState(!1),[j,p]=i.useState(!1),[h,y]=i.useState({category:void 0,dateRange:"all",source:void 0}),[C,w]=i.useState(-1),N=i.useRef(null),S=i.useRef(null),{query:m,setQuery:L,results:$,isSearching:T,hasResults:z,searchIndex:E}=ge(t,{debounceMs:u,includeTitle:!0,includeContent:!0,includeCategories:!0,includeSource:!0}),{searchHistory:M,addToHistory:l}=xe(),k=me(E,m,5),A=V.useMemo(()=>{const o=new Set;return t.forEach(n=>{n.categories?.forEach(b=>o.add(b))}),Array.from(o).sort()},[t]),U=V.useMemo(()=>{const o=new Set;return t.forEach(n=>{o.add(n.sourceTitle)}),Array.from(o).sort()},[t]),F=V.useMemo(()=>{let o=$.map(n=>n.article);if(h.category&&h.category!=="all"&&(o=o.filter(n=>n.categories?.includes(h.category))),h.source&&h.source!=="all"&&(o=o.filter(n=>n.sourceTitle===h.source)),h.dateRange&&h.dateRange!=="all"){const n=new Date,b=new Date;switch(h.dateRange){case"today":b.setHours(0,0,0,0);break;case"week":b.setDate(n.getDate()-7);break;case"month":b.setMonth(n.getMonth()-1);break}o=o.filter(B=>new Date(B.pubDate)>=b)}return o},[$,h]);i.useEffect(()=>{const o=n=>{(n.ctrlKey||n.metaKey)&&n.key==="k"&&(n.preventDefault(),a(!0),setTimeout(()=>N.current?.focus(),100)),n.key==="Escape"&&g&&(a(!1),L(""),w(-1))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[g,L]);const H=o=>{const n=k.length+M.length;switch(o.key){case"ArrowDown":o.preventDefault(),w(b=>b<n-1?b+1:-1);break;case"ArrowUp":o.preventDefault(),w(b=>b>-1?b-1:n-1);break;case"Enter":if(o.preventDefault(),C>=0){const B=[...k,...M][C];L(B),w(-1)}else m.trim()&&K();break;case"Tab":if(C>=0){o.preventDefault();const B=[...k,...M][C];L(B),w(-1)}break}},K=i.useCallback(()=>{m.trim()&&(l(m),c(m,h),a(!1))},[m,h,c,l]);i.useEffect(()=>{d?.(F)},[F,d]),i.useEffect(()=>{const o=n=>{S.current&&!S.current.contains(n.target)&&a(!1)};if(g)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[g]);const P=(o,n)=>{y(b=>({...b,[o]:n==="all"?void 0:n}))},O=()=>{L(""),y({category:void 0,dateRange:"all",source:void 0}),w(-1),d?.([])},_=o=>{if(!m.trim())return Y(o);const n=Y(o);return e.jsx("span",{dangerouslySetInnerHTML:{__html:ie(n,m)}})};return e.jsxs("div",{ref:S,className:`relative ${v}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fe,{})}),e.jsx("input",{ref:N,type:"text",value:m,onChange:o=>L(o.target.value),onKeyDown:H,onFocus:()=>a(!0),placeholder:x,className:"w-full pl-10 pr-20 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent","aria-label":"Search articles","aria-expanded":g,"aria-haspopup":"listbox",role:"combobox"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[m&&e.jsx("button",{onClick:O,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Clear search",children:e.jsx(ve,{})}),r&&e.jsx("button",{onClick:()=>p(!j),className:`p-1 transition-colors ${j?"text-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle filters",children:e.jsx(be,{})})]})]}),g&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[j&&e.jsx("div",{className:"p-4 border-b border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:h.category||"all",onChange:o=>P("category",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date Range"}),e.jsxs("select",{value:h.dateRange||"all",onChange:o=>P("dateRange",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Source"}),e.jsxs("select",{value:h.source||"all",onChange:o=>P("source",o.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Sources"}),U.map(o=>e.jsx("option",{value:o,children:o},o))]})]})]})}),m.trim()&&e.jsxs("div",{children:[T&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Searching..."}),!T&&z&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:[F.length," result",F.length!==1?"s":""]}),F.slice(0,10).map((o,n)=>e.jsxs("div",{className:"p-4 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",onClick:()=>window.open(o.link,"_blank"),children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:_(o.title)}),o.description&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:_(o.description)}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:o.sourceTitle}),e.jsx("span",{children:new Date(o.pubDate).toLocaleDateString()})]})]},`${o.link}-${n}`))]}),!T&&!z&&e.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',m,'"']})]}),!m.trim()&&(k.length>0||M.length>0)&&e.jsxs("div",{children:[k.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Suggestions"}),k.map((o,n)=>e.jsx("button",{onClick:()=>L(o),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${C===n?"bg-gray-700":""}`,children:o},o))]}),M.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Recent Searches"}),M.slice(0,5).map((o,n)=>e.jsx("button",{onClick:()=>L(o),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${C===k.length+n?"bg-gray-700":""}`,children:o},o))]})]}),!m.trim()&&k.length===0&&M.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Start typing to search articles..."})]})]})},ye=({size:t="md",className:c="",onClick:d,isClickable:x=!1,customSrc:u,useThemeColor:r=!1})=>{const v={sm:"w-6 h-6",md:"w-7 h-7",lg:"w-16 h-16"},g=x?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"";return e.jsx("div",{className:`${v[t]}  flex items-center justify-center ${c} ${g}`,onClick:d,title:x?"Ir para a página inicial":void 0,children:e.jsx(we,{customSrc:u,useThemeColor:r})})},we=({customSrc:t,useThemeColor:c})=>{if(t?.trim().startsWith("<svg")){const x=ce.sanitize(t,{USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["use"],ADD_ATTR:["href","xlink:href"]});return e.jsx("div",{className:`w-full h-full [&>svg]:w-full [&>svg]:h-full ${c?"text-[rgb(var(--color-accent))] [&>svg]:fill-current [&>svg_path]:fill-current":""}`,dangerouslySetInnerHTML:{__html:x}})}const d=t||"/personalnews/assets/logo.svg";return c?e.jsx("div",{className:"w-full h-full bg-[rgb(var(--color-accent))]",style:{maskImage:`url(${d})`,maskSize:"contain",maskRepeat:"no-repeat",maskPosition:"center",WebkitMaskImage:`url(${d})`,WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}):e.jsx("img",{src:d,alt:"Personal News Logo",className:"w-full h-full object-contain"})},W=({className:t="",size:c="md",showBackground:d=!0,isActive:x=!1,onClick:u,title:r,children:v})=>{const g={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},a={xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},j=u?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"",p=u?x?"bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-400 hover:to-blue-600":"bg-gradient-to-br from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700":x?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-gray-600 to-gray-800";return d?e.jsx("div",{className:`${g[c]} ${p} rounded-lg flex items-center justify-center ${t} ${j}`,onClick:u,title:r,children:e.jsx("div",{className:`${a[c]} text-white`,children:v})}):e.jsx("div",{className:`${a[c]} text-white ${t} ${j}`,onClick:u,title:r,children:v})},R={Refresh:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Favorites:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Menu:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),Feeds:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Settings:t=>e.jsx(W,{...t,children:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ChevronDown:t=>e.jsx(W,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})},je=[{value:"",labelKey:"layout.default"},{value:"bento",labelKey:"layout.bento"},{value:"brutalist",labelKey:"layout.brutalist"},{value:"compact",labelKey:"layout.compact"},{value:"cyberpunk",labelKey:"layout.cyberpunk"},{value:"focus",labelKey:"layout.focus"},{value:"gallery",labelKey:"layout.gallery"},{value:"immersive",labelKey:"layout.immersive"},{value:"list",labelKey:"layout.list"},{value:"grid",labelKey:"layout.grid"},{value:"masonry",labelKey:"layout.masonry"},{value:"minimal",labelKey:"layout.minimal"},{value:"modern",labelKey:"layout.modern"},{value:"newspaper",labelKey:"layout.newspaper"},{value:"pocketfeeds",labelKey:"layout.pocketfeeds"},{value:"split",labelKey:"layout.split"},{value:"terminal",labelKey:"layout.terminal"},{value:"timeline",labelKey:"layout.timeline"}],ke=[{value:"",label:"Padrão (Global)"},{value:"static",label:"Estático"},{value:"sticky",label:"Fixo (Sticky)"},{value:"floating",label:"Flutuante"},{value:"hidden",label:"Oculto"}],Ce=t=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(t).hostname}&sz=32`}catch{return""}},Q=t=>{try{return new URL(t).hostname.replace(/^www\./,"")}catch{return t}},J=({category:t,feeds:c,onSelectFeed:d,onSelectCategory:x,selectedCategory:u,onEditCategory:r})=>{const{updateCategory:v,deleteCategory:g}=de();q();const{confirmDanger:a,alertSuccess:j}=he(),{t:p}=X(),[h,y]=i.useState(!1),[C,w]=i.useState(null),N=i.useRef(null),S=i.useRef(null),m=()=>{if(S.current&&clearTimeout(S.current),N.current){const l=N.current.getBoundingClientRect();w({top:l.bottom+16,left:l.left})}y(!0)},L=()=>{S.current=setTimeout(()=>{y(!1)},200)};i.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);const $=async l=>{l.stopPropagation(),v(t.id,{isPinned:!t.isPinned})},T=async l=>{l.stopPropagation(),await a(p("confirm.category_delete")+` "${t.name}"?`)&&(g(t.id),j(p("alert.category_deleted_success")))},z=l=>{v(t.id,{layoutMode:l.target.value})},E=l=>{const k=l.target.value;v(t.id,{headerPosition:k||void 0})},M=u===t.id;return e.jsxs("div",{className:"relative group",ref:N,onMouseEnter:m,onMouseLeave:L,children:[e.jsxs("button",{onClick:x,"aria-label":`Select category ${t.name}`,"aria-expanded":h,className:`
          flex items-center space-x-2 px-5 py-2.5 rounded-full transition-all duration-300 ease-out min-h-[44px]
          ${M?"bg-white/10 text-white shadow-[0_0_20px_rgba(var(--color-primary),0.4)] border border-white/20 backdrop-blur-md":"text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"}
        `,children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-500 ${M?"shadow-[0_0_10px_currentColor] scale-125":"opacity-70"}`,style:{backgroundColor:t.color,color:t.color}}),e.jsx("span",{className:`font-medium text-sm tracking-wide transition-all duration-300 ${M?"text-white":"text-gray-300 group-hover:text-white"}`,children:t.name}),e.jsx(R.ChevronDown,{size:"xs",className:`transition-transform duration-500 ease-out ${h?"rotate-180 text-white":"text-gray-500 group-hover:text-gray-300"}`})]}),h&&C&&ue.createPortal(e.jsx("div",{onMouseEnter:m,onMouseLeave:L,style:{top:C.top,left:C.left},className:`
            fixed w-96 z-[9999]
            bg-[rgb(var(--color-surface))]/95 backdrop-blur-2xl border border-[rgb(var(--color-border))]/20
            rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] overflow-hidden
            transition-all duration-200 origin-top-left
            animate-in fade-in slide-in-from-top-2
          `,children:e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[rgb(var(--color-border))]/10 mb-1 flex items-center justify-between bg-[rgb(var(--color-background))]/30",children:[e.jsxs("span",{className:"text-[10px] font-bold text-[rgb(var(--color-textSecondary))] uppercase tracking-widest",children:[p("feeds.tab.feeds")," de ",t.name]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative group/layout",children:[e.jsx("button",{onClick:l=>l.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.layoutMode?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Alterar Layout da Categoria","aria-label":"Alterar Layout da Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.layoutMode||"",onChange:z,onClick:l=>l.stopPropagation(),title:"Alterar Layout da Categoria",children:je.map(l=>e.jsxs("option",{value:l.value,children:[p(l.labelKey)," ",(t.layoutMode||"")===l.value?" ✓":""]},l.labelKey))})]}),e.jsxs("div",{className:"relative group/header",children:[e.jsx("button",{onClick:l=>l.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.headerPosition?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Posição do Cabeçalho","aria-label":"Posição do Cabeçalho",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.headerPosition||"",onChange:E,onClick:l=>l.stopPropagation(),title:"Posição do Cabeçalho",children:ke.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsx("button",{onClick:$,className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.isPinned?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:t.isPinned?"Desafixar Categoria":"Fixar Categoria","aria-label":t.isPinned?"Desafixar Categoria":"Fixar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:t.isPinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),r&&e.jsx("button",{onClick:l=>{l.stopPropagation(),r(t.id),y(!1)},className:"p-2 rounded hover:bg-[rgb(var(--color-text))]/10 text-[rgb(var(--color-textSecondary))] min-w-[32px] min-h-[32px]",title:"Editar Categoria","aria-label":"Editar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),!t.isDefault&&e.jsx("button",{onClick:T,className:"p-2 rounded hover:bg-red-500/20 text-[rgb(var(--color-textSecondary))] hover:text-red-400 min-w-[32px] min-h-[32px]",title:"Excluir Categoria","aria-label":"Excluir Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto custom-scrollbar py-1",children:[c.map(l=>e.jsxs("button",{onClick:()=>{d(l.url),y(!1)},className:"w-full text-left px-4 py-3 text-sm text-[rgb(var(--color-textSecondary))] hover:bg-[rgb(var(--color-text))]/10 hover:text-[rgb(var(--color-text))] transition-colors flex items-center space-x-3 group min-h-[44px]","aria-label":`Select feed ${l.customTitle||Q(l.url)}`,children:[e.jsx("img",{src:Ce(l.url),alt:"",className:"w-4 h-4 rounded-sm opacity-70 group-hover:opacity-100 transition-opacity",onError:k=>{k.currentTarget.style.display="none"}}),e.jsx("span",{className:"truncate flex-1",children:l.customTitle||Q(l.url)})]},l.url)),c.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"text-[rgb(var(--color-textSecondary))]/70 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"text-sm text-[rgb(var(--color-textSecondary))]",children:p("feeds.category.empty")})]})]})]})}),document.body)]})},Te=t=>{const[c,d]=i.useState(!1),[x,u]=i.useState(!1),{headerConfig:r}=q(),[v,g]=i.useState(!1),{t:a}=X(),[j,p]=i.useState(!0),h=i.useRef(null),y=i.useRef(0),[C,w]=i.useState(!0),N=i.useRef(null);i.useEffect(()=>{const s=()=>{w(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{window.scrollY>100&&w(!1)},3e3)},f=setTimeout(()=>{window.scrollY>100&&w(!1)},3e3);return window.addEventListener("scroll",s),window.addEventListener("touchmove",s),window.addEventListener("touchstart",s),()=>{window.removeEventListener("scroll",s),window.removeEventListener("touchmove",s),window.removeEventListener("touchstart",s),N.current&&clearTimeout(N.current),clearTimeout(f)}},[]),i.useEffect(()=>{const s=()=>{const f=window.scrollY;u(f>10),r.position==="hidden"&&(f<y.current||f<50?(p(!0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{window.scrollY>50&&p(!1)},3e3)):f>y.current&&f>100&&p(!1),y.current=f)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s),h.current&&clearTimeout(h.current)}},[r.position]),i.useEffect(()=>{r.customTitle&&(document.title=r.customTitle);const s=document.querySelector("link[rel~='icon']");if(s&&r.logoUrl)if(r.logoUrl.trim().startsWith("<svg")){const f=r.logoUrl,D=encodeURIComponent(f);s.href=`data:image/svg+xml;charset=utf-8,${D}`}else s.href=r.logoUrl},[r.customTitle,r.logoUrl]);const S={static:"relative w-full",sticky:"sticky top-0 z-50 w-full",floating:"fixed top-2 left-1/2 -translate-x-1/2 w-[95%] max-w-7xl rounded-xl border-[rgba(255,255,255,0.08)] md:top-4 md:rounded-2xl z-50",hidden:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-in-out ${j?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`},m={default:"justify-between gap-4",centered:"justify-between lg:justify-center lg:relative gap-4",minimal:"justify-between gap-4"},L={"ultra-compact":"h-8 lg:h-10",tiny:"h-10 lg:h-12",compact:"h-12 lg:h-14",normal:"h-14 lg:h-16",spacious:"h-16 lg:h-20"},$=r.position==="floating",T=r.style==="centered",z=r.style==="minimal",E=t.categories.filter(s=>s.isPinned||(t.categorizedFeeds[s.id]||[]).length>0),M=r.bgOpacity??.9,l=r.borderOpacity??8,k=r.bgColor||r.backgroundColor||"#0a0a0c",A=r.borderColor??"#ffffff",F=`backdrop-blur-[${r.blur??10}px]`,H=(s,f)=>{const D=parseInt(s.slice(1,3),16),se=parseInt(s.slice(3,5),16),ae=parseInt(s.slice(5,7),16);return`rgba(${D},${se},${ae},${f})`},K=H(k,M),P=H(A,l/100),O=r.categoryBackgroundColor??"#ffffff",_=r.categoryBackgroundOpacity??3,o=H(O,_/100),n=i.useRef(null),[b,B]=i.useState(!1),[Z,ee]=i.useState(!1),I=()=>{if(n.current){const{scrollLeft:s,scrollWidth:f,clientWidth:D}=n.current;B(s>5),ee(s<f-D-5)}};i.useEffect(()=>(I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)),[E]);const G=s=>{if(n.current){const D=s==="left"?n.current.scrollLeft-200:n.current.scrollLeft+200;n.current.scrollTo({left:D,behavior:"smooth"})}},te=s=>{switch(s){case"sm":return"w-6 h-6";case"lg":return"w-12 h-12";default:return"w-8 h-8"}},re={"ultra-compact":"h-12 lg:h-14",tiny:"h-14 lg:h-16",compact:"h-16 lg:h-18",normal:"h-18 lg:h-20",spacious:"h-20 lg:h-24"},oe=r.position==="hidden"||r.position==="floating";return e.jsxs(e.Fragment,{children:[oe&&e.jsx("div",{className:`${re[r.height]} mb-[52px] md:mb-0 transition-[margin] duration-300`}),e.jsx("header",{className:`${S[r.position]} z-30 transition-all duration-300 ${F} ${x||$?"shadow-lg":""}
        ${x&&!$?"border-b":""} 
        `,style:{backgroundColor:K,borderBottomColor:x&&!$?P:"transparent"},children:e.jsxs("div",{className:`mx-auto px-3 sm:px-4 ${$?"":"container"} ${$?"rounded-xl md:rounded-2xl":""} overflow-hidden`,children:[e.jsxs("div",{className:`
            flex items-center transition-all duration-300 
            ${r.showLogo!==!1||r.showTitle?L[r.height]:"h-auto py-2"}
            ${m[r.style]}
            ${C?"flex":"hidden md:flex"}
          `,children:[e.jsxs("div",{className:`flex items-center space-x-2 md:space-x-4 group flex-shrink-0 ${T?"lg:absolute lg:left-4":""}`,children:[r.showLogo!==!1&&e.jsxs("div",{className:"relative cursor-pointer",onClick:t.onGoHome,children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-secondary))] rounded-full opacity-0 group-hover:opacity-20 blur-md transition-opacity duration-500"}),e.jsx("div",{className:"relative z-10",children:r.customLogoSvg?e.jsx("div",{className:`
                            ${te(r.logoSize)}
                            ${r.logoColorMode==="theme"?"text-[rgb(var(--color-accent))]":""}
                            [&>svg]:w-full [&>svg]:h-full
                            ${r.logoColorMode!=="original"?"[&_*:not([fill='none'])]:!fill-current [&_*:not([stroke='none'])]:!stroke-current":""}
                        `,style:{color:r.logoColorMode==="custom"?r.logoColor:void 0},dangerouslySetInnerHTML:{__html:r.customLogoSvg}},r.logoColorMode):e.jsx(ye,{size:r.logoSize,isClickable:!0,onClick:t.onGoHome,customSrc:r.logoUrl,useThemeColor:r.useThemeColor})})]}),r.showTitle?e.jsx("h1",{className:"font-bold tracking-tight cursor-pointer pb-1 text-lg md:text-xl truncate max-w-[120px] sm:max-w-[200px] md:max-w-none",onClick:t.onGoHome,style:{color:r.titleGradient?.enabled?void 0:r.titleColor||"rgb(var(--color-text))"},children:r.titleGradient?.enabled?e.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(${r.titleGradient.direction||"to right"}, ${r.titleGradient.from}, ${r.titleGradient.to})`},children:r.customTitle||a("app.title")}):e.jsx("span",{children:r.customTitle||a("app.title")})}):e.jsx("h1",{className:"sr-only",children:a("app.title")})]}),!T&&e.jsxs("div",{className:"hidden md:flex flex-1 items-center justify-center relative group/scroll px-2 overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 z-10 transition-all duration-300 ${b?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("left"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll left",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})})}),e.jsx("div",{ref:n,onScroll:I,className:`flex items-center space-x-1 p-1 rounded-full text-xs font-medium transition-all overflow-x-auto no-scrollbar max-w-full scroll-smooth ${z?"":"border backdrop-blur-sm"}`,style:{...z?{}:{backgroundColor:o,borderColor:H("#ffffff",.05)},scrollbarWidth:"none"},children:E.map(s=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{category:s,feeds:t.categorizedFeeds[s.id]||[],onSelectFeed:f=>t.onNavigation(s.id,f),onSelectCategory:()=>t.onNavigation(s.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick})},s.id))}),e.jsx("div",{className:`absolute right-0 z-10 transition-all duration-300 ${Z?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>G("right"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll right",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})})]}),T&&e.jsx("div",{className:`hidden lg:flex items-center space-x-1 p-1 rounded-full transition-all flex-grow justify-center ${z?"":"border backdrop-blur-sm"}`,style:z?{}:{backgroundColor:o,borderColor:H("#ffffff",.05)},children:E.map(s=>e.jsx(J,{category:s,feeds:t.categorizedFeeds[s.id]||[],onSelectFeed:f=>t.onNavigation(s.id,f),onSelectCategory:()=>t.onNavigation(s.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick},s.id))}),e.jsxs("div",{className:`flex items-center justify-end space-x-2 flex-shrink-0 ${T?"lg:absolute lg:right-4":""}`,children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx("button",{onClick:t.onRefreshClick,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:a("header.refresh"),"aria-label":a("header.refresh"),children:e.jsx(R.Refresh,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenFavorites,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-accent))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:a("header.favorites"),"aria-label":a("header.favorites"),children:e.jsx(R.Favorites,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenSettings,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:"Configurações","aria-label":"Configurações",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:t.onManageFeedsClick,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-primary))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:a("header.manage_feeds"),"aria-label":a("header.manage_feeds"),children:e.jsx(R.Feeds,{showBackground:!1,size:"md"})})]}),e.jsx("div",{className:"lg:hidden ml-2",children:e.jsx("button",{onClick:()=>d(!c),className:`p-2 rounded-lg transition-colors ${c?"bg-[rgba(255,255,255,0.1)] text-white":"text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.05)]"}`,"aria-label":"Menu",children:e.jsx(R.Menu,{showBackground:!1,size:"md",isActive:c})})})]})]}),e.jsx("div",{className:"md:hidden w-full py-2 border-t border-white/5 bg-black/10",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar w-full",style:{scrollbarWidth:"none"},children:e.jsx("div",{className:"flex items-center px-1 space-x-2",children:E.map(s=>e.jsx("button",{onClick:()=>t.onNavigation(s.id),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium border transition-all whitespace-nowrap ${t.selectedCategory===s.id?"bg-[rgb(var(--color-primary))] text-white border-[rgb(var(--color-primary))] shadow-lg":"bg-[rgba(255,255,255,0.05)] text-gray-300 border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.1)]"}`,children:s.name},s.id))})})})]})}),e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden transition-opacity duration-300 ${c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>d(!1)}),e.jsx("div",{className:`absolute top-0 right-0 bottom-0 w-[80%] max-w-sm bg-[rgb(var(--color-surface))] border-l border-[rgba(255,255,255,0.08)] shadow-2xl transform transition-transform duration-300 ${c?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:a("header.menu")}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 text-gray-400 hover:text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto flex-1",children:[e.jsx("div",{className:"relative",children:e.jsx(pe,{articles:t.articles,onSearch:t.onSearch,onResultsChange:t.onSearchResultsChange,placeholder:a("search.placeholder"),className:"w-full"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{t.onManageFeedsClick(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(139,92,246,0.1)] text-[rgb(var(--color-primary))] rounded-xl font-medium border border-[rgba(139,92,246,0.2)]",children:[e.jsx(R.Feeds,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:a("feeds.tab.feeds")})]}),e.jsxs("button",{onClick:()=>{t.onOpenFavorites(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Favorites,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:a("header.favorites")})]}),e.jsxs("button",{onClick:()=>{t.onOpenSettings(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Settings,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:a("settings.title")})]}),e.jsxs("button",{onClick:()=>{t.onRefreshClick(),d(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Refresh,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:a("action.refresh")})]})]})]})]})})]})]})};export{Te as default};
