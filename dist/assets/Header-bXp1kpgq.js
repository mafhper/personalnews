import{r as l,a as U,j as e}from"./performance-o4eTjbDj.js";import{j as se,s as oe,k as Y,l as ae,n as le}from"./services-Cgo2Rk-m.js";import{d as q,r as ne}from"./index-C2YApkSY.js";import{u as ie,a as ce}from"./AppContent-CA_X3Odh.js";import{u as de}from"./useNotificationReplacements-CoAHyXgy.js";import"./react-vendor-Cgg2GOmP.js";function ue(t,i={}){const{debounceMs:c=300,minQueryLength:f=2,...d}=i,[r,h]=l.useState(""),[g,u]=l.useState(""),[b,k]=l.useState([]),m=r!==g,j=l.useMemo(()=>t.length===0?null:se(t),[t]);l.useEffect(()=>{const C=setTimeout(()=>{u(r)},c);return()=>{clearTimeout(C)}},[r,c]),l.useEffect(()=>{if(!j||!g.trim()||g.length<f){const x=requestAnimationFrame(()=>k([]));return()=>cancelAnimationFrame(x)}const C={includeTitle:d.includeTitle,includeContent:d.includeContent,includeCategories:d.includeCategories,includeSource:d.includeSource,fuzzyThreshold:d.fuzzyThreshold},M=oe(j,g,C),S=requestAnimationFrame(()=>k(M));return()=>cancelAnimationFrame(S)},[j,g,f,d.includeTitle,d.includeContent,d.includeCategories,d.includeSource,d.fuzzyThreshold]);const p=b.length>0;return{query:r,setQuery:h,results:b,isSearching:m,hasResults:p,searchIndex:j}}function he(t=10){const[i,c]=l.useState(()=>{try{const r=localStorage.getItem("searchHistory");return r?JSON.parse(r):[]}catch{return[]}}),f=l.useCallback(r=>{r.trim()&&c(h=>{const g=h.filter(b=>b!==r),u=[r,...g].slice(0,t);try{localStorage.setItem("searchHistory",JSON.stringify(u))}catch{}return u})},[t]),d=l.useCallback(()=>{c([]);try{localStorage.removeItem("searchHistory")}catch{}},[]);return{searchHistory:i,addToHistory:f,clearHistory:d}}function ge(t,i,c=5){return l.useMemo(()=>{if(!t||!i.trim()||i.length<2)return[];const d=i.toLowerCase(),r=new Set;return t.titleIndex.forEach((g,u)=>{u.startsWith(d)&&u!==d&&r.add(u)}),t.categoryIndex.forEach((g,u)=>{u.startsWith(d)&&u!==d&&r.add(u)}),Array.from(r).sort((g,u)=>g.length-u.length).slice(0,c)},[t,i,c])}const xe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),me=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),fe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),be=({articles:t,onSearch:i,onResultsChange:c,placeholder:f="Search articles... (Ctrl+K)",debounceMs:d=300,showFilters:r=!0,className:h=""})=>{const[g,u]=l.useState(!1),[b,k]=l.useState(!1),[m,j]=l.useState({category:void 0,dateRange:"all",source:void 0}),[p,C]=l.useState(-1),M=l.useRef(null),S=l.useRef(null),{query:x,setQuery:y,results:z,isSearching:$,hasResults:D,searchIndex:W}=ue(t,{debounceMs:d,includeTitle:!0,includeContent:!0,includeCategories:!0,includeSource:!0}),{searchHistory:L,addToHistory:a}=he(),N=ge(W,x,5),O=U.useMemo(()=>{const s=new Set;return t.forEach(n=>{n.categories?.forEach(w=>s.add(w))}),Array.from(s).sort()},[t]),E=U.useMemo(()=>{const s=new Set;return t.forEach(n=>{s.add(n.sourceTitle)}),Array.from(s).sort()},[t]),F=U.useMemo(()=>{let s=z.map(n=>n.article);if(m.category&&m.category!=="all"&&(s=s.filter(n=>n.categories?.includes(m.category))),m.source&&m.source!=="all"&&(s=s.filter(n=>n.sourceTitle===m.source)),m.dateRange&&m.dateRange!=="all"){const n=new Date,w=new Date;switch(m.dateRange){case"today":w.setHours(0,0,0,0);break;case"week":w.setDate(n.getDate()-7);break;case"month":w.setMonth(n.getMonth()-1);break}s=s.filter(B=>new Date(B.pubDate)>=w)}return s},[z,m]);l.useEffect(()=>{const s=n=>{(n.ctrlKey||n.metaKey)&&n.key==="k"&&(n.preventDefault(),u(!0),setTimeout(()=>M.current?.focus(),100)),n.key==="Escape"&&g&&(u(!1),y(""),C(-1))};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[g,y]);const V=s=>{const n=N.length+L.length;switch(s.key){case"ArrowDown":s.preventDefault(),C(w=>w<n-1?w+1:-1);break;case"ArrowUp":s.preventDefault(),C(w=>w>-1?w-1:n-1);break;case"Enter":if(s.preventDefault(),p>=0){const B=[...N,...L][p];y(B),C(-1)}else x.trim()&&G();break;case"Tab":if(p>=0){s.preventDefault();const B=[...N,...L][p];y(B),C(-1)}break}},G=l.useCallback(()=>{x.trim()&&(a(x),i(x,m),u(!1))},[x,m,i,a]);l.useEffect(()=>{c?.(F)},[F,c]),l.useEffect(()=>{const s=n=>{S.current&&!S.current.contains(n.target)&&u(!1)};if(g)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[g]);const I=(s,n)=>{j(w=>({...w,[s]:n==="all"?void 0:n}))},_=()=>{y(""),j({category:void 0,dateRange:"all",source:void 0}),C(-1),c?.([])},T=s=>{if(!x.trim())return Y(s);const n=Y(s);return e.jsx("span",{dangerouslySetInnerHTML:{__html:ae(n,x)}})};return e.jsxs("div",{ref:S,className:`relative ${h}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(xe,{})}),e.jsx("input",{ref:M,type:"text",value:x,onChange:s=>y(s.target.value),onKeyDown:V,onFocus:()=>u(!0),placeholder:f,className:"w-full pl-10 pr-20 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent))] focus:border-transparent","aria-label":"Search articles","aria-expanded":g,"aria-haspopup":"listbox",role:"combobox"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[x&&e.jsx("button",{onClick:_,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Clear search",children:e.jsx(fe,{})}),r&&e.jsx("button",{onClick:()=>k(!b),className:`p-1 transition-colors ${b?"text-[rgb(var(--color-accent))]":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle filters",children:e.jsx(me,{})})]})]}),g&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[b&&e.jsx("div",{className:"p-4 border-b border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:m.category||"all",onChange:s=>I("category",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Categories"}),O.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date Range"}),e.jsxs("select",{value:m.dateRange||"all",onChange:s=>I("dateRange",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Source"}),e.jsxs("select",{value:m.source||"all",onChange:s=>I("source",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-1 focus:ring-[rgb(var(--color-accent))]",children:[e.jsx("option",{value:"all",children:"All Sources"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),x.trim()&&e.jsxs("div",{children:[$&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Searching..."}),!$&&D&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:[F.length," result",F.length!==1?"s":""]}),F.slice(0,10).map((s,n)=>e.jsxs("div",{className:"p-4 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",onClick:()=>window.open(s.link,"_blank"),children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:T(s.title)}),s.description&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:T(s.description)}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500 min-w-0",children:[e.jsx("span",{className:"truncate max-w-[150px]",children:s.sourceTitle}),e.jsx("span",{className:"flex-shrink-0",children:new Date(s.pubDate).toLocaleDateString()})]})]},`${s.link}-${n}`))]}),!$&&!D&&e.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',x,'"']})]}),!x.trim()&&(N.length>0||L.length>0)&&e.jsxs("div",{children:[N.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Suggestions"}),N.map((s,n)=>e.jsx("button",{onClick:()=>y(s),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${p===n?"bg-gray-700":""}`,children:s},s))]}),L.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-700",children:"Recent Searches"}),L.slice(0,5).map((s,n)=>e.jsx("button",{onClick:()=>y(s),className:`w-full text-left px-4 py-2 hover:bg-gray-700 text-white ${p===N.length+n?"bg-gray-700":""}`,children:s},s))]})]}),!x.trim()&&N.length===0&&L.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Start typing to search articles..."})]})]})},ve=({size:t="md",className:i="",onClick:c,isClickable:f=!1,customSrc:d,useThemeColor:r=!1})=>{const h={sm:"w-6 h-6",md:"w-7 h-7",lg:"w-16 h-16"},g=f?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"";return e.jsx("div",{className:`${h[t]}  flex items-center justify-center ${i} ${g}`,onClick:c,title:f?"Ir para a página inicial":void 0,children:e.jsx(pe,{customSrc:d,useThemeColor:r})})},pe=({customSrc:t,useThemeColor:i})=>{if(t?.trim().startsWith("<svg")){const f=le.sanitize(t,{USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["use"],ADD_ATTR:["href","xlink:href"]});return e.jsx("div",{className:`w-full h-full [&>svg]:w-full [&>svg]:h-full ${i?"text-[rgb(var(--color-accent))] [&>svg]:fill-current [&>svg_path]:fill-current":""}`,dangerouslySetInnerHTML:{__html:f}})}const c=t||"/personalnews/assets/logo.svg";return i?e.jsx("div",{className:"w-full h-full bg-[rgb(var(--color-accent))]",style:{maskImage:`url(${c})`,maskSize:"contain",maskRepeat:"no-repeat",maskPosition:"center",WebkitMaskImage:`url(${c})`,WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}):e.jsx("img",{src:c,alt:"Personal News Logo",className:"w-full h-full object-contain"})},P=({className:t="",size:i="md",showBackground:c=!0,isActive:f=!1,onClick:d,title:r,children:h})=>{const g={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},u={xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},b=d?"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg":"",k=d?f?"bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-400 hover:to-blue-600":"bg-gradient-to-br from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700":f?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-gray-600 to-gray-800";return c?e.jsx("div",{className:`${g[i]} ${k} rounded-lg flex items-center justify-center ${t} ${b}`,onClick:d,title:r,children:e.jsx("div",{className:`${u[i]} text-white`,children:h})}):e.jsx("div",{className:`${u[i]} text-white ${t} ${b}`,onClick:d,title:r,children:h})},R={Refresh:t=>e.jsx(P,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Favorites:t=>e.jsx(P,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}),Menu:t=>e.jsx(P,{...t,children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),Feeds:t=>e.jsx(P,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Settings:t=>e.jsx(P,{...t,children:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ChevronDown:t=>e.jsx(P,{...t,children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})},we=[{value:"",label:"Default"},{value:"bento",label:"Bento"},{value:"brutalist",label:"Brutalist"},{value:"compact",label:"Compact"},{value:"cyberpunk",label:"Cyberpunk"},{value:"focus",label:"Focus"},{value:"gallery",label:"Gallery"},{value:"grid",label:"Grid"},{value:"immersive",label:"Immersive"},{value:"list",label:"List"},{value:"magazine",label:"Magazine"},{value:"masonry",label:"Masonry"},{value:"minimal",label:"Minimal"},{value:"modern",label:"Modern"},{value:"newspaper",label:"Newspaper"},{value:"pocketfeeds",label:"PocketFeeds"},{value:"split",label:"Split"},{value:"terminal",label:"Terminal"},{value:"timeline",label:"Timeline"}],je=[{value:"",label:"Padrão (Global)"},{value:"static",label:"Estático"},{value:"sticky",label:"Fixo (Sticky)"},{value:"floating",label:"Flutuante"},{value:"hidden",label:"Oculto"}],ye=t=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(t).hostname}&sz=32`}catch{return""}},Q=t=>{try{return new URL(t).hostname.replace(/^www\./,"")}catch{return t}},J=({category:t,feeds:i,onSelectFeed:c,onSelectCategory:f,selectedCategory:d,onEditCategory:r})=>{const{deleteCategory:h,updateCategory:g}=ie(),{confirmDanger:u,alertSuccess:b}=de(),{t:k}=q(),[m,j]=l.useState(!1),[p,C]=l.useState(null),M=l.useRef(null),S=l.useRef(null),x=()=>{if(S.current&&clearTimeout(S.current),M.current){const a=M.current.getBoundingClientRect();C({top:a.bottom+16,left:a.left})}j(!0)},y=()=>{S.current=setTimeout(()=>{j(!1)},200)};l.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);const z=async a=>{a.stopPropagation(),g(t.id,{isPinned:!t.isPinned})},$=async a=>{a.stopPropagation(),await u(k("confirm.category_delete")+` "${t.name}"?`)&&(h(t.id),b(k("alert.category_deleted_success")))},D=a=>{g(t.id,{layoutMode:a.target.value})},W=a=>{const N=a.target.value;g(t.id,{headerPosition:N||void 0})},L=d===t.id;return e.jsxs("div",{className:"relative group",ref:M,onMouseEnter:x,onMouseLeave:y,children:[e.jsxs("button",{onClick:f,"aria-label":`Select category ${t.name}`,"aria-expanded":m,className:`
          flex items-center space-x-2 px-5 py-2.5 rounded-full transition-all duration-300 ease-out min-h-[44px]
          ${L?"bg-white/10 text-white shadow-[0_0_20px_rgba(var(--color-primary),0.4)] border border-white/20 backdrop-blur-md":"text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"}
        `,children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-500 ${L?"shadow-[0_0_10px_currentColor] scale-125":"opacity-70"}`,style:{backgroundColor:t.color,color:t.color}}),e.jsx("span",{className:`font-medium text-sm tracking-wide transition-all duration-300 ${L?"text-white":"text-gray-300 group-hover:text-white"}`,children:t.name}),e.jsx(R.ChevronDown,{size:"xs",className:`transition-transform duration-500 ease-out ${m?"rotate-180 text-white":"text-gray-500 group-hover:text-gray-300"}`})]}),m&&p&&ne.createPortal(e.jsx("div",{onMouseEnter:x,onMouseLeave:y,style:{top:p.top,left:p.left},className:`
            fixed w-96 z-[9999]
            bg-[rgb(var(--color-surface))]/95 backdrop-blur-2xl border border-[rgb(var(--color-border))]/20
            rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] overflow-hidden
            transition-all duration-200 origin-top-left
            animate-in fade-in slide-in-from-top-2
          `,children:e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[rgb(var(--color-border))]/10 mb-1 flex items-center justify-between bg-[rgb(var(--color-background))]/30",children:[e.jsxs("span",{className:"text-[10px] font-bold text-[rgb(var(--color-textSecondary))] uppercase tracking-widest",children:[k("feeds.tab.feeds")," de ",t.name]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative group/layout",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.layoutMode?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Alterar Layout da Categoria","aria-label":"Alterar Layout da Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.layoutMode||"",onChange:D,onClick:a=>a.stopPropagation(),title:"Alterar Layout da Categoria",children:we.map(a=>e.jsxs("option",{value:a.value,children:[a.label," ",(t.layoutMode||"")===a.value?" ✓":""]},a.label))})]}),e.jsxs("div",{className:"relative group/header",children:[e.jsx("button",{onClick:a=>a.stopPropagation(),className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.headerPosition?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:"Posição do Cabeçalho","aria-label":"Posição do Cabeçalho",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-black",value:t.headerPosition||"",onChange:W,onClick:a=>a.stopPropagation(),title:"Posição do Cabeçalho",children:je.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsx("button",{onClick:z,className:`p-2 rounded hover:bg-[rgb(var(--color-text))]/10 min-w-[32px] min-h-[32px] ${t.isPinned?"text-[rgb(var(--color-accent))]":"text-[rgb(var(--color-textSecondary))]"}`,title:t.isPinned?"Desafixar Categoria":"Fixar Categoria","aria-label":t.isPinned?"Desafixar Categoria":"Fixar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:t.isPinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),r&&e.jsx("button",{onClick:a=>{a.stopPropagation(),r(t.id),j(!1)},className:"p-2 rounded hover:bg-[rgb(var(--color-text))]/10 text-[rgb(var(--color-textSecondary))] min-w-[32px] min-h-[32px]",title:"Editar Categoria","aria-label":"Editar Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),!t.isDefault&&e.jsx("button",{onClick:$,className:"p-2 rounded hover:bg-red-500/20 text-[rgb(var(--color-textSecondary))] hover:text-red-400 min-w-[32px] min-h-[32px]",title:"Excluir Categoria","aria-label":"Excluir Categoria",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto custom-scrollbar py-1",children:[i.map(a=>e.jsxs("button",{onClick:()=>{c(a.url),j(!1)},className:"w-full text-left px-4 py-3 text-sm text-[rgb(var(--color-textSecondary))] hover:bg-[rgb(var(--color-text))]/10 hover:text-[rgb(var(--color-text))] transition-colors flex items-center space-x-3 group min-h-[44px]","aria-label":`Select feed ${a.customTitle||Q(a.url)}`,children:[e.jsx("img",{src:ye(a.url),alt:"",className:"w-4 h-4 rounded-sm opacity-70 group-hover:opacity-100 transition-opacity",onError:N=>{N.currentTarget.style.display="none"}}),e.jsx("span",{className:"truncate flex-1",children:a.customTitle||Q(a.url)})]},a.url)),i.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"text-[rgb(var(--color-textSecondary))]/70 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("div",{className:"text-sm text-[rgb(var(--color-textSecondary))]",children:k("feeds.category.empty")})]})]})]})}),document.body)]})},$e=t=>{const[i,c]=l.useState(!1),[f,d]=l.useState(!1),{headerConfig:r}=ce(),{t:h}=q(),[g,u]=l.useState(!0),b=l.useRef(null),k=l.useRef(0),[m,j]=l.useState(!0),p=l.useRef(null);l.useEffect(()=>{const o=()=>{j(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{window.scrollY>100&&j(!1)},3e3)},v=setTimeout(()=>{window.scrollY>100&&j(!1)},3e3);return window.addEventListener("scroll",o),window.addEventListener("touchmove",o),window.addEventListener("touchstart",o),()=>{window.removeEventListener("scroll",o),window.removeEventListener("touchmove",o),window.removeEventListener("touchstart",o),p.current&&clearTimeout(p.current),clearTimeout(v)}},[]),l.useEffect(()=>{const o=()=>{const v=window.scrollY;d(v>10),r.position==="hidden"&&(v<k.current||v<50?(u(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{window.scrollY>50&&u(!1)},3e3)):v>k.current&&v>100&&u(!1),k.current=v)};return window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o),b.current&&clearTimeout(b.current)}},[r.position]),l.useEffect(()=>{r.customTitle&&(document.title=r.customTitle);const o=document.querySelector("link[rel~='icon']");if(o&&r.logoUrl)if(r.logoUrl.trim().startsWith("<svg")){const v=r.logoUrl,H=encodeURIComponent(v);o.href=`data:image/svg+xml;charset=utf-8,${H}`}else o.href=r.logoUrl},[r.customTitle,r.logoUrl]);const C={static:"relative w-full",sticky:"sticky top-0 z-50 w-full",floating:"fixed top-2 left-1/2 -translate-x-1/2 w-[95%] max-w-7xl rounded-xl border-[rgba(255,255,255,0.08)] md:top-4 md:rounded-2xl z-50",hidden:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-in-out ${g?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`},M={default:"justify-between gap-4",centered:"justify-between lg:justify-center lg:relative gap-4",minimal:"justify-between gap-4"},S={"ultra-compact":"h-8 lg:h-10",tiny:"h-10 lg:h-12",compact:"h-12 lg:h-14",normal:"h-14 lg:h-16",spacious:"h-16 lg:h-20"},x=r.position==="floating",y=r.style==="centered",z=r.style==="minimal",$=t.categories.filter(o=>o.isPinned||(t.categorizedFeeds[o.id]||[]).length>0),D=r.bgOpacity??.9,W=r.borderOpacity??8,L=r.bgColor||r.backgroundColor||"#0a0a0c",a=r.borderColor??"#ffffff",O=`backdrop-blur-[${r.blur??10}px]`,E=(o,v)=>{const H=parseInt(o.slice(1,3),16),te=parseInt(o.slice(3,5),16),re=parseInt(o.slice(5,7),16);return`rgba(${H},${te},${re},${v})`},F=E(L,D),V=E(a,W/100),G=r.categoryBackgroundColor??"#ffffff",I=r.categoryBackgroundOpacity??3,_=E(G,I/100),T=l.useRef(null),[s,n]=l.useState(!1),[w,B]=l.useState(!1),A=()=>{if(T.current){const{scrollLeft:o,scrollWidth:v,clientWidth:H}=T.current;n(o>5),B(o<v-H-5)}};l.useEffect(()=>(A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)),[$]);const K=o=>{if(T.current){const H=o==="left"?T.current.scrollLeft-200:T.current.scrollLeft+200;T.current.scrollTo({left:H,behavior:"smooth"})}},X=o=>{switch(o){case"sm":return"w-6 h-6";case"lg":return"w-12 h-12";default:return"w-8 h-8"}},Z={"ultra-compact":"h-12 lg:h-14",tiny:"h-14 lg:h-16",compact:"h-16 lg:h-18",normal:"h-18 lg:h-20",spacious:"h-20 lg:h-24"},ee=r.position==="hidden"||r.position==="floating";return e.jsxs(e.Fragment,{children:[ee&&e.jsx("div",{className:`${Z[r.height]} mb-[52px] md:mb-0 transition-[margin] duration-300`}),e.jsx("header",{className:`${C[r.position]} z-30 transition-all duration-300 ${O} ${f||x?"shadow-lg":""}
        ${f&&!x?"border-b":""} 
        `,style:{backgroundColor:F,borderBottomColor:f&&!x?V:"transparent"},children:e.jsxs("div",{className:`mx-auto px-3 sm:px-4 ${x?"":"container"} ${x?"rounded-xl md:rounded-2xl":""} overflow-hidden`,children:[e.jsxs("div",{className:`
            flex items-center transition-all duration-300 
            ${r.showLogo!==!1||r.showTitle?S[r.height]:"h-auto py-2"}
            ${M[r.style]}
            ${m?"flex":"hidden md:flex"}
          `,children:[e.jsxs("div",{className:`flex items-center space-x-2 md:space-x-4 group flex-shrink-0 ${y?"lg:absolute lg:left-4":""}`,children:[r.showLogo!==!1&&e.jsxs("div",{className:"relative cursor-pointer",onClick:t.onGoHome,children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-secondary))] rounded-full opacity-0 group-hover:opacity-20 blur-md transition-opacity duration-500"}),e.jsx("div",{className:"relative z-10",children:r.customLogoSvg?e.jsx("div",{className:`
                            ${X(r.logoSize)}
                            ${r.logoColorMode==="theme"?"text-[rgb(var(--color-accent))]":""}
                            [&>svg]:w-full [&>svg]:h-full
                            ${r.logoColorMode!=="original"?"[&_*:not([fill='none'])]:!fill-current [&_*:not([stroke='none'])]:!stroke-current":""}
                        `,style:{color:r.logoColorMode==="custom"?r.logoColor:void 0},dangerouslySetInnerHTML:{__html:r.customLogoSvg}},r.logoColorMode):e.jsx(ve,{size:r.logoSize,isClickable:!0,onClick:t.onGoHome,customSrc:r.logoUrl,useThemeColor:r.useThemeColor})})]}),r.showTitle?e.jsx("h1",{className:"font-bold tracking-tight cursor-pointer pb-1 text-lg md:text-xl truncate max-w-[120px] sm:max-w-[200px] md:max-w-none",onClick:t.onGoHome,style:{color:r.titleGradient?.enabled?void 0:r.titleColor||"rgb(var(--color-text))"},children:r.titleGradient?.enabled?e.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(${r.titleGradient.direction||"to right"}, ${r.titleGradient.from}, ${r.titleGradient.to})`},children:r.customTitle||h("app.title")}):e.jsx("span",{children:r.customTitle||h("app.title")})}):e.jsx("h1",{className:"sr-only",children:h("app.title")})]}),!y&&e.jsxs("div",{className:"hidden md:flex flex-1 items-center justify-center relative group/scroll px-2 overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 z-10 transition-all duration-300 ${s?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>K("left"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll left",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})})}),e.jsx("div",{ref:T,onScroll:A,className:`flex items-center space-x-1 p-1 rounded-full text-xs font-medium transition-all overflow-x-auto no-scrollbar max-w-full scroll-smooth ${z?"":"border backdrop-blur-sm"}`,style:{...z?{}:{backgroundColor:_,borderColor:E("#ffffff",.05)},scrollbarWidth:"none"},children:$.map(o=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{category:o,feeds:t.categorizedFeeds[o.id]||[],onSelectFeed:v=>t.onNavigation(o.id,v),onSelectCategory:()=>t.onNavigation(o.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick})},o.id))}),e.jsx("div",{className:`absolute right-0 z-10 transition-all duration-300 ${w?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"}`,children:e.jsx("button",{onClick:()=>K("right"),className:"p-1.5 rounded-full bg-gray-800/80 backdrop-blur-md text-white hover:bg-[rgb(var(--color-primary))] border border-white/10 shadow-lg transition-all","aria-label":"Scroll right",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})})]}),y&&e.jsx("div",{className:`hidden lg:flex items-center space-x-1 p-1 rounded-full transition-all flex-grow justify-center ${z?"":"border backdrop-blur-sm"}`,style:z?{}:{backgroundColor:_,borderColor:E("#ffffff",.05)},children:$.map(o=>e.jsx(J,{category:o,feeds:t.categorizedFeeds[o.id]||[],onSelectFeed:v=>t.onNavigation(o.id,v),onSelectCategory:()=>t.onNavigation(o.id),selectedCategory:t.selectedCategory,onEditCategory:t.onManageFeedsClick},o.id))}),e.jsxs("div",{className:`flex items-center justify-end space-x-2 flex-shrink-0 ${y?"lg:absolute lg:right-4":""}`,children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx("button",{onClick:t.onRefreshClick,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:h("header.refresh"),"aria-label":h("header.refresh"),children:e.jsx(R.Refresh,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenFavorites,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-accent))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:h("header.favorites"),"aria-label":h("header.favorites"),children:e.jsx(R.Favorites,{showBackground:!1,size:"md"})}),e.jsx("button",{onClick:t.onOpenSettings,className:"p-3 text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:"Configurações","aria-label":"Configurações",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:t.onManageFeedsClick,className:"p-3 text-gray-400 hover:text-[rgb(var(--color-primary))] hover:bg-[rgba(255,255,255,0.1)] rounded-full transition-all duration-200",title:h("header.manage_feeds"),"aria-label":h("header.manage_feeds"),children:e.jsx(R.Feeds,{showBackground:!1,size:"md"})})]}),e.jsx("div",{className:"lg:hidden ml-2",children:e.jsx("button",{onClick:()=>c(!i),className:`p-2 rounded-lg transition-colors ${i?"bg-[rgba(255,255,255,0.1)] text-white":"text-gray-400 hover:text-white hover:bg-[rgba(255,255,255,0.05)]"}`,"aria-label":"Menu",children:e.jsx(R.Menu,{showBackground:!1,size:"md",isActive:i})})})]})]}),e.jsx("div",{className:"md:hidden w-full py-2 border-t border-white/5 bg-black/10",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar w-full",style:{scrollbarWidth:"none"},children:e.jsx("div",{className:"flex items-center px-1 space-x-2",children:$.map(o=>e.jsx("button",{onClick:()=>t.onNavigation(o.id),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium border transition-all whitespace-nowrap ${t.selectedCategory===o.id?"bg-[rgb(var(--color-primary))] text-white border-[rgb(var(--color-primary))] shadow-lg":"bg-[rgba(255,255,255,0.05)] text-gray-300 border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.1)]"}`,children:o.name},o.id))})})})]})}),e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden transition-opacity duration-300 ${i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>c(!1)}),e.jsx("div",{className:`absolute top-0 right-0 bottom-0 w-[80%] max-w-sm bg-[rgb(var(--color-surface))] border-l border-[rgba(255,255,255,0.08)] shadow-2xl transform transition-transform duration-300 ${i?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:h("header.menu")}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto flex-1",children:[e.jsx("div",{className:"relative",children:e.jsx(be,{articles:t.articles,onSearch:t.onSearch,onResultsChange:t.onSearchResultsChange,placeholder:h("search.placeholder"),className:"w-full"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{t.onManageFeedsClick(),c(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(139,92,246,0.1)] text-[rgb(var(--color-primary))] rounded-xl font-medium border border-[rgba(139,92,246,0.2)]",children:[e.jsx(R.Feeds,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:h("feeds.tab.feeds")})]}),e.jsxs("button",{onClick:()=>{t.onOpenFavorites(),c(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Favorites,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:h("header.favorites")})]}),e.jsxs("button",{onClick:()=>{t.onOpenSettings(),c(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Settings,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:h("settings.title")})]}),e.jsxs("button",{onClick:()=>{t.onRefreshClick(),c(!1)},className:"flex flex-col items-center justify-center p-4 bg-[rgba(255,255,255,0.05)] text-gray-300 rounded-xl font-medium hover:bg-[rgba(255,255,255,0.1)]",children:[e.jsx(R.Refresh,{showBackground:!1,size:"md"}),e.jsx("span",{className:"mt-2 text-xs",children:h("action.refresh")})]})]})]})]})})]})]})};export{$e as default};
