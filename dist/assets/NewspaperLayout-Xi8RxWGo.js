import{r as m,j as e}from"./performance-DlrZJWlJ.js";import{A as k}from"./ArticleReaderModal-BIWcX3VM.js";import{S as y}from"./SmallOptimizedImage-CPF_A2Z9.js";import{b as S}from"./index-BzYQJbSF.js";import"./react-vendor-Cgg2GOmP.js";import"./services-DnXlInF0.js";import"./videoEmbed-yRvvzQp4.js";import"./articleFetcher-BwJYNfsk.js";const w="personalnews_weather_city",C="SÃ£o Paulo",L=(r,o)=>r===0?o?"â˜€ï¸":"ğŸŒ™":r<=3?o?"â›…":"â˜ï¸":r<=48?"ğŸŒ«ï¸":r<=57||r<=67?"ğŸŒ§ï¸":r<=77?"â„ï¸":r<=82?"ğŸŒ§ï¸":r<=86?"ğŸŒ¨ï¸":r>=95?"â›ˆï¸":"â˜ï¸",T=async r=>{try{const a=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(r)}&count=1&language=pt&format=json`)).json();return a.results&&a.results.length>0?{lat:a.results[0].latitude,lon:a.results[0].longitude,name:a.results[0].name}:null}catch{return null}},A=()=>{const[r,o]=m.useState({data:null,isLoading:!0,error:null,city:localStorage.getItem(w)||C}),a=m.useCallback(async i=>{o(c=>({...c,isLoading:!0,error:null}));const l=await T(i);if(!l){o(c=>({...c,isLoading:!1,error:"City not found"}));return}try{const s=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${l.lat}&longitude=${l.lon}&current=temperature_2m,weather_code,is_day`)).json();s.current?(o({data:{temperature:Math.round(s.current.temperature_2m),weatherCode:s.current.weather_code,isDay:s.current.is_day===1},isLoading:!1,error:null,city:l.name}),localStorage.setItem(w,l.name)):o(h=>({...h,isLoading:!1,error:"Failed to fetch weather"}))}catch{o(c=>({...c,isLoading:!1,error:"Network error"}))}},[]),x=m.useCallback(i=>{a(i)},[a]);m.useEffect(()=>{const i=requestAnimationFrame(()=>a(r.city)),l=setInterval(()=>a(r.city),1800*1e3);return()=>{cancelAnimationFrame(i),clearInterval(l)}},[a,r.city]);const g=m.useCallback(()=>r.data?L(r.data.weatherCode,r.data.isDay):"ğŸŒ¡ï¸",[r.data]);return{...r,changeCity:x,refreshWeather:()=>a(r.city),getWeatherIcon:g}},$=({articles:r})=>{const[o,a]=m.useState(null),{data:x,city:g,getWeatherIcon:i,isLoading:l,changeCity:c}=A(),{t:s}=S(),h=()=>{const t=prompt(s("weather.city_prompt"),g);t&&t.trim()!==""&&c(t)},b=t=>{const d=typeof t=="string"?new Date(t):t,p=new Date().getTime()-d.getTime();if(p<0||isNaN(p))return d.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});const u=Math.floor(p/6e4);if(u<1)return s("time.now")||"agora";if(u<60)return`${u}min`;const f=Math.floor(u/60);if(f<24)return`${f}h`;const N=Math.floor(f/24);return N<7?`${N}d`:d.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},n=r[0],v=r.slice(1,3),j=r.slice(3);return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"max-w-6xl mx-auto p-6 md:p-10 bg-[rgb(var(--color-surface))]/80 backdrop-blur-md rounded-2xl border border-[rgb(var(--color-border))]/20",children:[e.jsxs("header",{className:"text-center border-b-2 border-[rgb(var(--color-text))] pb-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-widest text-[rgb(var(--color-textSecondary))] mb-2",children:[e.jsxs("span",{children:[s("article.vol")," ",new Date().getFullYear()]}),e.jsx("button",{onClick:h,className:"flex items-center gap-1.5 hover:text-[rgb(var(--color-accent))] transition-colors",title:s("action.edit"),children:l?e.jsx("span",{className:"animate-pulse",children:"..."}):x?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:i()}),e.jsxs("span",{children:[x.temperature,"Â°"]}),e.jsx("span",{className:"hidden sm:inline text-[rgb(var(--color-textSecondary))]",children:g})]}):null}),e.jsx("span",{children:new Date().toLocaleDateString("pt-BR",{weekday:"short",day:"numeric",month:"short"})})]}),e.jsx("h1",{className:"font-serif text-4xl md:text-6xl font-black tracking-tight text-[rgb(var(--color-text))]",children:"THE DAILY NEWS"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3 text-xs text-[rgb(var(--color-textSecondary))]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s("feeds.live")||"LIVE"]}),e.jsx("span",{className:"h-3 w-px bg-[rgb(var(--color-border))]"}),e.jsxs("span",{children:[r.length," ",s("feeds.articles")||"artigos"]})]})]}),n&&e.jsx("section",{className:"mb-8 pb-8 border-b border-[rgb(var(--color-border))]",children:e.jsx("article",{className:"group cursor-pointer",onClick:()=>a(n),children:e.jsxs("div",{className:"grid md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"md:col-span-3 relative aspect-[16/10] overflow-hidden rounded-xl bg-[rgb(var(--color-background))]",children:n.imageUrl&&e.jsx(y,{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",fallbackText:n.sourceTitle,size:1e3})}),e.jsxs("div",{className:"md:col-span-2 flex flex-col justify-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-[rgb(var(--color-accent))] mb-2",children:n.sourceTitle}),e.jsx("h2",{className:"font-serif text-2xl md:text-4xl font-bold leading-tight text-[rgb(var(--color-text))] group-hover:text-[rgb(var(--color-accent))] transition-colors mb-4",children:n.title}),e.jsx("p",{className:"text-[rgb(var(--color-textSecondary))] leading-relaxed mb-4 line-clamp-4 first-letter:text-4xl first-letter:font-bold first-letter:float-left first-letter:mr-2 first-letter:mt-0.5",children:n.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[rgb(var(--color-textSecondary))]",children:[n.author&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:n.author}),e.jsx("span",{className:"h-3 w-px bg-[rgb(var(--color-border))]"})]}),e.jsx("span",{children:b(n.pubDate)})]})]})]})})}),v.length>0&&e.jsx("section",{className:"mb-8 pb-8 border-b border-[rgb(var(--color-border))]",children:e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:v.map((t,d)=>e.jsxs("article",{className:"group cursor-pointer flex gap-4",onClick:()=>a(t),children:[t.imageUrl&&e.jsx("div",{className:"w-32 h-24 flex-shrink-0 overflow-hidden rounded-lg bg-[rgb(var(--color-background))]",children:e.jsx(y,{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",fallbackText:t.sourceTitle,size:300})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-[rgb(var(--color-accent))]",children:t.sourceTitle}),e.jsx("h3",{className:"font-serif text-lg font-bold leading-tight text-[rgb(var(--color-text))] group-hover:text-[rgb(var(--color-accent))] transition-colors line-clamp-2 mt-1",children:t.title}),e.jsx("p",{className:"text-sm text-[rgb(var(--color-textSecondary))] line-clamp-2 mt-1",children:t.description})]})]},d))})}),j.length>0&&e.jsx("section",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-4",children:j.map((t,d)=>e.jsxs("article",{className:"break-inside-avoid group cursor-pointer pb-4 border-b border-[rgb(var(--color-border))]",onClick:()=>a(t),children:[e.jsx("span",{className:"inline-block text-[10px] font-bold uppercase tracking-wider bg-[rgb(var(--color-accent))]/10 text-[rgb(var(--color-accent))] px-2 py-0.5 rounded mb-2",children:t.sourceTitle}),e.jsx("h3",{className:"font-serif text-lg font-bold leading-snug text-[rgb(var(--color-text))] group-hover:text-[rgb(var(--color-accent))] transition-colors mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-[rgb(var(--color-textSecondary))] leading-relaxed line-clamp-3 mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-textSecondary))]",children:[e.jsx("span",{children:b(t.pubDate)}),e.jsxs("span",{className:"text-[rgb(var(--color-accent))] font-medium group-hover:underline",children:[s("action.read")||"Ler"," â†’"]})]})]},d))}),e.jsx("footer",{className:"mt-10 pt-6 border-t border-[rgb(var(--color-border))] text-center",children:e.jsx("p",{className:"text-xs uppercase tracking-widest text-[rgb(var(--color-textSecondary))]",children:s("article.end")||"Fim da ediÃ§Ã£o"})})]}),o&&e.jsx(k,{article:o,onClose:()=>a(null),onNext:()=>{},onPrev:()=>{},hasNext:!1,hasPrev:!1})]})};export{$ as NewspaperLayout};
