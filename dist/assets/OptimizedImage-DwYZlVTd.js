import{r as a,R as I,j as e}from"./performance-CYiPyM9i.js";const N=({src:t,alt:p,className:f="",fallbackText:d,width:s,height:o,priority:g=!1})=>{const[i,n]=a.useState("loading"),[v,m]=a.useState(t),[u,x]=a.useState(0),c=a.useCallback((r,l)=>{const b=encodeURIComponent(d),h="374151",y="9CA3AF";switch(r){case 0:return l||"";case 1:return l?`https://picsum.photos/seed/${encodeURIComponent(l)}/${s}/${o}`:`https://picsum.photos/${s}/${o}?random=${Math.random()}`;case 2:return`https://via.placeholder.com/${s}x${o}/${h}/${y}?text=${b}`;default:return`https://via.placeholder.com/${s}x${o}/6B7280/F3F4F6?text=IMG`}},[d,s,o]),$=a.useCallback(()=>{n("loaded")},[]),j=a.useCallback(()=>{const r=u+1,l=c(r,t);r<=3?(x(r),m(l),n("loading")):n("error")},[u,c,t]);return I.useEffect(()=>{t?(m(t),n("loading"),x(0)):(m(c(2,void 0)),n("loading"),x(2))},[t,c]),e.jsxs("div",{className:`relative overflow-hidden w-full h-full ${f}`,children:[i==="loading"&&e.jsx("div",{className:"absolute inset-0 bg-gray-700 animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs font-medium",children:u===0?"Loading...":d})}),e.jsx("img",{src:v,alt:p,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${i==="loaded"?"opacity-100":"opacity-0"}`,onLoad:$,onError:j,loading:g?"eager":"lazy"}),i==="error"&&e.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-gray-500 text-xs font-medium text-center",children:[e.jsx("div",{className:"mb-1",children:"⚠️"}),e.jsx("div",{children:"Image Error"})]})})]})};export{N as O};
