import{r as b,R as N,j as e}from"./performance-BQw1TMdn.js";import{L as f}from"./LazyImage-CBJ_fLAZ.js";import{A as L}from"./ArticleReaderModal-BQvgQc4-.js";import{b as M}from"./index-EqZgzEO3.js";import"./react-vendor-Cgg2GOmP.js";import"./services-BY3oiKYC.js";import"./videoEmbed-D9D8KXWZ.js";import"./articleFetcher-CV-NqR0N.js";const $=({articles:h})=>{const[j,m]=b.useState(null),[i,v]=b.useState(null),[n,g]=b.useState(null),d=N.useRef(null),{t:u}=M(),c=N.useMemo(()=>{const r={};return h.forEach(t=>{const s=t.sourceTitle||"Unknown Podcast";r[s]||(r[s]=[]),r[s].push(t)}),r},[h]),a=Object.keys(c),p=a.length<=4,w=r=>{if(!r)return"";if(r.includes(":"))return r;const t=parseInt(r,10);if(isNaN(t))return r;const s=Math.floor(t/3600),l=Math.floor(t%3600/60),o=t%60;return s>0?`${s}:${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${l}:${o.toString().padStart(2,"0")}`},k=r=>{i===r?(d.current?.pause(),v(null)):(d.current&&(d.current.src=r,d.current.play().catch(()=>{})),v(r))},y=r=>{g(n===r?null:r)};return e.jsxs("div",{className:"min-h-screen bg-[rgba(var(--color-background),0.5)] p-6 md:p-8",children:[e.jsx("audio",{ref:d,onEnded:()=>v(null),className:"hidden"}),e.jsx("div",{className:"flex items-center justify-between mb-8 border-b border-[rgb(var(--color-border))] pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-[rgb(var(--color-accent))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),e.jsx("h1",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"PocketFeeds"}),e.jsxs("span",{className:"text-sm text-[rgb(var(--color-textSecondary))]",children:[a.length," ",a.length===1?"podcast":"podcasts"," • ",h.length," ",h.length===1?u("article.episode")||"episódio":u("article.episodes")||"episódios"]})]})}),p?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(r=>{const t=c[r],s=t[0],l=n===r||a.length===1;return e.jsxs("div",{className:`bg-[rgb(var(--color-surface))] rounded-xl border border-[rgb(var(--color-border))] overflow-hidden transition-all duration-300 ${l||a.length===1?"lg:col-span-2":""}`,children:[e.jsxs("div",{className:"flex items-start gap-4 p-5 cursor-pointer hover:bg-[rgba(var(--color-text),0.02)] transition-colors",onClick:()=>a.length>1&&y(r),children:[e.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-xl overflow-hidden flex-shrink-0 shadow-lg",children:s.imageUrl?e.jsx(f,{src:s.imageUrl,className:"w-full h-full object-cover",alt:r}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-white opacity-80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-[rgb(var(--color-text))] mb-1 truncate",children:r}),e.jsxs("p",{className:"text-sm text-[rgb(var(--color-textSecondary))] mb-3",children:[t.length," ",t.length===1?"episódio":"episódios"]}),a.length>1&&e.jsxs("button",{className:"text-xs font-medium text-[rgb(var(--color-accent))] flex items-center gap-1",children:[l?"Recolher":"Ver episódios",e.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),(l||a.length===1)&&e.jsxs("div",{className:"border-t border-[rgb(var(--color-border))]",children:[t.slice(0,10).map((o,x)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-[rgba(var(--color-text),0.03)] transition-colors border-b border-[rgb(var(--color-border))] last:border-b-0",children:[o.audioUrl?e.jsx("button",{onClick:C=>{C.stopPropagation(),k(o.audioUrl)},className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 transition-all ${i===o.audioUrl?"bg-[rgb(var(--color-accent))] text-white":"bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-accent))] hover:text-white"}`,children:i===o.audioUrl?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):e.jsx("svg",{className:"w-5 h-5 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgb(var(--color-background))] flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-[rgb(var(--color-textSecondary))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>m(o),children:[e.jsx("h3",{className:"font-medium text-[rgb(var(--color-text))] text-sm md:text-base line-clamp-1 hover:text-[rgb(var(--color-accent))] transition-colors",children:o.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-textSecondary))] mt-1",children:[e.jsx("span",{children:new Date(o.pubDate).toLocaleDateString()}),o.audioDuration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-40",children:"•"}),e.jsx("span",{children:w(o.audioDuration)})]})]})]}),e.jsx("button",{onClick:()=>m(o),className:"p-2 text-[rgb(var(--color-textSecondary))] hover:text-[rgb(var(--color-accent))] transition-colors",title:u("action.preview"),children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})})]},x)),t.length>10&&e.jsxs("div",{className:"p-4 text-center text-sm text-[rgb(var(--color-textSecondary))]",children:["+",t.length-10," ",u("article.more_episodes")||"mais episódios"]})]})]},r)})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:a.map(r=>{const t=c[r],s=t[0],l=t.filter(o=>{const x=new Date;return x.setDate(x.getDate()-7),new Date(o.pubDate)>x}).length;return e.jsxs("div",{className:"group cursor-pointer",onClick:()=>{g(r)},children:[e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden shadow-md group-hover:shadow-xl transition-all duration-300 group-hover:scale-[1.02] relative",children:[s.imageUrl?e.jsx(f,{src:s.imageUrl,className:"w-full h-full object-cover",alt:r}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-white opacity-80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),l>0&&e.jsxs("div",{className:"absolute top-2 right-2 bg-[rgb(var(--color-accent))] text-white text-xs font-bold px-2 py-0.5 rounded-full",children:[l," novo",l>1?"s":""]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-black ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),e.jsx("h3",{className:"mt-3 font-medium text-sm text-[rgb(var(--color-text))] line-clamp-2 group-hover:text-[rgb(var(--color-accent))] transition-colors",children:r}),e.jsxs("p",{className:"text-xs text-[rgb(var(--color-textSecondary))] mt-1",children:[t.length," ep."]})]},r)})}),n&&!p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:items-center justify-center",onClick:()=>g(null),children:e.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-2xl max-h-[90vh] rounded-t-2xl md:rounded-2xl overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-4 p-5 border-b border-[rgb(var(--color-border))]",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 shadow-lg",children:c[n][0].imageUrl?e.jsx(f,{src:c[n][0].imageUrl,className:"w-full h-full object-cover",alt:""}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white opacity-80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-bold text-[rgb(var(--color-text))] truncate",children:n}),e.jsxs("p",{className:"text-sm text-[rgb(var(--color-textSecondary))]",children:[c[n].length," episódios"]})]}),e.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-[rgba(var(--color-text),0.1)] rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-[rgb(var(--color-textSecondary))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:c[n].map((r,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-[rgba(var(--color-text),0.03)] transition-colors border-b border-[rgb(var(--color-border))] last:border-b-0",children:[r.audioUrl?e.jsx("button",{onClick:()=>k(r.audioUrl),className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 transition-all ${i===r.audioUrl?"bg-[rgb(var(--color-accent))] text-white":"bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-accent))] hover:text-white"}`,children:i===r.audioUrl?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):e.jsx("svg",{className:"w-5 h-5 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgb(var(--color-background))] flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-[rgb(var(--color-textSecondary))]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>m(r),children:[e.jsx("h3",{className:"font-medium text-[rgb(var(--color-text))] text-sm line-clamp-1 hover:text-[rgb(var(--color-accent))] transition-colors",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-textSecondary))] mt-1",children:[e.jsx("span",{children:new Date(r.pubDate).toLocaleDateString()}),r.audioDuration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-40",children:"•"}),e.jsx("span",{children:w(r.audioDuration)})]})]})]})]},t))})]})}),j&&e.jsx(L,{article:j,onClose:()=>m(null),onNext:()=>{},onPrev:()=>{},hasNext:!1,hasPrev:!1})]})};export{$ as PocketFeedsLayout};
