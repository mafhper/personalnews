# Change Log

## [2024/12/17 - Quality & Performance System]

### New Features
- **Quality Gate System**: Automated pre-commit checks for integrity, i18n, security, linting, and build validation (`npm run quality`).
- **Performance Gate**: Automated Lighthouse testing for mobile & desktop (`npm run perf:lighthouse`).
- **Local Dashboard**: Project observability dashboard (`npm run dashboard`) featuring:
  - Premium UI with Bento Grid and Dark Mode.
  - Real-time command execution streaming.
  - Intelligent port detection (3333+).
  - Visualization of Lighthouse reports and system logs.
  - Markdown log rendering.

### Technical Improvements
- **Robust Server Architecture**: Implemented custom Node.js HTTP server with SSE support and direct API for dev tooling access.
- **i18n Audit**: New script to check translation parity and hardcoded strings (`npm run i18n:audit`).
- **Lighthouse Automation**: Scripts to handle dev server lifecycle and multiple form-factors execution automatically.

---

## [2024/12/17 - Theme System Refactoring & Layout Redesigns]

### Bug Fixes
- **Fixed theme bleeding bug**: Resolved issue where layout preset configurations would persist and affect other layouts. Now `applyLayoutPreset()` correctly separates concerns:
  - **Header configurations** (navigation style, logo, title, etc.) are managed ONLY in Settings and are preserved when switching layouts
  - **Content configurations** (layoutMode, density, pagination) are applied when switching layouts
- **Fixed header position options**: All header position modes now work correctly:
  - **Static**: Full-width header in normal document flow
  - **Sticky**: Full-width header that sticks to top on scroll
  - **Floating**: Centered floating header with max-width and rounded corners
  - **Hidden**: Auto-hiding header that appears on scroll up, uses fixed positioning
- **Fixed title gradient**: Title gradient now correctly applies to text only using `bg-clip-text` classes
- **Fixed package.json scripts**: Updated `promo` and `promo:changelog` scripts to reference `_dev` folder instead of old `_desenvolvimento` path.
- **Fixed tsconfig.json**: Added `_dev` and `_template_v0` to exclude list to prevent TypeScript errors from non-project files.

### New Features
- **Swipe gesture for category navigation**: On touch devices, swipe left/right now navigates between categories instead of pages, improving mobile UX.
- **Reader preferences**: New customizable reading experience with persistent settings for:
  - Font size (P, M, G, XG)
  - Line spacing (Compact, Normal, Relaxed)
  - Content width (Narrow, Medium, Wide)
  - Font family (Serif, Sans, Mono)
- **Improved Focus Mode**: Now truly fullscreen, hiding all distractions for immersive reading
- **Added `clearUserOverrides()` function**: New public function in `useAppearance` hook for manual override reset.

### UI/UX Improvements
- **Centered categories in header**: Categories now centered in the space between logo/title and action icons for better visual balance
- **MagazineLayout redesign**: Modern editorial style with side-by-side hero section, defined sections (Destaques, Mais Notícias, Últimas), rounded cards, and subtle gradients.
- **MinimalLayout redesign**: Clean asymmetric alternating layout, elegant serif typography, generous spacing, and contemporary style.
- **NewspaperLayout redesign**: Classic newspaper style with elegant masthead, text columns, subtle transparency for colored backgrounds compatibility.
- **BentoLayout redesign**: Premium glassmorphism effect, large rounded corners, elegant gradients, colored shadows, and sophisticated high-quality visual.

### Technical Changes
- Modified `useAppearance.ts` to clear overrides when applying layout presets
- Updated `applyLayoutPreset()` signature to include `clearOverrides` parameter
- All layouts now use CSS variables (`--color-*`) for consistent theming across light/dark modes

---

## [Previous changes...]
